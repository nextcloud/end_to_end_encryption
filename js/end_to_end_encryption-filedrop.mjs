(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('.material-design-icon[data-v-d0b1a8bc]{display:flex;align-self:center;justify-self:center;align-items:center;justify-content:center}.app-details-toggle[data-v-d0b1a8bc]{position:-webkit-sticky;position:sticky;width:var(--default-clickable-area);height:var(--default-clickable-area);padding:calc((var(--default-clickable-area) - 16px) / 2);cursor:pointer;opacity:.6;transform:rotate(180deg);background-color:var(--color-main-background);z-index:2000;top:var(--app-navigation-padding);inset-inline-start:calc(var(--default-clickable-area) + var(--app-navigation-padding) * 2)}.app-details-toggle--mobile[data-v-d0b1a8bc]{inset-inline-start:var(--app-navigation-padding)}.app-details-toggle[data-v-d0b1a8bc]:active,.app-details-toggle[data-v-d0b1a8bc]:hover,.app-details-toggle[data-v-d0b1a8bc]:focus{opacity:1}.material-design-icon[data-v-cc483103]{display:flex;align-self:center;justify-self:center;align-items:center;justify-content:center}.app-content[data-v-cc483103]{position:initial;z-index:1000;flex-basis:100vw;height:100%;margin:0!important;background-color:var(--color-main-background);min-width:0}.app-content[data-v-cc483103]:not(.app-content--has-list){overflow:auto}.app-content-wrapper[data-v-cc483103]{position:relative;width:100%;height:100%}.app-content-wrapper--no-split.app-content-wrapper--show-list[data-v-cc483103] .app-content-list{display:flex}.app-content-wrapper--no-split.app-content-wrapper--show-list[data-v-cc483103] .app-content-details,.app-content-wrapper--no-split.app-content-wrapper--show-details[data-v-cc483103] .app-content-list{display:none}.app-content-wrapper--no-split.app-content-wrapper--show-details[data-v-cc483103] .app-content-details{display:block}[data-v-cc483103] .splitpanes.default-theme .app-content-list{max-width:none;scrollbar-width:auto}[data-v-cc483103] .splitpanes.default-theme .splitpanes__pane{background-color:transparent;transition:none}[data-v-cc483103] .splitpanes.default-theme .splitpanes__pane-list{min-width:300px;position:-webkit-sticky;position:sticky}@media only screen and (width < 1024px){[data-v-cc483103] .splitpanes.default-theme .splitpanes__pane-list{display:none}}[data-v-cc483103] .splitpanes.default-theme .splitpanes__pane-details{overflow-y:auto}@media only screen and (width < 1024px){[data-v-cc483103] .splitpanes.default-theme .splitpanes__pane-details{min-width:100%}}[data-v-cc483103] .splitpanes.default-theme .splitpanes__splitter{background-color:var(--color-main-background)}[data-v-cc483103] .splitpanes.default-theme .splitpanes__splitter:before,[data-v-cc483103] .splitpanes.default-theme .splitpanes__splitter:after{background-color:var(--color-border)}[data-v-cc483103] .splitpanes.default-theme.splitpanes--vertical .splitpanes__splitter{border-left:1px solid var(--color-border)}[data-v-cc483103] .splitpanes.default-theme.splitpanes--horizontal .splitpanes__splitter{border-top:1px solid var(--color-border)}.app-content-wrapper--show-list[data-v-cc483103] .app-content-list{max-width:none}.splitpanes{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;height:100%}.splitpanes--vertical{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.splitpanes--horizontal{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.splitpanes--dragging *{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.splitpanes__pane{width:100%;height:100%;overflow:hidden}.splitpanes--vertical .splitpanes__pane{-webkit-transition:width .2s ease-out;-o-transition:width .2s ease-out;transition:width .2s ease-out}.splitpanes--horizontal .splitpanes__pane{-webkit-transition:height .2s ease-out;-o-transition:height .2s ease-out;transition:height .2s ease-out}.splitpanes--dragging .splitpanes__pane{-webkit-transition:none;-o-transition:none;transition:none}.splitpanes__splitter{-ms-touch-action:none;touch-action:none}.splitpanes--vertical>.splitpanes__splitter{min-width:1px;cursor:col-resize}.splitpanes--horizontal>.splitpanes__splitter{min-height:1px;cursor:row-resize}.splitpanes.default-theme .splitpanes__pane{background-color:#f2f2f2}.splitpanes.default-theme .splitpanes__splitter{background-color:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;-ms-flex-negative:0;flex-shrink:0}.splitpanes.default-theme .splitpanes__splitter:before,.splitpanes.default-theme .splitpanes__splitter:after{content:"";position:absolute;top:50%;left:50%;background-color:#00000026;-webkit-transition:background-color .3s;-o-transition:background-color .3s;transition:background-color .3s}.splitpanes.default-theme .splitpanes__splitter:hover:before,.splitpanes.default-theme .splitpanes__splitter:hover:after{background-color:#00000040}.splitpanes.default-theme .splitpanes__splitter:first-child{cursor:auto}.default-theme.splitpanes .splitpanes .splitpanes__splitter{z-index:1}.default-theme.splitpanes--vertical>.splitpanes__splitter,.default-theme .splitpanes--vertical>.splitpanes__splitter{width:7px;border-left:1px solid #eee;margin-left:-1px}.default-theme.splitpanes--vertical>.splitpanes__splitter:before,.default-theme.splitpanes--vertical>.splitpanes__splitter:after,.default-theme .splitpanes--vertical>.splitpanes__splitter:before,.default-theme .splitpanes--vertical>.splitpanes__splitter:after{-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:1px;height:30px}.default-theme.splitpanes--vertical>.splitpanes__splitter:before,.default-theme .splitpanes--vertical>.splitpanes__splitter:before{margin-left:-2px}.default-theme.splitpanes--vertical>.splitpanes__splitter:after,.default-theme .splitpanes--vertical>.splitpanes__splitter:after{margin-left:1px}.default-theme.splitpanes--horizontal>.splitpanes__splitter,.default-theme .splitpanes--horizontal>.splitpanes__splitter{height:7px;border-top:1px solid #eee;margin-top:-1px}.default-theme.splitpanes--horizontal>.splitpanes__splitter:before,.default-theme.splitpanes--horizontal>.splitpanes__splitter:after,.default-theme .splitpanes--horizontal>.splitpanes__splitter:before,.default-theme .splitpanes--horizontal>.splitpanes__splitter:after{-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translate(-50%);width:30px;height:1px}.default-theme.splitpanes--horizontal>.splitpanes__splitter:before,.default-theme .splitpanes--horizontal>.splitpanes__splitter:before{margin-top:-2px}.default-theme.splitpanes--horizontal>.splitpanes__splitter:after,.default-theme .splitpanes--horizontal>.splitpanes__splitter:after{margin-top:1px}.material-design-icon{display:flex;align-self:center;justify-self:center;align-items:center;justify-content:center}#skip-actions.vue-skip-actions:focus-within{top:0!important;left:0!important;width:100vw;height:100vh;padding:var(--body-container-margin)!important;-webkit-backdrop-filter:brightness(50%);backdrop-filter:brightness(50%)}.material-design-icon[data-v-1f87d811]{display:flex;align-self:center;justify-self:center;align-items:center;justify-content:center}.vue-skip-actions__container[data-v-1f87d811]{background-color:var(--color-main-background);border-radius:var(--border-radius-large);padding:22px}.vue-skip-actions__headline[data-v-1f87d811]{font-weight:700;font-size:20px;line-height:30px;margin-bottom:12px}.vue-skip-actions__buttons[data-v-1f87d811]{display:flex;flex-wrap:wrap;gap:12px}.vue-skip-actions__buttons>*[data-v-1f87d811]{flex:1 0 fit-content}.vue-skip-actions__image[data-v-1f87d811]{margin-top:12px}.vue-skip-actions__image[data-v-1f87d811]:dir(rtl){transform:rotateY(180deg)}.content[data-v-1f87d811]{box-sizing:border-box;margin:var(--body-container-margin);margin-top:var(--header-height);display:flex;width:calc(100% - var(--body-container-margin) * 2);border-radius:var(--body-container-radius);height:var(--body-height);overflow:hidden;padding:0}.content[data-v-1f87d811]:not(.with-sidebar--full){position:fixed}.content[data-v-1f87d811] *{box-sizing:border-box}#app-content-vue[data-v-8a5d9b72]{display:flex;align-items:center;justify-content:center}#app-content-vue .uploader-form[data-v-8a5d9b72]{width:700px;height:700px;display:flex;align-items:center;justify-content:center;flex-direction:column}#app-content-vue .uploader-form.highlight[data-v-8a5d9b72]{border:4px solid var(--color-primary);border-radius:var(--border-radius-large);background:var(--color-primary-element-light-hover)}#app-content-vue .uploader-form__label[data-v-8a5d9b72]{display:flex;align-items:center;justify-content:center;flex-direction:column;font-weight:700;font-size:20px;text-align:center;position:-webkit-sticky;position:sticky}#app-content-vue .uploader-form__icon[data-v-8a5d9b72]{margin-bottom:12px;height:48px;width:48px;background-size:48px}#app-content-vue .uploader-form__input[data-v-8a5d9b72]{margin-top:20px}#app-content-vue .uploader-form__input input[data-v-8a5d9b72]{display:none}#app-content-vue .uploader-form__file-list[data-v-8a5d9b72]{margin-top:12px;height:100%;overflow:scroll;padding:0 32px}#app-content-vue .uploader-form__file-list__item[data-v-8a5d9b72]{display:flex;align-items:center}#app-content-vue .uploader-form__file-list__item .material-design-icon[data-v-8a5d9b72]{margin-right:8px}#app-content-vue .uploader-form__file-list__item .loading-icon[data-v-8a5d9b72] svg{animation:rotate var(--animation-duration, .8s) linear infinite}')),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
var se=Object.defineProperty;var A=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var k=(e,t,i)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,z=(e,t)=>{for(var i in t||(t={}))ae.call(t,i)&&k(e,i,t[i]);if(A)for(var i of A(t))re.call(t,i)&&k(e,i,t[i]);return e};import{v as oe,f as j,ap as le,a7 as pe,A as E,n as y,r as q,ae as ce,l as m,aq as he,h as S,ar as de,as as w,at as ue,N as K,t as G,V as g,au as me,j as fe,S as ge,E as $,z as ye}from"./_plugin-vue2_normalizer-Zqo7x4Mg.chunk.mjs";import{X as ve}from"./x509.es-DRpCTj3P.chunk.mjs";import{l as c}from"./logger-BlR8sgxG.chunk.mjs";import{e as we,u as N}from"./useIsMobile-CnyZhD3M.chunk.mjs";const P="end_to_end_encryption";const l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));function xe(e,t=0){return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}let D;const Ce=new Uint8Array(16);function ze(){if(!D){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");D=crypto.getRandomValues.bind(crypto)}return D(Ce)}const Se=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),T={randomUUID:Se};function De(e,t,i){var s,a,r;if(T.randomUUID&&!t&&!e)return T.randomUUID();e=e||{};const n=(r=(a=e.random)!=null?a:(s=e.rng)==null?void 0:s.call(e))!=null?r:ze();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,xe(n)}function d(e){return btoa(String.fromCharCode(...new Uint8Array(e)))}async function _e(e,t){const i=await Pe(JSON.stringify(e));c.debug("[FileDrop] Encryption info compressed (".concat(e.filename,")"),{encryptionInfo:e,compressedEncryptionInfo:i});const n=await W(),{content:s,tag:a}=await X(n,new Uint8Array(i));return c.debug("[FileDrop] Encryption info encrypted (".concat(e.filename,")"),{content:s,tag:a,encryptionParams:n}),c.debug("[FileDrop] Encryption info base64ed (".concat(e.filename,")"),{ciphertext:d(s)}),{ciphertext:d(s),nonce:d(n.initializationVector),authenticationTag:d(a),users:await Ee(t,n)}}async function be(e,t,i,n){const s=oe("apps/end_to_end_encryption/api/v{encryptionVersion}/meta-data/{folderId}",{encryptionVersion:e,folderId:t}),{data:{ocs:{meta:a}}}=await j.put("".concat(s,"/filedrop"),{filedrop:JSON.stringify(i)},{headers:{"x-e2ee-supported":!0},params:{shareToken:n}});if(a.statuscode!==200)throw new Error("Failed to upload metadata: ".concat(a.message))}async function Pe(e){const t=new Blob([e]).stream().pipeThrough(new CompressionStream("gzip")),i=[],n=t.getReader();for(;;){const{value:s}=await n.read();if(s===void 0)break;i.push(s)}return new Uint8Array(await new Blob(i).arrayBuffer())}async function Ee(e,t){return Promise.all(Object.entries(e).map(async([i,n])=>{const s=await window.crypto.subtle.exportKey("raw",t.key),a=await $e(n,s);return{userId:i,encryptedFiledropKey:d(a)}}))}function Ne(e){return e.slice(e.byteLength-16)}async function Me(){return await window.crypto.subtle.generateKey({name:"AES-GCM",length:128},!0,["encrypt","decrypt"])}async function W(){return{key:await Me(),initializationVector:window.crypto.getRandomValues(new Uint8Array(16))}}async function X({key:e,initializationVector:t},i){const n=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:t},e,i);return{content:n,tag:Ne(n)}}async function Ae(e){const t=await e.arrayBuffer(),i=await W(),{content:n,tag:s}=await X(i,new Uint8Array(t));return c.debug("[FileDrop] File encrypted: ".concat(e.name),{file:e,content:n,tag:s,encryptionParams:i,rawKey:d(await window.crypto.subtle.exportKey("raw",i.key))}),{encryptedFileContent:n,encryptionInfo:{filename:e.name,mimetype:e.type||"application/octet-stream",nonce:d(i.initializationVector),key:d(await window.crypto.subtle.exportKey("raw",i.key)),authenticationTag:d(s)}}}async function ke(e){const t=new ve(e);return await window.crypto.subtle.importKey("spki",t.publicKey.rawData,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"])}async function $e(e,t){return await window.crypto.subtle.encrypt({name:"RSA-OAEP"},await ke(e),t)}async function Te(e,t,i,n){await j.put(le.join(pe(),e,t),i,{headers:{Authorization:"Basic ".concat(btoa("".concat(n,":")))}})}const Ie={name:"CheckIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Le=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon check-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},Fe=[],Oe=E(Ie,Le,Fe,!1,null,null);const Re=Oe.exports,Ve={name:"AlertCircleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Ue=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon alert-circle-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},Be=[],He=E(Ve,Ue,Be,!1,null,null);const Ze=He.exports;var je=Object.defineProperty,qe=Object.defineProperties,Ke=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,I=(e,t,i)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Ge=(e,t)=>{for(var i in t||(t={}))J.call(t,i)&&I(e,i,t[i]);if(x)for(var i of x(t))Y.call(t,i)&&I(e,i,t[i]);return e},We=(e,t)=>qe(e,Ke(t)),Xe=(e,t)=>{var i={};for(var n in e)J.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&x)for(var n of x(e))t.indexOf(n)<0&&Y.call(e,n)&&(i[n]=e[n]);return i};function Q(e,t,i,n,s,a,r,p){var o=typeof e=="function"?e.options:e;t&&(o.render=t,o.staticRenderFns=i,o._compiled=!0);var h;if(s&&(h=s),h)if(o.functional){o._injectStyles=h;var C=o.render;o.render=function(ne,M){return h.call(M),C(ne,M)}}else{var f=o.beforeCreate;o.beforeCreate=f?[].concat(f,h):[h]}return{exports:e,options:o}}const Je={name:"splitpanes",props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},provide(){return{requestUpdate:this.requestUpdate,onPaneAdd:this.onPaneAdd,onPaneRemove:this.onPaneRemove,onPaneClick:this.onPaneClick}},data:()=>({container:null,ready:!1,panes:[],touch:{mouseDown:!1,dragging:!1,activeSplitter:null},splitterTaps:{splitter:null,timeoutId:null}}),computed:{panesCount(){return this.panes.length},indexedPanes(){return this.panes.reduce((e,t)=>(e[t.id]=t)&&e,{})}},methods:{updatePaneComponents(){this.panes.forEach(e=>{e.update&&e.update({[this.horizontal?"height":"width"]:"".concat(this.indexedPanes[e.id].size,"%")})})},bindEvents(){document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),document.addEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.addEventListener("touchmove",this.onMouseMove,{passive:!1}),document.addEventListener("touchend",this.onMouseUp))},unbindEvents(){document.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),document.removeEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.removeEventListener("touchmove",this.onMouseMove,{passive:!1}),document.removeEventListener("touchend",this.onMouseUp))},onMouseDown(e,t){this.bindEvents(),this.touch.mouseDown=!0,this.touch.activeSplitter=t},onMouseMove(e){this.touch.mouseDown&&(e.preventDefault(),this.touch.dragging=!0,this.calculatePanesSize(this.getCurrentMouseDrag(e)),this.$emit("resize",this.panes.map(t=>({min:t.min,max:t.max,size:t.size}))))},onMouseUp(){this.touch.dragging&&this.$emit("resized",this.panes.map(e=>({min:e.min,max:e.max,size:e.size}))),this.touch.mouseDown=!1,setTimeout(()=>{this.touch.dragging=!1,this.unbindEvents()},100)},onSplitterClick(e,t){"ontouchstart"in window&&(e.preventDefault(),this.dblClickSplitter&&(this.splitterTaps.splitter===t?(clearTimeout(this.splitterTaps.timeoutId),this.splitterTaps.timeoutId=null,this.onSplitterDblClick(e,t),this.splitterTaps.splitter=null):(this.splitterTaps.splitter=t,this.splitterTaps.timeoutId=setTimeout(()=>{this.splitterTaps.splitter=null},500)))),this.touch.dragging||this.$emit("splitter-click",this.panes[t])},onSplitterDblClick(e,t){let i=0;this.panes=this.panes.map((n,s)=>(n.size=s===t?n.max:n.min,s!==t&&(i+=n.min),n)),this.panes[t].size-=i,this.$emit("pane-maximize",this.panes[t])},onPaneClick(e,t){this.$emit("pane-click",this.indexedPanes[t])},getCurrentMouseDrag(e){const t=this.container.getBoundingClientRect(),{clientX:i,clientY:n}="ontouchstart"in window&&e.touches?e.touches[0]:e;return{x:i-t.left,y:n-t.top}},getCurrentDragPercentage(e){e=e[this.horizontal?"y":"x"];const t=this.container[this.horizontal?"clientHeight":"clientWidth"];return this.rtl&&!this.horizontal&&(e=t-e),e*100/t},calculatePanesSize(e){const t=this.touch.activeSplitter;let i={prevPanesSize:this.sumPrevPanesSize(t),nextPanesSize:this.sumNextPanesSize(t),prevReachedMinPanes:0,nextReachedMinPanes:0};const n=0+(this.pushOtherPanes?0:i.prevPanesSize),s=100-(this.pushOtherPanes?0:i.nextPanesSize),a=Math.max(Math.min(this.getCurrentDragPercentage(e),s),n);let r=[t,t+1],p=this.panes[r[0]]||null,o=this.panes[r[1]]||null;const h=p.max<100&&a>=p.max+i.prevPanesSize,C=o.max<100&&a<=100-(o.max+this.sumNextPanesSize(t+1));if(h||C){h?(p.size=p.max,o.size=Math.max(100-p.max-i.prevPanesSize-i.nextPanesSize,0)):(p.size=Math.max(100-o.max-i.prevPanesSize-this.sumNextPanesSize(t+1),0),o.size=o.max);return}if(this.pushOtherPanes){const f=this.doPushOtherPanes(i,a);if(!f)return;({sums:i,panesToResize:r}=f),p=this.panes[r[0]]||null,o=this.panes[r[1]]||null}p!==null&&(p.size=Math.min(Math.max(a-i.prevPanesSize-i.prevReachedMinPanes,p.min),p.max)),o!==null&&(o.size=Math.min(Math.max(100-a-i.nextPanesSize-i.nextReachedMinPanes,o.min),o.max))},doPushOtherPanes(e,t){const i=this.touch.activeSplitter,n=[i,i+1];return t<e.prevPanesSize+this.panes[n[0]].min&&(n[0]=this.findPrevExpandedPane(i).index,e.prevReachedMinPanes=0,n[0]<i&&this.panes.forEach((s,a)=>{a>n[0]&&a<=i&&(s.size=s.min,e.prevReachedMinPanes+=s.min)}),e.prevPanesSize=this.sumPrevPanesSize(n[0]),n[0]===void 0)?(e.prevReachedMinPanes=0,this.panes[0].size=this.panes[0].min,this.panes.forEach((s,a)=>{a>0&&a<=i&&(s.size=s.min,e.prevReachedMinPanes+=s.min)}),this.panes[n[1]].size=100-e.prevReachedMinPanes-this.panes[0].min-e.prevPanesSize-e.nextPanesSize,null):t>100-e.nextPanesSize-this.panes[n[1]].min&&(n[1]=this.findNextExpandedPane(i).index,e.nextReachedMinPanes=0,n[1]>i+1&&this.panes.forEach((s,a)=>{a>i&&a<n[1]&&(s.size=s.min,e.nextReachedMinPanes+=s.min)}),e.nextPanesSize=this.sumNextPanesSize(n[1]-1),n[1]===void 0)?(e.nextReachedMinPanes=0,this.panes[this.panesCount-1].size=this.panes[this.panesCount-1].min,this.panes.forEach((s,a)=>{a<this.panesCount-1&&a>=i+1&&(s.size=s.min,e.nextReachedMinPanes+=s.min)}),this.panes[n[0]].size=100-e.prevPanesSize-e.nextReachedMinPanes-this.panes[this.panesCount-1].min-e.nextPanesSize,null):{sums:e,panesToResize:n}},sumPrevPanesSize(e){return this.panes.reduce((t,i,n)=>t+(n<e?i.size:0),0)},sumNextPanesSize(e){return this.panes.reduce((t,i,n)=>t+(n>e+1?i.size:0),0)},findPrevExpandedPane(e){return[...this.panes].reverse().find(t=>t.index<e&&t.size>t.min)||{}},findNextExpandedPane(e){return this.panes.find(t=>t.index>e+1&&t.size>t.min)||{}},checkSplitpanesNodes(){Array.from(this.container.children).forEach(e=>{const t=e.classList.contains("splitpanes__pane"),i=e.classList.contains("splitpanes__splitter");if(!t&&!i){e.parentNode.removeChild(e),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed.");return}})},addSplitter(e,t,i=!1){const n=e-1,s=document.createElement("div");s.classList.add("splitpanes__splitter"),i||(s.onmousedown=a=>this.onMouseDown(a,n),typeof window<"u"&&"ontouchstart"in window&&(s.ontouchstart=a=>this.onMouseDown(a,n)),s.onclick=a=>this.onSplitterClick(a,n+1)),this.dblClickSplitter&&(s.ondblclick=a=>this.onSplitterDblClick(a,n+1)),t.parentNode.insertBefore(s,t)},removeSplitter(e){e.onmousedown=void 0,e.onclick=void 0,e.ondblclick=void 0,e.parentNode.removeChild(e)},redoSplitters(){const e=Array.from(this.container.children);e.forEach(i=>{i.className.includes("splitpanes__splitter")&&this.removeSplitter(i)});let t=0;e.forEach(i=>{i.className.includes("splitpanes__pane")&&(!t&&this.firstSplitter?this.addSplitter(t,i,!0):t&&this.addSplitter(t,i),t++)})},requestUpdate(e){var t=e,{target:i}=t,n=Xe(t,["target"]);const s=this.indexedPanes[i._uid];Object.entries(n).forEach(([a,r])=>s[a]=r)},onPaneAdd(e){let t=-1;Array.from(e.$el.parentNode.children).some(s=>(s.className.includes("splitpanes__pane")&&t++,s===e.$el));const i=parseFloat(e.minSize),n=parseFloat(e.maxSize);this.panes.splice(t,0,{id:e._uid,index:t,min:isNaN(i)?0:i,max:isNaN(n)?100:n,size:e.size===null?null:parseFloat(e.size),givenSize:e.size,update:e.update}),this.panes.forEach((s,a)=>s.index=a),this.ready&&this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({addedPane:this.panes[t]}),this.$emit("pane-add",{index:t,panes:this.panes.map(s=>({min:s.min,max:s.max,size:s.size}))})})},onPaneRemove(e){const t=this.panes.findIndex(n=>n.id===e._uid),i=this.panes.splice(t,1)[0];this.panes.forEach((n,s)=>n.index=s),this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({removedPane:We(Ge({},i),{index:t})}),this.$emit("pane-remove",{removed:i,panes:this.panes.map(n=>({min:n.min,max:n.max,size:n.size}))})})},resetPaneSizes(e={}){!e.addedPane&&!e.removedPane?this.initialPanesSizing():this.panes.some(t=>t.givenSize!==null||t.min||t.max<100)?this.equalizeAfterAddOrRemove(e):this.equalize(),this.ready&&this.$emit("resized",this.panes.map(t=>({min:t.min,max:t.max,size:t.size})))},equalize(){const e=100/this.panesCount;let t=0,i=[],n=[];this.panes.forEach(s=>{s.size=Math.max(Math.min(e,s.max),s.min),t-=s.size,s.size>=s.max&&i.push(s.id),s.size<=s.min&&n.push(s.id)}),t>.1&&this.readjustSizes(t,i,n)},initialPanesSizing(){100/this.panesCount;let e=100,t=[],i=[],n=0;this.panes.forEach(a=>{e-=a.size,a.size!==null&&n++,a.size>=a.max&&t.push(a.id),a.size<=a.min&&i.push(a.id)});let s=100;e>.1&&(this.panes.forEach(a=>{a.size===null&&(a.size=Math.max(Math.min(e/(this.panesCount-n),a.max),a.min)),s-=a.size}),s>.1&&this.readjustSizes(e,t,i))},equalizeAfterAddOrRemove({addedPane:e,removedPane:t}={}){let i=100/this.panesCount,n=0,s=[],a=[];e&&e.givenSize!==null&&(i=(100-e.givenSize)/(this.panesCount-1)),this.panes.forEach(r=>{n-=r.size,r.size>=r.max&&s.push(r.id),r.size<=r.min&&a.push(r.id)}),!(Math.abs(n)<.1)&&(this.panes.forEach(r=>{e&&e.givenSize!==null&&e.id===r.id||(r.size=Math.max(Math.min(i,r.max),r.min)),n-=r.size,r.size>=r.max&&s.push(r.id),r.size<=r.min&&a.push(r.id)}),n>.1&&this.readjustSizes(n,s,a))},readjustSizes(e,t,i){let n;e>0?n=e/(this.panesCount-t.length):n=e/(this.panesCount-i.length),this.panes.forEach((s,a)=>{if(e>0&&!t.includes(s.id)){const r=Math.max(Math.min(s.size+n,s.max),s.min),p=r-s.size;e-=p,s.size=r}else if(!i.includes(s.id)){const r=Math.max(Math.min(s.size+n,s.max),s.min),p=r-s.size;e-=p,s.size=r}s.update({[this.horizontal?"height":"width"]:"".concat(this.indexedPanes[s.id].size,"%")})}),Math.abs(e)>.1&&this.$nextTick(()=>{this.ready&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})}},watch:{panes:{deep:!0,immediate:!1,handler(){this.updatePaneComponents()}},horizontal(){this.updatePaneComponents()},firstSplitter(){this.redoSplitters()},dblClickSplitter(e){[...this.container.querySelectorAll(".splitpanes__splitter")].forEach((t,i)=>{t.ondblclick=e?n=>this.onSplitterDblClick(n,i):void 0})}},beforeDestroy(){this.ready=!1},mounted(){this.container=this.$refs.container,this.checkSplitpanesNodes(),this.redoSplitters(),this.resetPaneSizes(),this.$emit("ready"),this.ready=!0},render(e){return e("div",{ref:"container",class:["splitpanes","splitpanes--".concat(this.horizontal?"horizontal":"vertical"),{"splitpanes--dragging":this.touch.dragging}]},this.$slots.default)}};let Ye,Qe;const L={};var et=Q(Je,Ye,Qe,!1,tt);function tt(e){for(let t in L)this[t]=L[t]}var it=function(){return et.exports}(),nt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"splitpanes__pane",style:e.style,on:{click:function(n){return e.onPaneClick(n,e._uid)}}},[e._t("default")],2)},st=[];const at={name:"pane",inject:["requestUpdate","onPaneAdd","onPaneRemove","onPaneClick"],props:{size:{type:[Number,String],default:null},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},data:()=>({style:{}}),mounted(){this.onPaneAdd(this)},beforeDestroy(){this.onPaneRemove(this)},methods:{update(e){this.style=e}},computed:{sizeNumber(){return this.size||this.size===0?parseFloat(this.size):null},minSizeNumber(){return parseFloat(this.minSize)},maxSizeNumber(){return parseFloat(this.maxSize)}},watch:{sizeNumber(e){this.requestUpdate({target:this,size:e})},minSizeNumber(e){this.requestUpdate({target:this,min:e})},maxSizeNumber(e){this.requestUpdate({target:this,max:e})}}},F={};var rt=Q(at,nt,st,!1,ot);function ot(e){for(let t in F)this[t]=F[t]}var lt=function(){return rt.exports}();const pt={name:"ArrowLeftIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var ct=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon arrow-left-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},ht=[],dt=y(pt,ct,ht,!1,null,null);const ut=dt.exports,mt={name:"ArrowRightIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var ft=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon arrow-right-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},gt=[],yt=y(mt,ft,gt,!1,null,null);const vt=yt.exports;q(he);const ee=ue(),wt={name:"NcAppContentDetailsToggle",components:{ArrowRight:vt,ArrowLeft:ut,NcButton:K},setup(){return{isRtl:ee,isMobile:N()}},computed:{title(){return G("Go back to the list")}},watch:{isMobile:function(){this.toggleAppNavigationButton(this.isMobile)}},mounted(){this.toggleAppNavigationButton(this.isMobile)},beforeDestroy(){this.isMobile&&this.toggleAppNavigationButton(!1)},methods:{toggleAppNavigationButton(e=!0){const t=document.querySelector(".app-navigation .app-navigation-toggle");t&&(t.style.display=e?"none":null,e===!0&&w("toggle-navigation",{open:!1}))}}};var xt=function(){var e=this,t=e._self._c;return t("NcButton",{staticClass:"app-details-toggle",class:{"app-details-toggle--mobile":e.isMobile},attrs:{"aria-label":e.title,title:e.title,variant:"tertiary"},scopedSlots:e._u([{key:"icon",fn:function(){return[e.isRtl?t("ArrowLeft",{attrs:{size:20}}):t("ArrowRight",{attrs:{size:20}})]},proxy:!0}])})},Ct=[],zt=y(wt,xt,Ct,!1,null,"d0b1a8bc");const St=zt.exports,O=ce("nextcloud").persist().build();var V,U;const Dt=(U=(V=we().theming)==null?void 0:V.name)!=null?U:"Nextcloud",R=m("core","active-app",P),_=m("core","apps",{});var B,H,Z;const _t=(Z=Array.isArray(_)?(B=_.find(e=>e.id===R))==null?void 0:B.name:(H=_[R])==null?void 0:H.name)!=null?Z:P,bt={name:"NcAppContent",components:{NcAppContentDetailsToggle:St,Pane:lt,Splitpanes:it},props:{allowSwipeNavigation:{type:Boolean,default:!0},disableSwipe:{type:Boolean,default:!1},listSize:{type:Number,default:20},listMinWidth:{type:Number,default:15},listMaxWidth:{type:Number,default:40},paneConfigKey:{type:String,default:""},showDetails:{type:Boolean,default:!0},layout:{type:String,default:"vertical-split",validator(e){return["no-split","vertical-split","horizontal-split"].includes(e)}},pageHeading:{type:String,default:null},pageTitle:{type:String,default:null}},emits:["update:showDetails","resize-list","resize:list"],setup(){return{isMobile:N(),isRtl:ee}},data(){return{contentHeight:0,swiping:{},listPaneSize:this.restorePaneConfig()}},computed:{paneConfigID(){if(this.paneConfigKey!=="")return"pane-list-size-".concat(this.paneConfigKey);try{return"pane-list-size-".concat(P)}catch(e){return S.info("[NcAppContent]: falling back to global nextcloud pane config"),"pane-list-size-nextcloud"}},detailsPaneSize(){return this.listPaneSize?100-this.listPaneSize:this.paneDefaults.details.size},paneDefaults(){return{list:{size:this.listSize,min:this.listMinWidth,max:this.listMaxWidth},details:{size:100-this.listSize,min:100-this.listMaxWidth,max:100-this.listMinWidth}}},realPageTitle(){const e=new Set;if(this.pageTitle)for(const t of this.pageTitle.split(" - "))e.add(t);else if(this.pageHeading){for(const t of this.pageHeading.split(" - "))e.add(t);e.size>0&&e.add(_t)}else return null;return e.add(Dt),[...e.values()].join(" - ")}},watch:{realPageTitle:{immediate:!0,handler(){this.realPageTitle!==null&&(document.title=this.realPageTitle)}},paneConfigKey:{immediate:!0,handler(){this.restorePaneConfig()}}},mounted(){this.allowSwipeNavigation&&!this.disableSwipe&&(this.swiping=de(this.$el,{onSwipeEnd:this.handleSwipe})),this.restorePaneConfig()},methods:{handleSwipe(e,t){Math.abs(this.swiping.lengthX)>70&&(this.swiping.coordsStart.x<300/2&&t==="right"?w("toggle-navigation",{open:!0}):this.swiping.coordsStart.x<300*1.5&&t==="left"&&w("toggle-navigation",{open:!1}))},handlePaneResize(e){const t=parseInt(e[0].size,10);O.setItem(this.paneConfigID,JSON.stringify(t)),this.listPaneSize=t,this.$emit("resize:list",{size:t}),this.$emit("resize-list",{size:t}),S.debug("AppContent pane config",{size:t})},restorePaneConfig(){const e=parseInt(O.getItem(this.paneConfigID),10);if(!isNaN(e)&&e!==this.listPaneSize)return S.debug("AppContent pane config",e),this.listPaneSize=e,e},hideDetails(){this.$emit("update:showDetails",!1)}}};var Pt=function(){var e=this,t=e._self._c;return t("main",{staticClass:"app-content no-snapper",class:{"app-content--has-list":!!e.$scopedSlots.list},attrs:{id:"app-content-vue"}},[e.pageHeading?t("h1",{staticClass:"hidden-visually"},[e._v(" "+e._s(e.pageHeading)+" ")]):e._e(),e.$scopedSlots.list?[e.isMobile||e.layout==="no-split"?t("div",{staticClass:"app-content-wrapper app-content-wrapper--no-split",class:{"app-content-wrapper--show-details":e.showDetails,"app-content-wrapper--show-list":!e.showDetails,"app-content-wrapper--mobile":e.isMobile}},[e.showDetails?t("NcAppContentDetailsToggle",{nativeOn:{click:function(i){return i.stopPropagation(),i.preventDefault(),e.hideDetails.apply(null,arguments)}}}):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.showDetails,expression:"!showDetails"}]},[e._t("list")],2),e.showDetails?e._t("default"):e._e()],2):e.layout==="vertical-split"||e.layout==="horizontal-split"?t("div",{staticClass:"app-content-wrapper"},[t("Splitpanes",{staticClass:"default-theme",class:{"splitpanes--horizontal":e.layout==="horizontal-split","splitpanes--vertical":e.layout==="vertical-split"},attrs:{horizontal:e.layout==="horizontal-split",rtl:e.isRtl},on:{resized:e.handlePaneResize}},[t("Pane",{staticClass:"splitpanes__pane-list",attrs:{size:e.listPaneSize||e.paneDefaults.list.size,"min-size":e.paneDefaults.list.min,"max-size":e.paneDefaults.list.max}},[e._t("list")],2),t("Pane",{staticClass:"splitpanes__pane-details",attrs:{size:e.detailsPaneSize,"min-size":e.paneDefaults.details.min,"max-size":e.paneDefaults.details.max}},[e._t("default")],2)],1)],1):e._e()]:e._e(),e.$scopedSlots.list?e._e():e._t("default")],2)},Et=[],Nt=y(bt,Pt,Et,!1,null,"cc483103");const Mt=Nt.exports;let At="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",kt=(e=21)=>{let t="",i=e|0;for(;i--;)t+=At[Math.random()*64|0];return t};function v(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?v=function(t){return typeof t}:v=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(e)}var te={selector:"vue-portal-target-".concat(kt())},$t=function(e){return te.selector=e},b=typeof window<"u"&&(typeof document>"u"?"undefined":v(document))!==void 0,Tt=g.extend({abstract:!0,name:"PortalOutlet",props:["nodes","tag"],data:function(e){return{updatedNodes:e.nodes}},render:function(e){var t=this.updatedNodes&&this.updatedNodes();return t?t.length===1&&!t[0].text?t:e(this.tag||"DIV",t):e()},destroyed:function(){var e=this.$el;e&&e.parentNode.removeChild(e)}}),ie=g.extend({name:"VueSimplePortal",props:{disabled:{type:Boolean},prepend:{type:Boolean},selector:{type:String,default:function(){return"#".concat(te.selector)}},tag:{type:String,default:"DIV"}},render:function(e){if(this.disabled){var t=this.$scopedSlots&&this.$scopedSlots.default();return t?t.length<2&&!t[0].text?t:e(this.tag,t):e()}return e()},created:function(){this.getTargetEl()||this.insertTargetEl()},updated:function(){var e=this;this.$nextTick(function(){!e.disabled&&e.slotFn!==e.$scopedSlots.default&&(e.container.updatedNodes=e.$scopedSlots.default),e.slotFn=e.$scopedSlots.default})},beforeDestroy:function(){this.unmount()},watch:{disabled:{immediate:!0,handler:function(e){e?this.unmount():this.$nextTick(this.mount)}}},methods:{getTargetEl:function(){if(b)return document.querySelector(this.selector)},insertTargetEl:function(){if(b){var e=document.querySelector("body"),t=document.createElement(this.tag);t.id=this.selector.substring(1),e.appendChild(t)}},mount:function(){if(b){var e=this.getTargetEl(),t=document.createElement("DIV");this.prepend&&e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),this.container=new Tt({el:t,parent:this,propsData:{tag:this.tag,nodes:this.$scopedSlots.default}})}},unmount:function(){this.container&&(this.container.$destroy(),delete this.container)}}});function It(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.component(t.name||"portal",ie),t.defaultSelector&&$t(t.defaultSelector)}typeof window<"u"&&window.Vue&&window.Vue===g&&g.use(It),q(me);const Lt='<!--\n  - SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<svg width="395" height="314" viewBox="0 0 395 314" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="395" height="314" rx="11" fill="#439DCD"/>\n<rect x="13" y="51" width="366" height="248" rx="8" fill="white"/>\n<rect x="22" y="111" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="127" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="63" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="191" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="143" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="79" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="159" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="95" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="175" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<path d="M288 145C277.56 147.8 265.32 149 254 149C242.68 149 230.44 147.8 220 145L218 153C225.44 155 234 156.32 242 157V209H250V185H258V209H266V157C274 156.32 282.56 155 290 153L288 145ZM254 145C258.4 145 262 141.4 262 137C262 132.6 258.4 129 254 129C249.6 129 246 132.6 246 137C246 141.4 249.6 145 254 145Z" fill="#DEDEDE"/>\n<path d="M43.5358 13C38.6641 13 34.535 16.2415 33.2552 20.6333C32.143 18.3038 29.7327 16.6718 26.9564 16.6718C23.1385 16.6718 20 19.7521 20 23.4993C20 27.2465 23.1385 30.3282 26.9564 30.3282C29.7327 30.3282 32.1429 28.6952 33.2552 26.3653C34.535 30.7575 38.6641 34 43.5358 34C48.3715 34 52.4796 30.8064 53.7921 26.4637C54.9249 28.7407 57.3053 30.3282 60.0421 30.3282C63.8601 30.3282 67 27.2465 67 23.4993C67 19.7521 63.8601 16.6718 60.0421 16.6718C57.3053 16.6718 54.9249 18.2583 53.7921 20.5349C52.4796 16.1926 48.3715 13 43.5358 13ZM43.5358 17.0079C47.2134 17.0079 50.1512 19.8899 50.1512 23.4993C50.1512 27.1087 47.2134 29.9921 43.5358 29.9921C39.8583 29.9921 36.9218 27.1087 36.9218 23.4993C36.9218 19.8899 39.8583 17.0079 43.5358 17.0079ZM26.9564 20.6797C28.5677 20.6797 29.8307 21.9179 29.8307 23.4993C29.8307 25.0807 28.5677 26.3203 26.9564 26.3203C25.3452 26.3203 24.0836 25.0807 24.0836 23.4993C24.0836 21.9179 25.3452 20.6797 26.9564 20.6797ZM60.0421 20.6797C61.6534 20.6797 62.9164 21.9179 62.9164 23.4993C62.9164 25.0807 61.6534 26.3203 60.0421 26.3203C58.4309 26.3203 57.1693 25.0807 57.1693 23.4993C57.1693 21.9179 58.4309 20.6797 60.0421 20.6797Z" fill="white"/>\n<rect x="79" y="20" width="8" height="8" rx="4" fill="white"/>\n<rect x="99" y="20" width="8" height="8" rx="4" fill="white"/>\n<rect x="119" y="20" width="8" height="8" rx="4" fill="white"/>\n<rect x="139" y="20" width="8" height="8" rx="4" fill="white"/>\n<rect x="159" y="20" width="8" height="8" rx="4" fill="white"/>\n<rect x="179" y="20" width="8" height="8" rx="4" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 0C5.37258 0 0 5.37259 0 12V302C0 308.627 5.37259 314 12 314H383C389.627 314 395 308.627 395 302V12C395 5.37258 389.627 0 383 0H12ZM140 44C132.268 44 126 50.268 126 58V292C126 299.732 132.268 306 140 306H372C379.732 306 386 299.732 386 292V58C386 50.268 379.732 44 372 44H140Z" fill="black" fill-opacity="0.35"/>\n</svg>\n',Ft='<!--\n  - SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<svg width="395" height="314" viewBox="0 0 395 314" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="395" height="314" rx="11" fill="#439DCD"/>\n<rect x="13" y="51" width="366" height="248" rx="8" fill="white"/>\n<rect x="22" y="111" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="127" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="63" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="191" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="143" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="79" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="159" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="95" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="175" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<path d="M288 145C277.56 147.8 265.32 149 254 149C242.68 149 230.44 147.8 220 145L218 153C225.44 155 234 156.32 242 157V209H250V185H258V209H266V157C274 156.32 282.56 155 290 153L288 145ZM254 145C258.4 145 262 141.4 262 137C262 132.6 258.4 129 254 129C249.6 129 246 132.6 246 137C246 141.4 249.6 145 254 145Z" fill="#DEDEDE"/>\n<path d="M43.5358 13C38.6641 13 34.535 16.2415 33.2552 20.6333C32.143 18.3038 29.7327 16.6718 26.9564 16.6718C23.1385 16.6718 20 19.7521 20 23.4993C20 27.2465 23.1385 30.3282 26.9564 30.3282C29.7327 30.3282 32.1429 28.6952 33.2552 26.3653C34.535 30.7575 38.6641 34 43.5358 34C48.3715 34 52.4796 30.8064 53.7921 26.4637C54.9249 28.7407 57.3053 30.3282 60.0421 30.3282C63.8601 30.3282 67 27.2465 67 23.4993C67 19.7521 63.8601 16.6718 60.0421 16.6718C57.3053 16.6718 54.9249 18.2583 53.7921 20.5349C52.4796 16.1926 48.3715 13 43.5358 13ZM43.5358 17.0079C47.2134 17.0079 50.1512 19.8899 50.1512 23.4993C50.1512 27.1087 47.2134 29.9921 43.5358 29.9921C39.8583 29.9921 36.9218 27.1087 36.9218 23.4993C36.9218 19.8899 39.8583 17.0079 43.5358 17.0079ZM26.9564 20.6797C28.5677 20.6797 29.8307 21.9179 29.8307 23.4993C29.8307 25.0807 28.5677 26.3203 26.9564 26.3203C25.3452 26.3203 24.0836 25.0807 24.0836 23.4993C24.0836 21.9179 25.3452 20.6797 26.9564 20.6797ZM60.0421 20.6797C61.6534 20.6797 62.9164 21.9179 62.9164 23.4993C62.9164 25.0807 61.6534 26.3203 60.0421 26.3203C58.4309 26.3203 57.1693 25.0807 57.1693 23.4993C57.1693 21.9179 58.4309 20.6797 60.0421 20.6797Z" fill="white"/>\n<rect x="79" y="20" width="8" height="8" rx="4" fill="white"/>\n<rect x="99" y="20" width="8" height="8" rx="4" fill="white"/>\n<rect x="119" y="20" width="8" height="8" rx="4" fill="white"/>\n<rect x="139" y="20" width="8" height="8" rx="4" fill="white"/>\n<rect x="159" y="20" width="8" height="8" rx="4" fill="white"/>\n<rect x="179" y="20" width="8" height="8" rx="4" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 0C5.37258 0 0 5.37259 0 12V302C0 308.627 5.37259 314 12 314H383C389.627 314 395 308.627 395 302V12C395 5.37258 389.627 0 383 0H12ZM112 44C119.732 44 126 50.268 126 58V292C126 299.732 119.732 306 112 306H20C12.268 306 6 299.732 6 292V58C6 50.268 12.268 44 20 44H112Z" fill="black" fill-opacity="0.35"/>\n</svg>\n',Ot={name:"NcContent",components:{NcButton:K,NcIconSvgWrapper:fe,Teleport:ie},provide(){return{"NcContent:setHasAppNavigation":this.setAppNavigation,"NcContent:selector":"#content-vue"}},props:{appName:{type:String,required:!0}},setup(){return{isMobile:N()}},data(){return{hasAppNavigation:!1,currentFocus:""}},computed:{currentImage(){return this.currentFocus==="navigation"?Ft:Lt}},beforeMount(){const e=document.getElementById("skip-actions");e&&(e.innerHTML="",e.classList.add("vue-skip-actions"))},methods:{t:G,openAppNavigation(){w("toggle-navigation",{open:!0}),this.$nextTick(()=>{window.location.hash="app-navigation-vue",document.getElementById("app-navigation-vue").focus()})},setAppNavigation(e){this.hasAppNavigation=e,this.currentFocus===""&&(this.currentFocus="navigation")}}};var Rt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content",class:"app-".concat(e.appName.toLowerCase()),attrs:{id:"content-vue"}},[t("Teleport",{attrs:{selector:"#skip-actions"}},[t("div",{staticClass:"vue-skip-actions__container"},[t("div",{staticClass:"vue-skip-actions__headline"},[e._v(" "+e._s(e.t("Keyboard navigation help"))+" ")]),t("div",{staticClass:"vue-skip-actions__buttons"},[t("NcButton",{directives:[{name:"show",rawName:"v-show",value:e.hasAppNavigation,expression:"hasAppNavigation"}],attrs:{href:"#app-navigation-vue",variant:"tertiary"},on:{click:function(i){return i.preventDefault(),e.openAppNavigation.apply(null,arguments)},focusin:function(i){e.currentFocus="navigation"},mouseover:function(i){e.currentFocus="navigation"}}},[e._v(" "+e._s(e.t("Skip to app navigation"))+" ")]),t("NcButton",{attrs:{href:"#app-content-vue",variant:"tertiary"},on:{focusin:function(i){e.currentFocus="content"},mouseover:function(i){e.currentFocus="content"}}},[e._v(" "+e._s(e.t("Skip to main content"))+" ")])],1),t("NcIconSvgWrapper",{directives:[{name:"show",rawName:"v-show",value:!e.isMobile,expression:"!isMobile"}],staticClass:"vue-skip-actions__image",attrs:{svg:e.currentImage,size:"auto"}})],1),e._v(" Â ")]),e._t("default")],2)},Vt=[],Ut=y(Ot,Rt,Vt,!1,null,"1f87d811");const Bt=Ut.exports,u={NONE:"none",ENCRYPTING:"encrypting",UPLOADING:"uploading",UPLOADED:"uploaded",UPLOADING_METADATA:"uploading_metadata",DONE:"done"},Ht={name:"FileDrop",components:{NcContent:Bt,NcAppContent:Mt,NcLoadingIcon:ge,IconCheck:Re,IconAlertCircle:Ze},data(){return{shareToken:m("end_to_end_encryption","token"),folderId:m("end_to_end_encryption","fileId"),publicKeys:m("end_to_end_encryption","publicKeys"),fileName:m("end_to_end_encryption","fileName"),encryptionVersion:Number.parseInt(m("end_to_end_encryption","encryptionVersion")),uploadedFiles:[],loading:!1,UploadStep:u,highlightDropZone:!1}},methods:{handleDragOver(e){var t;(t=e.dataTransfer)!=null&&t.types.includes("Files")&&(e.dataTransfer.dropEffect="copy",this.highlightDropZone=!0)},handleDrop(e){var t;(t=e.dataTransfer)!=null&&t.types.includes("Files")&&(this.filesChange(e.dataTransfer.files),this.highlightDropZone=!1)},async filesChange(e){if(!(e!=null&&e.length)||this.loading)return;this.loading=!0;let t=[];try{t=await Promise.all(Array.from(e).map(i=>this.uploadFile(i))),c.debug("[FileDrop] Files uploaded",{progresses:t})}catch(i){c.error("[FileDrop] Error while uploading files",{exception:i}),$(this.t("end_to_end_encryption","Error while uploading files")),t.forEach(n=>{n.error=!0})}try{t.filter(({error:n})=>!n).forEach(n=>{n.step=u.UPLOADING_METADATA});const i=t.filter(({error:n})=>!n).reduce((n,{fileDrop:s})=>z(z({},n),s),{});c.debug("[FileDrop] FileDrop entries computed",{fileDrops:i}),await be(this.encryptionVersion,this.folderId,i,this.shareToken)}catch(i){c.error("[FileDrop] Error while uploading metadata",{exception:i}),$(this.t("end_to_end_encryption","Error while uploading metadata")),t.forEach(n=>{n.error=!0})}t.filter(({error:i})=>!i).forEach(i=>{i.step=u.DONE}),this.loading=!1},async uploadFile(e){const t={file:e,step:u.NONE,error:!1,fileDrop:{}};this.uploadedFiles.push(t);try{t.step=u.ENCRYPTING;const{encryptedFileContent:i,encryptionInfo:n}=await Ae(e),s=De().replaceAll("-","");t.fileDrop[s]=await _e(n,this.publicKeys),c.debug("[FileDrop] Filedrop entry computed: ".concat(e.name),{fileDropEntry:t.fileDrop[s]}),t.step=u.UPLOADING,await Te("/public.php/dav/files/".concat(this.shareToken),s,i,this.shareToken),t.step=u.UPLOADED,c.debug("[FileDrop] File uploaded: ".concat(e.name),{encryptedFileContent:i,encryptionInfo:n,encryptedFileName:s,shareToken:this.shareToken})}catch(i){t.error=!0,c.error("[FileDrop] Fail to upload the file (".concat(t.step,")"),{exception:i})}return t},t:ye}};var Zt=function(){var e=this,t=e._self._c;return t("NcContent",{attrs:{"app-name":"end_to_end_encryption"}},[t("NcAppContent",{nativeOn:{drop:function(i){return i.preventDefault(),e.handleDrop.apply(null,arguments)},dragover:function(i){return i.preventDefault(),e.handleDragOver.apply(null,arguments)},dragleave:function(i){e.highlightDropZone=!1}}},[t("div",{staticClass:"uploader-form",class:{highlight:e.highlightDropZone}},[t("div",{staticClass:"uploader-form__label"},[t("div",{staticClass:"uploader-form__icon icon-folder"}),e._v(" "+e._s(e.t("end_to_end_encryption","Upload encrypted files to {fileName}",{fileName:e.fileName}))+" "),t("label",{staticClass:"uploader-form__input button primary",class:{loading:e.loading}},[e._v(" "+e._s(e.t("end_to_end_encryption","Select or drop files"))+" "),t("input",{attrs:{type:"file",multiple:"",disabled:e.loading},on:{change:function(i){var n;return e.filesChange((n=i.target)==null?void 0:n.files)}}})])]),t("ul",{staticClass:"uploader-form__file-list"},e._l(e.uploadedFiles,function({file:i,step:n,error:s},a){return t("li",{key:a,staticClass:"uploader-form__file-list__item"},[s?t("IconAlertCircle",{attrs:{size:20}}):n===e.UploadStep.DONE?t("IconCheck",{attrs:{size:20}}):t("NcLoadingIcon"),t("b",[e._v(e._s(i.name))])],1)}),0)])])],1)},jt=[],qt=E(Ht,Zt,jt,!1,null,"8a5d9b72");const Kt=qt.exports,Gt=g.extend(Kt);new Gt({}).$mount("#content");
//# sourceMappingURL=end_to_end_encryption-filedrop.mjs.map
