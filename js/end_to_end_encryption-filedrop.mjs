(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('.material-design-icon[data-v-089eb524]{display:flex;align-self:center;justify-self:center;align-items:center;justify-content:center}.app-details-toggle[data-v-089eb524]{position:-webkit-sticky;position:sticky;width:var(--default-clickable-area);height:var(--default-clickable-area);padding:calc((var(--default-clickable-area) - 16px) / 2);cursor:pointer;opacity:.6;transform:rotate(180deg);background-color:var(--color-main-background);z-index:2000;top:var(--app-navigation-padding);inset-inline-start:calc(var(--default-clickable-area) + var(--app-navigation-padding) * 2)}.app-details-toggle--mobile[data-v-089eb524]{inset-inline-start:var(--app-navigation-padding)}.app-details-toggle[data-v-089eb524]:active,.app-details-toggle[data-v-089eb524]:hover,.app-details-toggle[data-v-089eb524]:focus{opacity:1}.material-design-icon[data-v-7b4bc577]{display:flex;align-self:center;justify-self:center;align-items:center;justify-content:center}.app-content[data-v-7b4bc577]{position:initial;z-index:1000;flex-basis:100vw;height:100%;margin:0!important;background-color:var(--color-main-background);min-width:0}.app-content[data-v-7b4bc577]:not(.app-content--has-list){overflow:auto}.app-content-wrapper[data-v-7b4bc577]{position:relative;width:100%;height:100%}.app-content-wrapper--no-split.app-content-wrapper--show-list[data-v-7b4bc577] .app-content-list{display:flex}.app-content-wrapper--no-split.app-content-wrapper--show-list[data-v-7b4bc577] .app-content-details,.app-content-wrapper--no-split.app-content-wrapper--show-details[data-v-7b4bc577] .app-content-list{display:none}.app-content-wrapper--no-split.app-content-wrapper--show-details[data-v-7b4bc577] .app-content-details{display:block}[data-v-7b4bc577] .splitpanes.default-theme .app-content-list{max-width:none;scrollbar-width:auto}[data-v-7b4bc577] .splitpanes.default-theme .splitpanes__pane{background-color:transparent;transition:none}[data-v-7b4bc577] .splitpanes.default-theme .splitpanes__pane-list{min-width:300px;position:-webkit-sticky;position:sticky}@media only screen and (width < 1024px){[data-v-7b4bc577] .splitpanes.default-theme .splitpanes__pane-list{display:none}}[data-v-7b4bc577] .splitpanes.default-theme .splitpanes__pane-details{overflow-y:auto}@media only screen and (width < 1024px){[data-v-7b4bc577] .splitpanes.default-theme .splitpanes__pane-details{min-width:100%}}[data-v-7b4bc577] .splitpanes.default-theme .splitpanes__splitter{background-color:var(--color-main-background)}[data-v-7b4bc577] .splitpanes.default-theme .splitpanes__splitter:before,[data-v-7b4bc577] .splitpanes.default-theme .splitpanes__splitter:after{background-color:var(--color-border)}[data-v-7b4bc577] .splitpanes.default-theme.splitpanes--vertical .splitpanes__splitter{border-left:1px solid var(--color-border)}[data-v-7b4bc577] .splitpanes.default-theme.splitpanes--horizontal .splitpanes__splitter{border-top:1px solid var(--color-border)}.app-content-wrapper--show-list[data-v-7b4bc577] .app-content-list{max-width:none}.splitpanes{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;height:100%}.splitpanes--vertical{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.splitpanes--horizontal{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.splitpanes--dragging *{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.splitpanes__pane{width:100%;height:100%;overflow:hidden}.splitpanes--vertical .splitpanes__pane{-webkit-transition:width .2s ease-out;-o-transition:width .2s ease-out;transition:width .2s ease-out}.splitpanes--horizontal .splitpanes__pane{-webkit-transition:height .2s ease-out;-o-transition:height .2s ease-out;transition:height .2s ease-out}.splitpanes--dragging .splitpanes__pane{-webkit-transition:none;-o-transition:none;transition:none}.splitpanes__splitter{-ms-touch-action:none;touch-action:none}.splitpanes--vertical>.splitpanes__splitter{min-width:1px;cursor:col-resize}.splitpanes--horizontal>.splitpanes__splitter{min-height:1px;cursor:row-resize}.splitpanes.default-theme .splitpanes__pane{background-color:#f2f2f2}.splitpanes.default-theme .splitpanes__splitter{background-color:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;-ms-flex-negative:0;flex-shrink:0}.splitpanes.default-theme .splitpanes__splitter:before,.splitpanes.default-theme .splitpanes__splitter:after{content:"";position:absolute;top:50%;left:50%;background-color:#00000026;-webkit-transition:background-color .3s;-o-transition:background-color .3s;transition:background-color .3s}.splitpanes.default-theme .splitpanes__splitter:hover:before,.splitpanes.default-theme .splitpanes__splitter:hover:after{background-color:#00000040}.splitpanes.default-theme .splitpanes__splitter:first-child{cursor:auto}.default-theme.splitpanes .splitpanes .splitpanes__splitter{z-index:1}.default-theme.splitpanes--vertical>.splitpanes__splitter,.default-theme .splitpanes--vertical>.splitpanes__splitter{width:7px;border-left:1px solid #eee;margin-left:-1px}.default-theme.splitpanes--vertical>.splitpanes__splitter:before,.default-theme.splitpanes--vertical>.splitpanes__splitter:after,.default-theme .splitpanes--vertical>.splitpanes__splitter:before,.default-theme .splitpanes--vertical>.splitpanes__splitter:after{-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:1px;height:30px}.default-theme.splitpanes--vertical>.splitpanes__splitter:before,.default-theme .splitpanes--vertical>.splitpanes__splitter:before{margin-left:-2px}.default-theme.splitpanes--vertical>.splitpanes__splitter:after,.default-theme .splitpanes--vertical>.splitpanes__splitter:after{margin-left:1px}.default-theme.splitpanes--horizontal>.splitpanes__splitter,.default-theme .splitpanes--horizontal>.splitpanes__splitter{height:7px;border-top:1px solid #eee;margin-top:-1px}.default-theme.splitpanes--horizontal>.splitpanes__splitter:before,.default-theme.splitpanes--horizontal>.splitpanes__splitter:after,.default-theme .splitpanes--horizontal>.splitpanes__splitter:before,.default-theme .splitpanes--horizontal>.splitpanes__splitter:after{-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translate(-50%);width:30px;height:1px}.default-theme.splitpanes--horizontal>.splitpanes__splitter:before,.default-theme .splitpanes--horizontal>.splitpanes__splitter:before{margin-top:-2px}.default-theme.splitpanes--horizontal>.splitpanes__splitter:after,.default-theme .splitpanes--horizontal>.splitpanes__splitter:after{margin-top:1px}.material-design-icon{display:flex;align-self:center;justify-self:center;align-items:center;justify-content:center}#skip-actions.vue-skip-actions:focus-within{top:0!important;left:0!important;width:100vw;height:100vh;padding:var(--body-container-margin)!important;-webkit-backdrop-filter:brightness(50%);backdrop-filter:brightness(50%)}.material-design-icon[data-v-d8f0539f]{display:flex;align-self:center;justify-self:center;align-items:center;justify-content:center}.vue-skip-actions__container[data-v-d8f0539f]{background-color:var(--color-main-background);border-radius:var(--border-radius-large);padding:22px}.vue-skip-actions__headline[data-v-d8f0539f]{font-weight:700;font-size:20px;line-height:30px;margin-bottom:12px}.vue-skip-actions__buttons[data-v-d8f0539f]{display:flex;flex-wrap:wrap;gap:12px}.vue-skip-actions__buttons>*[data-v-d8f0539f]{flex:1 0 fit-content}.vue-skip-actions__image[data-v-d8f0539f]{margin-top:12px}.content[data-v-d8f0539f]{box-sizing:border-box;margin:var(--body-container-margin);margin-top:var(--header-height);display:flex;width:calc(100% - var(--body-container-margin) * 2);border-radius:var(--body-container-radius);height:var(--body-height);overflow:hidden;padding:0}.content[data-v-d8f0539f]:not(.with-sidebar--full){position:fixed}.content[data-v-d8f0539f] *{box-sizing:border-box}#app-content-vue[data-v-8a5d9b72]{display:flex;align-items:center;justify-content:center}#app-content-vue .uploader-form[data-v-8a5d9b72]{width:700px;height:700px;display:flex;align-items:center;justify-content:center;flex-direction:column}#app-content-vue .uploader-form.highlight[data-v-8a5d9b72]{border:4px solid var(--color-primary);border-radius:var(--border-radius-large);background:var(--color-primary-element-light-hover)}#app-content-vue .uploader-form__label[data-v-8a5d9b72]{display:flex;align-items:center;justify-content:center;flex-direction:column;font-weight:700;font-size:20px;text-align:center;position:-webkit-sticky;position:sticky}#app-content-vue .uploader-form__icon[data-v-8a5d9b72]{margin-bottom:12px;height:48px;width:48px;background-size:48px}#app-content-vue .uploader-form__input[data-v-8a5d9b72]{margin-top:20px}#app-content-vue .uploader-form__input input[data-v-8a5d9b72]{display:none}#app-content-vue .uploader-form__file-list[data-v-8a5d9b72]{margin-top:12px;height:100%;overflow:scroll;padding:0 32px}#app-content-vue .uploader-form__file-list__item[data-v-8a5d9b72]{display:flex;align-items:center}#app-content-vue .uploader-form__file-list__item .material-design-icon[data-v-8a5d9b72]{margin-right:8px}#app-content-vue .uploader-form__file-list__item .loading-icon[data-v-8a5d9b72] svg{animation:rotate var(--animation-duration, .8s) linear infinite}')),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
var Np=Object.defineProperty,Tp=Object.defineProperties;var Pp=Object.getOwnPropertyDescriptors;var qr=Object.getOwnPropertySymbols;var ba=Object.prototype.hasOwnProperty,Sa=Object.prototype.propertyIsEnumerable;var wa=(e,t,r)=>t in e?Np(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,L=(e,t)=>{for(var r in t||(t={}))ba.call(t,r)&&wa(e,r,t[r]);if(qr)for(var r of qr(t))Sa.call(t,r)&&wa(e,r,t[r]);return e},X=(e,t)=>Tp(e,Pp(t));var Y=(e,t)=>{var r={};for(var i in e)ba.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&qr)for(var i of qr(e))t.indexOf(i)<0&&Sa.call(e,i)&&(r[i]=e[i]);return r};import{E as fs,a5 as Aa,g as Wr,v as jp,e as Zl,a6 as Up,M as Mp,u as Lo,n as Bn,r as Yl,W as Vp,a7 as Rp,a8 as zp,a9 as Ai,aa as Lp,N as Xl,ab as $p,t as Ql,V as Or,ac as Hp,$ as _p,B as Fp,l as lr,y as xa,m as Kp}from"./_plugin-vue2_normalizer-BbbzK5di.chunk.mjs";import{l as Dt}from"./logger-D-Tl7U6O.chunk.mjs";import{A as qp}from"./ArrowRight-CY2b9hgN-Ce1FaD_9.chunk.mjs";import{u as $o}from"./useIsMobile-BMdlC-kJ.chunk.mjs";const Dp="end_to_end_encryption";for(var st=[],Vn=0;Vn<256;++Vn)st.push((Vn+256).toString(16).slice(1));function Wp(e,t=0){return(st[e[t+0]]+st[e[t+1]]+st[e[t+2]]+st[e[t+3]]+"-"+st[e[t+4]]+st[e[t+5]]+"-"+st[e[t+6]]+st[e[t+7]]+"-"+st[e[t+8]]+st[e[t+9]]+"-"+st[e[t+10]]+st[e[t+11]]+st[e[t+12]]+st[e[t+13]]+st[e[t+14]]+st[e[t+15]]).toLowerCase()}var Gr,Gp=new Uint8Array(16);function Jp(){if(!Gr&&(Gr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Gr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Gr(Gp)}var Zp=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const ka={randomUUID:Zp};function Yp(e,t,r){if(ka.randomUUID&&!t&&!e)return ka.randomUUID();e=e||{};var i=e.random||(e.rng||Jp)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,Wp(i)}var Ba;(function(e){(function(t){var r=typeof globalThis=="object"?globalThis:typeof fs=="object"?fs:typeof self=="object"?self:typeof this=="object"?this:l(),i=n(e);typeof r.Reflect<"u"&&(i=n(r.Reflect,i)),t(i,r),typeof r.Reflect>"u"&&(r.Reflect=e);function n(u,f){return function(A,w){Object.defineProperty(u,A,{configurable:!0,writable:!0,value:w}),f&&f(A,w)}}function s(){try{return Function("return this;")()}catch(u){}}function a(){try{return(0,eval)("(function() { return this; })()")}catch(u){}}function l(){return s()||a()}})(function(t,r){var i=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",s=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",a=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",l=typeof Object.create=="function",u={__proto__:[]}instanceof Array,f=!l&&!u,A={create:l?function(){return Mn(Object.create(null))}:u?function(){return Mn({__proto__:null})}:function(){return Mn({})},has:f?function(d,g){return i.call(d,g)}:function(d,g){return g in d},get:f?function(d,g){return i.call(d,g)?d[g]:void 0}:function(d,g){return d[g]}},w=Object.getPrototypeOf(Function),F=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Bp(),N=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Cp(),p=typeof WeakMap=="function"?WeakMap:Ep(),y=n?Symbol.for("@reflect-metadata:registry"):void 0,S=Ap(),m=xp(S);function C(d,g,v,k){if(R(v)){if(!pa(d))throw new TypeError;if(!ha(g))throw new TypeError;return dp(d,g)}else{if(!pa(d))throw new TypeError;if(!tt(g))throw new TypeError;if(!tt(k)&&!R(k)&&!Pe(k))throw new TypeError;return Pe(k)&&(k=void 0),v=Mt(v),yp(d,g,v,k)}}t("decorate",C);function B(d,g){function v(k,V){if(!tt(k))throw new TypeError;if(!R(V)&&!bp(V))throw new TypeError;oa(d,g,k,V)}return v}t("metadata",B);function W(d,g,v,k){if(!tt(v))throw new TypeError;return R(k)||(k=Mt(k)),oa(d,g,v,k)}t("defineMetadata",W);function _r(d,g,v){if(!tt(g))throw new TypeError;return R(v)||(v=Mt(v)),ia(d,g,v)}t("hasMetadata",_r);function Fr(d,g,v){if(!tt(g))throw new TypeError;return R(v)||(v=Mt(v)),Dn(d,g,v)}t("hasOwnMetadata",Fr);function ar(d,g,v){if(!tt(g))throw new TypeError;return R(v)||(v=Mt(v)),na(d,g,v)}t("getMetadata",ar);function up(d,g,v){if(!tt(g))throw new TypeError;return R(v)||(v=Mt(v)),sa(d,g,v)}t("getOwnMetadata",up);function pp(d,g){if(!tt(d))throw new TypeError;return R(g)||(g=Mt(g)),aa(d,g)}t("getMetadataKeys",pp);function hp(d,g){if(!tt(d))throw new TypeError;return R(g)||(g=Mt(g)),ca(d,g)}t("getOwnMetadataKeys",hp);function fp(d,g,v){if(!tt(g))throw new TypeError;if(R(v)||(v=Mt(v)),!tt(g))throw new TypeError;R(v)||(v=Mt(v));var k=cr(g,v,!1);return R(k)?!1:k.OrdinaryDeleteMetadata(d,g,v)}t("deleteMetadata",fp);function dp(d,g){for(var v=d.length-1;v>=0;--v){var k=d[v],V=k(g);if(!R(V)&&!Pe(V)){if(!ha(V))throw new TypeError;g=V}}return g}function yp(d,g,v,k){for(var V=d.length-1;V>=0;--V){var nt=d[V],et=nt(g,v,k);if(!R(et)&&!Pe(et)){if(!tt(et))throw new TypeError;k=et}}return k}function ia(d,g,v){var k=Dn(d,g,v);if(k)return!0;var V=Un(g);return Pe(V)?!1:ia(d,V,v)}function Dn(d,g,v){var k=cr(g,v,!1);return R(k)?!1:ua(k.OrdinaryHasOwnMetadata(d,g,v))}function na(d,g,v){var k=Dn(d,g,v);if(k)return sa(d,g,v);var V=Un(g);if(!Pe(V))return na(d,V,v)}function sa(d,g,v){var k=cr(g,v,!1);if(!R(k))return k.OrdinaryGetOwnMetadata(d,g,v)}function oa(d,g,v,k){var V=cr(v,k,!0);V.OrdinaryDefineOwnMetadata(d,g,v,k)}function aa(d,g){var v=ca(d,g),k=Un(d);if(k===null)return v;var V=aa(k,g);if(V.length<=0)return v;if(v.length<=0)return V;for(var nt=new N,et=[],$=0,O=v;$<O.length;$++){var D=O[$],j=nt.has(D);j||(nt.add(D),et.push(D))}for(var M=0,H=V;M<H.length;M++){var D=H[M],j=nt.has(D);j||(nt.add(D),et.push(D))}return et}function ca(d,g){var v=cr(d,g,!1);return v?v.OrdinaryOwnMetadataKeys(d,g):[]}function la(d){if(d===null)return 1;switch(typeof d){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return d===null?1:6;default:return 6}}function R(d){return d===void 0}function Pe(d){return d===null}function gp(d){return typeof d=="symbol"}function tt(d){return typeof d=="object"?d!==null:typeof d=="function"}function vp(d,g){switch(la(d)){case 0:return d;case 1:return d;case 2:return d;case 3:return d;case 4:return d;case 5:return d}var v="string",k=fa(d,s);if(k!==void 0){var V=k.call(d,v);if(tt(V))throw new TypeError;return V}return mp(d)}function mp(d,g){var v,k;{var V=d.toString;if(Kr(V)){var k=V.call(d);if(!tt(k))return k}var v=d.valueOf;if(Kr(v)){var k=v.call(d);if(!tt(k))return k}}throw new TypeError}function ua(d){return!!d}function wp(d){return""+d}function Mt(d){var g=vp(d);return gp(g)?g:wp(g)}function pa(d){return Array.isArray?Array.isArray(d):d instanceof Object?d instanceof Array:Object.prototype.toString.call(d)==="[object Array]"}function Kr(d){return typeof d=="function"}function ha(d){return typeof d=="function"}function bp(d){switch(la(d)){case 3:return!0;case 4:return!0;default:return!1}}function jn(d,g){return d===g||d!==d&&g!==g}function fa(d,g){var v=d[g];if(v!=null){if(!Kr(v))throw new TypeError;return v}}function da(d){var g=fa(d,a);if(!Kr(g))throw new TypeError;var v=g.call(d);if(!tt(v))throw new TypeError;return v}function ya(d){return d.value}function ga(d){var g=d.next();return g.done?!1:g}function va(d){var g=d.return;g&&g.call(d)}function Un(d){var g=Object.getPrototypeOf(d);if(typeof d!="function"||d===w||g!==w)return g;var v=d.prototype,k=v&&Object.getPrototypeOf(v);if(k==null||k===Object.prototype)return g;var V=k.constructor;return typeof V!="function"||V===d?g:V}function Sp(){var d;!R(y)&&typeof r.Reflect<"u"&&!(y in r.Reflect)&&typeof r.Reflect.defineMetadata=="function"&&(d=kp(r.Reflect));var g,v,k,V=new p,nt={registerProvider:et,getProvider:O,setProvider:j};return nt;function et(M){if(!Object.isExtensible(nt))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case d===M:break;case R(g):g=M;break;case g===M:break;case R(v):v=M;break;case v===M:break;default:k===void 0&&(k=new N),k.add(M);break}}function $(M,H){if(!R(g)){if(g.isProviderFor(M,H))return g;if(!R(v)){if(v.isProviderFor(M,H))return g;if(!R(k))for(var G=da(k);;){var Q=ga(G);if(!Q)return;var Ot=ya(Q);if(Ot.isProviderFor(M,H))return va(G),Ot}}}if(!R(d)&&d.isProviderFor(M,H))return d}function O(M,H){var G=V.get(M),Q;return R(G)||(Q=G.get(H)),R(Q)&&(Q=$(M,H),R(Q)||(R(G)&&(G=new F,V.set(M,G)),G.set(H,Q))),Q}function D(M){if(R(M))throw new TypeError;return g===M||v===M||!R(k)&&k.has(M)}function j(M,H,G){if(!D(G))throw new Error("Metadata provider not registered.");var Q=O(M,H);if(Q!==G){if(!R(Q))return!1;var Ot=V.get(M);R(Ot)&&(Ot=new F,V.set(M,Ot)),Ot.set(H,G)}return!0}}function Ap(){var d;return!R(y)&&tt(r.Reflect)&&Object.isExtensible(r.Reflect)&&(d=r.Reflect[y]),R(d)&&(d=Sp()),!R(y)&&tt(r.Reflect)&&Object.isExtensible(r.Reflect)&&Object.defineProperty(r.Reflect,y,{enumerable:!1,configurable:!1,writable:!1,value:d}),d}function xp(d){var g=new p,v={isProviderFor:function(D,j){var M=g.get(D);return R(M)?!1:M.has(j)},OrdinaryDefineOwnMetadata:et,OrdinaryHasOwnMetadata:V,OrdinaryGetOwnMetadata:nt,OrdinaryOwnMetadataKeys:$,OrdinaryDeleteMetadata:O};return S.registerProvider(v),v;function k(D,j,M){var H=g.get(D),G=!1;if(R(H)){if(!M)return;H=new F,g.set(D,H),G=!0}var Q=H.get(j);if(R(Q)){if(!M)return;if(Q=new F,H.set(j,Q),!d.setProvider(D,j,v))throw H.delete(j),G&&g.delete(D),new Error("Wrong provider for target.")}return Q}function V(D,j,M){var H=k(j,M,!1);return R(H)?!1:ua(H.has(D))}function nt(D,j,M){var H=k(j,M,!1);if(!R(H))return H.get(D)}function et(D,j,M,H){var G=k(M,H,!0);G.set(D,j)}function $(D,j){var M=[],H=k(D,j,!1);if(R(H))return M;for(var G=H.keys(),Q=da(G),Ot=0;;){var ma=ga(Q);if(!ma)return M.length=Ot,M;var Ip=ya(ma);try{M[Ot]=Ip}catch(Op){try{va(Q)}finally{throw Op}}Ot++}}function O(D,j,M){var H=k(j,M,!1);if(R(H)||!H.delete(D))return!1;if(H.size===0){var G=g.get(j);R(G)||(G.delete(M),G.size===0&&g.delete(G))}return!0}}function kp(d){var g=d.defineMetadata,v=d.hasOwnMetadata,k=d.getOwnMetadata,V=d.getOwnMetadataKeys,nt=d.deleteMetadata,et=new p,$={isProviderFor:function(O,D){var j=et.get(O);return!R(j)&&j.has(D)?!0:V(O,D).length?(R(j)&&(j=new N,et.set(O,j)),j.add(D),!0):!1},OrdinaryDefineOwnMetadata:g,OrdinaryHasOwnMetadata:v,OrdinaryGetOwnMetadata:k,OrdinaryOwnMetadataKeys:V,OrdinaryDeleteMetadata:nt};return $}function cr(d,g,v){var k=S.getProvider(d,g);if(!R(k))return k;if(v){if(S.setProvider(d,g,m))return m;throw new Error("Illegal state.")}}function Bp(){var d={},g=[],v=function(){function $(O,D,j){this._index=0,this._keys=O,this._values=D,this._selector=j}return $.prototype["@@iterator"]=function(){return this},$.prototype[a]=function(){return this},$.prototype.next=function(){var O=this._index;if(O>=0&&O<this._keys.length){var D=this._selector(this._keys[O],this._values[O]);return O+1>=this._keys.length?(this._index=-1,this._keys=g,this._values=g):this._index++,{value:D,done:!1}}return{value:void 0,done:!0}},$.prototype.throw=function(O){throw this._index>=0&&(this._index=-1,this._keys=g,this._values=g),O},$.prototype.return=function(O){return this._index>=0&&(this._index=-1,this._keys=g,this._values=g),{value:O,done:!0}},$}(),k=function(){function $(){this._keys=[],this._values=[],this._cacheKey=d,this._cacheIndex=-2}return Object.defineProperty($.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),$.prototype.has=function(O){return this._find(O,!1)>=0},$.prototype.get=function(O){var D=this._find(O,!1);return D>=0?this._values[D]:void 0},$.prototype.set=function(O,D){var j=this._find(O,!0);return this._values[j]=D,this},$.prototype.delete=function(O){var D=this._find(O,!1);if(D>=0){for(var j=this._keys.length,M=D+1;M<j;M++)this._keys[M-1]=this._keys[M],this._values[M-1]=this._values[M];return this._keys.length--,this._values.length--,jn(O,this._cacheKey)&&(this._cacheKey=d,this._cacheIndex=-2),!0}return!1},$.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=d,this._cacheIndex=-2},$.prototype.keys=function(){return new v(this._keys,this._values,V)},$.prototype.values=function(){return new v(this._keys,this._values,nt)},$.prototype.entries=function(){return new v(this._keys,this._values,et)},$.prototype["@@iterator"]=function(){return this.entries()},$.prototype[a]=function(){return this.entries()},$.prototype._find=function(O,D){if(!jn(this._cacheKey,O)){this._cacheIndex=-1;for(var j=0;j<this._keys.length;j++)if(jn(this._keys[j],O)){this._cacheIndex=j;break}}return this._cacheIndex<0&&D&&(this._cacheIndex=this._keys.length,this._keys.push(O),this._values.push(void 0)),this._cacheIndex},$}();return k;function V($,O){return $}function nt($,O){return O}function et($,O){return[$,O]}}function Cp(){var d=function(){function g(){this._map=new F}return Object.defineProperty(g.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),g.prototype.has=function(v){return this._map.has(v)},g.prototype.add=function(v){return this._map.set(v,v),this},g.prototype.delete=function(v){return this._map.delete(v)},g.prototype.clear=function(){this._map.clear()},g.prototype.keys=function(){return this._map.keys()},g.prototype.values=function(){return this._map.keys()},g.prototype.entries=function(){return this._map.entries()},g.prototype["@@iterator"]=function(){return this.keys()},g.prototype[a]=function(){return this.keys()},g}();return d}function Ep(){var d=16,g=A.create(),v=k();return function(){function O(){this._key=k()}return O.prototype.has=function(D){var j=V(D,!1);return j!==void 0?A.has(j,this._key):!1},O.prototype.get=function(D){var j=V(D,!1);return j!==void 0?A.get(j,this._key):void 0},O.prototype.set=function(D,j){var M=V(D,!0);return M[this._key]=j,this},O.prototype.delete=function(D){var j=V(D,!1);return j!==void 0?delete j[this._key]:!1},O.prototype.clear=function(){this._key=k()},O}();function k(){var O;do O="@@WeakMap@@"+$();while(A.has(g,O));return g[O]=!0,O}function V(O,D){if(!i.call(O,v)){if(!D)return;Object.defineProperty(O,v,{value:A.create()})}return O[v]}function nt(O,D){for(var j=0;j<D;++j)O[j]=Math.random()*255|0;return O}function et(O){if(typeof Uint8Array=="function"){var D=new Uint8Array(O);return typeof crypto<"u"?crypto.getRandomValues(D):typeof msCrypto<"u"?msCrypto.getRandomValues(D):nt(D,O),D}return nt(new Array(O),O)}function $(){var O=et(d);O[6]=O[6]&79|64,O[8]=O[8]&191|128;for(var D="",j=0;j<d;++j){var M=O[j];(j===4||j===6||j===8)&&(D+="-"),M<16&&(D+="0"),D+=M.toString(16).toLowerCase()}return D}}function Mn(d){return d.__=void 0,delete d.__,d}})})(Ba||(Ba={}));const Xp="[object ArrayBuffer]";class E{static isArrayBuffer(t){return Object.prototype.toString.call(t)===Xp}static toArrayBuffer(t){return this.isArrayBuffer(t)?t:t.byteLength===t.buffer.byteLength||t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:this.toUint8Array(t.buffer).slice(t.byteOffset,t.byteOffset+t.byteLength).buffer}static toUint8Array(t){return this.toView(t,Uint8Array)}static toView(t,r){if(t.constructor===r)return t;if(this.isArrayBuffer(t))return new r(t);if(this.isArrayBufferView(t))return new r(t.buffer,t.byteOffset,t.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(t){return this.isArrayBufferView(t)||this.isArrayBuffer(t)}static isArrayBufferView(t){return ArrayBuffer.isView(t)||t&&this.isArrayBuffer(t.buffer)}static isEqual(t,r){const i=E.toUint8Array(t),n=E.toUint8Array(r);if(i.length!==n.byteLength)return!1;for(let s=0;s<i.length;s++)if(i[s]!==n[s])return!1;return!0}static concat(...t){let r;Array.isArray(t[0])&&!(t[1]instanceof Function)||Array.isArray(t[0])&&t[1]instanceof Function?r=t[0]:t[t.length-1]instanceof Function?r=t.slice(0,t.length-1):r=t;let i=0;for(const a of r)i+=a.byteLength;const n=new Uint8Array(i);let s=0;for(const a of r){const l=this.toUint8Array(a);n.set(l,s),s+=l.length}return t[t.length-1]instanceof Function?this.toView(n,t[t.length-1]):n.buffer}}const Rn="string",Qp=/^[0-9a-f]+$/i,th=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,eh=/^[a-zA-Z0-9-_]+$/;class Ca{static fromString(t){const r=unescape(encodeURIComponent(t)),i=new Uint8Array(r.length);for(let n=0;n<r.length;n++)i[n]=r.charCodeAt(n);return i.buffer}static toString(t){const r=E.toUint8Array(t);let i="";for(let n=0;n<r.length;n++)i+=String.fromCharCode(r[n]);return decodeURIComponent(escape(i))}}class Vt{static toString(t,r=!1){const i=E.toArrayBuffer(t),n=new DataView(i);let s="";for(let a=0;a<i.byteLength;a+=2){const l=n.getUint16(a,r);s+=String.fromCharCode(l)}return s}static fromString(t,r=!1){const i=new ArrayBuffer(t.length*2),n=new DataView(i);for(let s=0;s<t.length;s++)n.setUint16(s*2,t.charCodeAt(s),r);return i}}class U{static isHex(t){return typeof t===Rn&&Qp.test(t)}static isBase64(t){return typeof t===Rn&&th.test(t)}static isBase64Url(t){return typeof t===Rn&&eh.test(t)}static ToString(t,r="utf8"){const i=E.toUint8Array(t);switch(r.toLowerCase()){case"utf8":return this.ToUtf8String(i);case"binary":return this.ToBinary(i);case"hex":return this.ToHex(i);case"base64":return this.ToBase64(i);case"base64url":return this.ToBase64Url(i);case"utf16le":return Vt.toString(i,!0);case"utf16":case"utf16be":return Vt.toString(i);default:throw new Error("Unknown type of encoding '".concat(r,"'"))}}static FromString(t,r="utf8"){if(!t)return new ArrayBuffer(0);switch(r.toLowerCase()){case"utf8":return this.FromUtf8String(t);case"binary":return this.FromBinary(t);case"hex":return this.FromHex(t);case"base64":return this.FromBase64(t);case"base64url":return this.FromBase64Url(t);case"utf16le":return Vt.fromString(t,!0);case"utf16":case"utf16be":return Vt.fromString(t);default:throw new Error("Unknown type of encoding '".concat(r,"'"))}}static ToBase64(t){const r=E.toUint8Array(t);if(typeof btoa<"u"){const i=this.ToString(r,"binary");return btoa(i)}else return Aa.from(r).toString("base64")}static FromBase64(t){const r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!U.isBase64(r))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(r)):new Uint8Array(Aa.from(r,"base64")).buffer}static FromBase64Url(t){const r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!U.isBase64Url(r))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(r.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(t){return this.ToBase64(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(t,r=U.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.FromBinary(t);case"utf8":return Ca.fromString(t);case"utf16":case"utf16be":return Vt.fromString(t);case"utf16le":case"usc2":return Vt.fromString(t,!0);default:throw new Error("Unknown type of encoding '".concat(r,"'"))}}static ToUtf8String(t,r=U.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.ToBinary(t);case"utf8":return Ca.toString(t);case"utf16":case"utf16be":return Vt.toString(t);case"utf16le":case"usc2":return Vt.toString(t,!0);default:throw new Error("Unknown type of encoding '".concat(r,"'"))}}static FromBinary(t){const r=t.length,i=new Uint8Array(r);for(let n=0;n<r;n++)i[n]=t.charCodeAt(n);return i.buffer}static ToBinary(t){const r=E.toUint8Array(t);let i="";for(let n=0;n<r.length;n++)i+=String.fromCharCode(r[n]);return i}static ToHex(t){const r=E.toUint8Array(t);let i="";const n=r.length;for(let s=0;s<n;s++){const a=r[s];a<16&&(i+="0"),i+=a.toString(16)}return i}static FromHex(t){let r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!U.isHex(r))throw new TypeError("Argument 'hexString' is not HEX encoded");r.length%2&&(r="0".concat(r));const i=new Uint8Array(r.length/2);for(let n=0;n<r.length;n=n+2){const s=r.slice(n,n+2);i[n/2]=parseInt(s,16)}return i.buffer}static ToUtf16String(t,r=!1){return Vt.toString(t,r)}static FromUtf16String(t,r=!1){return Vt.fromString(t,r)}static Base64Padding(t){const r=4-t.length%4;if(r<4)for(let i=0;i<r;i++)t+="=";return t}static formatString(t){return(t==null?void 0:t.replace(/[\n\r\t ]/g,""))||""}}U.DEFAULT_UTF8_ENCODING="utf8";function rh(...e){const t=e.map(n=>n.byteLength).reduce((n,s)=>n+s),r=new Uint8Array(t);let i=0;return e.map(n=>new Uint8Array(n)).forEach(n=>{for(const s of n)r[i++]=s}),r.buffer}function tu(e,t){if(!(e&&t)||e.byteLength!==t.byteLength)return!1;const r=new Uint8Array(e),i=new Uint8Array(t);for(let n=0;n<e.byteLength;n++)if(r[n]!==i[n])return!1;return!0}function Ze(e,t){let r=0;if(e.length===1)return e[0];for(let i=e.length-1;i>=0;i--)r+=e[e.length-1-i]*Math.pow(2,t*i);return r}function ke(e,t,r=-1){const i=r;let n=e,s=0,a=Math.pow(2,t);for(let l=1;l<8;l++){if(e<a){let u;if(i<0)u=new ArrayBuffer(l),s=l;else{if(i<l)return new ArrayBuffer(0);u=new ArrayBuffer(i),s=i}const f=new Uint8Array(u);for(let A=l-1;A>=0;A--){const w=Math.pow(2,A*t);f[s-A-1]=Math.floor(n/w),n-=f[s-A-1]*w}return u}a*=Math.pow(2,t)}return new ArrayBuffer(0)}function ds(...e){let t=0,r=0;for(const s of e)t+=s.length;const i=new ArrayBuffer(t),n=new Uint8Array(i);for(const s of e)n.set(s,r),r+=s.length;return n}function eu(){const e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const a=e[0]===255&&e[1]&128,l=e[0]===0&&(e[1]&128)===0;(a||l)&&this.warnings.push("Needlessly long format")}const t=new ArrayBuffer(this.valueHex.byteLength),r=new Uint8Array(t);for(let a=0;a<this.valueHex.byteLength;a++)r[a]=0;r[0]=e[0]&128;const i=Ze(r,8),n=new ArrayBuffer(this.valueHex.byteLength),s=new Uint8Array(n);for(let a=0;a<this.valueHex.byteLength;a++)s[a]=e[a];return s[0]&=127,Ze(s,8)-i}function ih(e){const t=e<0?e*-1:e;let r=128;for(let i=1;i<8;i++){if(t<=r){if(e<0){const a=r-t,l=ke(a,8,i),u=new Uint8Array(l);return u[0]|=128,l}let n=ke(t,8,i),s=new Uint8Array(n);if(s[0]&128){const a=n.slice(0),l=new Uint8Array(a);n=new ArrayBuffer(n.byteLength+1),s=new Uint8Array(n);for(let u=0;u<a.byteLength;u++)s[u+1]=l[u];s[0]=0}return n}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function nh(e,t){if(e.byteLength!==t.byteLength)return!1;const r=new Uint8Array(e),i=new Uint8Array(t);for(let n=0;n<r.length;n++)if(r[n]!==i[n])return!1;return!0}function bt(e,t){const r=e.toString(10);if(t<r.length)return"";const i=t-r.length,n=new Array(i);for(let s=0;s<i;s++)n[s]="0";return n.join("").concat(r)}function xi(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function Ho(e){let t=0,r=0;for(let n=0;n<e.length;n++){const s=e[n];t+=s.byteLength}const i=new Uint8Array(t);for(let n=0;n<e.length;n++){const s=e[n];i.set(new Uint8Array(s),r),r+=s.byteLength}return i.buffer}function re(e,t,r,i){return t instanceof Uint8Array?t.byteLength?r<0?(e.error="Wrong parameter: inputOffset less than zero",!1):i<0?(e.error="Wrong parameter: inputLength less than zero",!1):t.byteLength-r-i<0?(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(e.error="Wrong parameter: inputBuffer has zero length",!1):(e.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class Cn{constructor(){this.items=[]}write(t){this.items.push(t)}final(){return Ho(this.items)}}const ur=[new Uint8Array([1])],Ea="0123456789",zn="name",Ia="valueHexView",sh="isHexOnly",oh="idBlock",ah="tagClass",ch="tagNumber",lh="isConstructed",uh="fromBER",ph="toBER",hh="local",gt="",Ut=new ArrayBuffer(0),En=new Uint8Array(0),Nr="EndOfContent",ru="OCTET STRING",iu="BIT STRING";function Ft(e){var t;return t=class extends e{constructor(...r){var i;super(...r);const n=r[0]||{};this.isHexOnly=(i=n.isHexOnly)!==null&&i!==void 0?i:!1,this.valueHexView=n.valueHex?E.toUint8Array(n.valueHex):En}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(r){this.valueHexView=new Uint8Array(r)}fromBER(r,i,n){const s=r instanceof ArrayBuffer?new Uint8Array(r):r;if(!re(this,s,i,n))return-1;const a=i+n;return this.valueHexView=s.subarray(i,a),this.valueHexView.length?(this.blockLength=n,a):(this.warnings.push("Zero buffer length"),i)}toBER(r=!1){return this.isHexOnly?r?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",Ut)}toJSON(){return X(L({},super.toJSON()),{isHexOnly:this.isHexOnly,valueHex:U.ToHex(this.valueHexView)})}},t.NAME="hexBlock",t}class Te{constructor({blockLength:t=0,error:r=gt,warnings:i=[],valueBeforeDecode:n=En}={}){this.blockLength=t,this.error=r,this.warnings=i,this.valueBeforeDecodeView=E.toUint8Array(n)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(t){this.valueBeforeDecodeView=new Uint8Array(t)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:U.ToHex(this.valueBeforeDecodeView)}}}Te.NAME="baseBlock";class ft extends Te{fromBER(t,r,i){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(t,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}ft.NAME="valueBlock";class nu extends Ft(Te){constructor({idBlock:t={}}={}){var r,i,n,s;super(),t?(this.isHexOnly=(r=t.isHexOnly)!==null&&r!==void 0?r:!1,this.valueHexView=t.valueHex?E.toUint8Array(t.valueHex):En,this.tagClass=(i=t.tagClass)!==null&&i!==void 0?i:-1,this.tagNumber=(n=t.tagNumber)!==null&&n!==void 0?n:-1,this.isConstructed=(s=t.isConstructed)!==null&&s!==void 0?s:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(t=!1){let r=0;switch(this.tagClass){case 1:r|=0;break;case 2:r|=64;break;case 3:r|=128;break;case 4:r|=192;break;default:return this.error="Unknown tag class",Ut}if(this.isConstructed&&(r|=32),this.tagNumber<31&&!this.isHexOnly){const n=new Uint8Array(1);if(!t){let s=this.tagNumber;s&=31,r|=s,n[0]=r}return n.buffer}if(!this.isHexOnly){const n=ke(this.tagNumber,7),s=new Uint8Array(n),a=n.byteLength,l=new Uint8Array(a+1);if(l[0]=r|31,!t){for(let u=0;u<a-1;u++)l[u+1]=s[u]|128;l[a]=s[a-1]}return l.buffer}const i=new Uint8Array(this.valueHexView.byteLength+1);if(i[0]=r|31,!t){const n=this.valueHexView;for(let s=0;s<n.length-1;s++)i[s+1]=n[s]|128;i[this.valueHexView.byteLength]=n[n.length-1]}return i.buffer}fromBER(t,r,i){const n=E.toUint8Array(t);if(!re(this,n,r,i))return-1;const s=n.subarray(r,r+i);if(s.length===0)return this.error="Zero buffer length",-1;switch(s[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(s[0]&32)===32,this.isHexOnly=!1;const a=s[0]&31;if(a!==31)this.tagNumber=a,this.blockLength=1;else{let l=1,u=this.valueHexView=new Uint8Array(255),f=255;for(;s[l]&128;){if(u[l-1]=s[l]&127,l++,l>=s.length)return this.error="End of input reached before message was fully decoded",-1;if(l===f){f+=255;const w=new Uint8Array(f);for(let F=0;F<u.length;F++)w[F]=u[F];u=this.valueHexView=new Uint8Array(f)}}this.blockLength=l+1,u[l-1]=s[l]&127;const A=new Uint8Array(l);for(let w=0;w<l;w++)A[w]=u[w];u=this.valueHexView=new Uint8Array(l),u.set(A),this.blockLength<=9?this.tagNumber=Ze(u,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return r+this.blockLength}toJSON(){return X(L({},super.toJSON()),{tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed})}}nu.NAME="identificationBlock";class su extends Te{constructor({lenBlock:t={}}={}){var r,i,n;super(),this.isIndefiniteForm=(r=t.isIndefiniteForm)!==null&&r!==void 0?r:!1,this.longFormUsed=(i=t.longFormUsed)!==null&&i!==void 0?i:!1,this.length=(n=t.length)!==null&&n!==void 0?n:0}fromBER(t,r,i){const n=E.toUint8Array(t);if(!re(this,n,r,i))return-1;const s=n.subarray(r,r+i);if(s.length===0)return this.error="Zero buffer length",-1;if(s[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=s[0]===128,this.isIndefiniteForm)return this.blockLength=1,r+this.blockLength;if(this.longFormUsed=!!(s[0]&128),this.longFormUsed===!1)return this.length=s[0],this.blockLength=1,r+this.blockLength;const a=s[0]&127;if(a>8)return this.error="Too big integer",-1;if(a+1>s.length)return this.error="End of input reached before message was fully decoded",-1;const l=r+1,u=n.subarray(l,l+a);return u[a-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=Ze(u,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=a+1,r+this.blockLength}toBER(t=!1){let r,i;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return r=new ArrayBuffer(1),t===!1&&(i=new Uint8Array(r),i[0]=128),r;if(this.longFormUsed){const n=ke(this.length,8);if(n.byteLength>127)return this.error="Too big length",Ut;if(r=new ArrayBuffer(n.byteLength+1),t)return r;const s=new Uint8Array(n);i=new Uint8Array(r),i[0]=n.byteLength|128;for(let a=0;a<n.byteLength;a++)i[a+1]=s[a];return r}return r=new ArrayBuffer(1),t===!1&&(i=new Uint8Array(r),i[0]=this.length),r}toJSON(){return X(L({},super.toJSON()),{isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length})}}su.NAME="lengthBlock";const P={};class ct extends Te{constructor(a={},s){var l=a,{name:t=gt,optional:r=!1,primitiveSchema:i}=l,n=Y(l,["name","optional","primitiveSchema"]);super(n),this.name=t,this.optional=r,i&&(this.primitiveSchema=i),this.idBlock=new nu(n),this.lenBlock=new su(n),this.valueBlock=s?new s(n):new ft(n)}fromBER(t,r,i){const n=this.valueBlock.fromBER(t,r,this.lenBlock.isIndefiniteForm?i:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),n)}toBER(t,r){const i=r||new Cn;r||ou(this);const n=this.idBlock.toBER(t);if(i.write(n),this.lenBlock.isIndefiniteForm)i.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(t,i),i.write(new ArrayBuffer(2));else{const s=this.valueBlock.toBER(t);this.lenBlock.length=s.byteLength;const a=this.lenBlock.toBER(t);i.write(a),i.write(s)}return r?Ut:i.final()}toJSON(){const t=X(L({},super.toJSON()),{idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional});return this.primitiveSchema&&(t.primitiveSchema=this.primitiveSchema.toJSON()),t}toString(t="ascii"){return t==="ascii"?this.onAsciiEncoding():U.ToHex(this.toBER())}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(U.ToHex(this.valueBlock.valueBeforeDecodeView))}isEqual(t){if(this===t)return!0;if(!(t instanceof this.constructor))return!1;const r=this.toBER(),i=t.toBER();return nh(r,i)}}ct.NAME="BaseBlock";function ou(e){if(e instanceof P.Constructed)for(const t of e.valueBlock.value)ou(t)&&(e.lenBlock.isIndefiniteForm=!0);return!!e.lenBlock.isIndefiniteForm}class _o extends ct{constructor(n={},i){var s=n,{value:t=gt}=s,r=Y(s,["value"]);super(r,i),t&&this.fromString(t)}getValue(){return this.valueBlock.value}setValue(t){this.valueBlock.value=t}fromBER(t,r,i){const n=this.valueBlock.fromBER(t,r,this.lenBlock.isIndefiniteForm?i:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),n)}onAsciiEncoding(){return"".concat(this.constructor.NAME," : '").concat(this.valueBlock.value,"'")}}_o.NAME="BaseStringBlock";class au extends Ft(ft){constructor(i={}){var n=i,{isHexOnly:t=!0}=n,r=Y(n,["isHexOnly"]);super(r),this.isHexOnly=t}}au.NAME="PrimitiveValueBlock";var Oa;class Tr extends ct{constructor(t={}){super(t,au),this.idBlock.isConstructed=!1}}Oa=Tr,P.Primitive=Oa,Tr.NAME="PRIMITIVE";function fh(e,t){if(e instanceof t)return e;const r=new t;return r.idBlock=e.idBlock,r.lenBlock=e.lenBlock,r.warnings=e.warnings,r.valueBeforeDecodeView=e.valueBeforeDecodeView,r}function nr(e,t=0,r=e.length){const i=t;let n=new ct({},ft);const s=new Te;if(!re(s,e,t,r))return n.error=s.error,{offset:-1,result:n};if(!e.subarray(t,t+r).length)return n.error="Zero buffer length",{offset:-1,result:n};let a=n.idBlock.fromBER(e,t,r);if(n.idBlock.warnings.length&&n.warnings.concat(n.idBlock.warnings),a===-1)return n.error=n.idBlock.error,{offset:-1,result:n};if(t=a,r-=n.idBlock.blockLength,a=n.lenBlock.fromBER(e,t,r),n.lenBlock.warnings.length&&n.warnings.concat(n.lenBlock.warnings),a===-1)return n.error=n.lenBlock.error,{offset:-1,result:n};if(t=a,r-=n.lenBlock.blockLength,!n.idBlock.isConstructed&&n.lenBlock.isIndefiniteForm)return n.error="Indefinite length form used for primitive encoding form",{offset:-1,result:n};let l=ct;switch(n.idBlock.tagClass){case 1:if(n.idBlock.tagNumber>=37&&n.idBlock.isHexOnly===!1)return n.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:n};switch(n.idBlock.tagNumber){case 0:if(n.idBlock.isConstructed&&n.lenBlock.length>0)return n.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:n};l=P.EndOfContent;break;case 1:l=P.Boolean;break;case 2:l=P.Integer;break;case 3:l=P.BitString;break;case 4:l=P.OctetString;break;case 5:l=P.Null;break;case 6:l=P.ObjectIdentifier;break;case 10:l=P.Enumerated;break;case 12:l=P.Utf8String;break;case 13:l=P.RelativeObjectIdentifier;break;case 14:l=P.TIME;break;case 15:return n.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:n};case 16:l=P.Sequence;break;case 17:l=P.Set;break;case 18:l=P.NumericString;break;case 19:l=P.PrintableString;break;case 20:l=P.TeletexString;break;case 21:l=P.VideotexString;break;case 22:l=P.IA5String;break;case 23:l=P.UTCTime;break;case 24:l=P.GeneralizedTime;break;case 25:l=P.GraphicString;break;case 26:l=P.VisibleString;break;case 27:l=P.GeneralString;break;case 28:l=P.UniversalString;break;case 29:l=P.CharacterString;break;case 30:l=P.BmpString;break;case 31:l=P.DATE;break;case 32:l=P.TimeOfDay;break;case 33:l=P.DateTime;break;case 34:l=P.Duration;break;default:{const u=n.idBlock.isConstructed?new P.Constructed:new P.Primitive;u.idBlock=n.idBlock,u.lenBlock=n.lenBlock,u.warnings=n.warnings,n=u}}break;case 2:case 3:case 4:default:l=n.idBlock.isConstructed?P.Constructed:P.Primitive}return n=fh(n,l),a=n.fromBER(e,t,n.lenBlock.isIndefiniteForm?r:n.lenBlock.length),n.valueBeforeDecodeView=e.subarray(i,i+n.blockLength),{offset:a,result:n}}function qe(e){if(!e.byteLength){const t=new ct({},ft);return t.error="Input buffer has zero length",{offset:-1,result:t}}return nr(E.toUint8Array(e).slice(),0,e.byteLength)}function dh(e,t){return e?1:t}class ae extends ft{constructor(n={}){var s=n,{value:t=[],isIndefiniteForm:r=!1}=s,i=Y(s,["value","isIndefiniteForm"]);super(i),this.value=t,this.isIndefiniteForm=r}fromBER(t,r,i){const n=E.toUint8Array(t);if(!re(this,n,r,i))return-1;if(this.valueBeforeDecodeView=n.subarray(r,r+i),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),r;let s=r;for(;dh(this.isIndefiniteForm,i)>0;){const a=nr(n,s,i);if(a.offset===-1)return this.error=a.result.error,this.warnings.concat(a.result.warnings),-1;if(s=a.offset,this.blockLength+=a.result.blockLength,i-=a.result.blockLength,this.value.push(a.result),this.isIndefiniteForm&&a.result.constructor.NAME===Nr)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===Nr?this.value.pop():this.warnings.push("No EndOfContent block encoded")),s}toBER(t,r){const i=r||new Cn;for(let n=0;n<this.value.length;n++)this.value[n].toBER(t,i);return r?Ut:i.final()}toJSON(){const t=X(L({},super.toJSON()),{isIndefiniteForm:this.isIndefiniteForm,value:[]});for(const r of this.value)t.value.push(r.toJSON());return t}}ae.NAME="ConstructedValueBlock";var Na;class vt extends ct{constructor(t={}){super(t,ae),this.idBlock.isConstructed=!0}fromBER(t,r,i){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const n=this.valueBlock.fromBER(t,r,this.lenBlock.isIndefiniteForm?i:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),n)}onAsciiEncoding(){const t=[];for(const i of this.valueBlock.value)t.push(i.toString("ascii").split("\n").map(n=>"  ".concat(n)).join("\n"));const r=this.idBlock.tagClass===3?"[".concat(this.idBlock.tagNumber,"]"):this.constructor.NAME;return t.length?"".concat(r," :\n").concat(t.join("\n")):"".concat(r," :")}}Na=vt,P.Constructed=Na,vt.NAME="CONSTRUCTED";class cu extends ft{fromBER(t,r,i){return r}toBER(t){return Ut}}cu.override="EndOfContentValueBlock";var Ta;class ys extends ct{constructor(t={}){super(t,cu),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}Ta=ys,P.EndOfContent=Ta,ys.NAME=Nr;var Pa;class Be extends ct{constructor(t={}){super(t,ft),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(t,r,i){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=i,r+i>t.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):r+i}toBER(t,r){const i=new ArrayBuffer(2);if(!t){const n=new Uint8Array(i);n[0]=5,n[1]=0}return r&&r.write(i),i}onAsciiEncoding(){return"".concat(this.constructor.NAME)}}Pa=Be,P.Null=Pa,Be.NAME="NULL";class lu extends Ft(ft){constructor(i={}){var n=i,{value:t}=n,r=Y(n,["value"]);super(r),r.valueHex?this.valueHexView=E.toUint8Array(r.valueHex):this.valueHexView=new Uint8Array(1),t&&(this.value=t)}get value(){for(const t of this.valueHexView)if(t>0)return!0;return!1}set value(t){this.valueHexView[0]=t?255:0}fromBER(t,r,i){const n=E.toUint8Array(t);return re(this,n,r,i)?(this.valueHexView=n.subarray(r,r+i),i>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,eu.call(this),this.blockLength=i,r+i):-1}toBER(){return this.valueHexView.slice()}toJSON(){return X(L({},super.toJSON()),{value:this.value})}}lu.NAME="BooleanValueBlock";var Da;let ki=class extends ct{constructor(e={}){super(e,lu),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(this.getValue)}};Da=ki,P.Boolean=Da,ki.NAME="BOOLEAN";class uu extends Ft(ae){constructor(i={}){var n=i,{isConstructed:t=!1}=n,r=Y(n,["isConstructed"]);super(r),this.isConstructed=t}fromBER(t,r,i){let n=0;if(this.isConstructed){if(this.isHexOnly=!1,n=ae.prototype.fromBER.call(this,t,r,i),n===-1)return n;for(let s=0;s<this.value.length;s++){const a=this.value[s].constructor.NAME;if(a===Nr){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(a!==ru)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,n=super.fromBER(t,r,i),this.blockLength=i;return n}toBER(t,r){return this.isConstructed?ae.prototype.toBER.call(this,t,r):t?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return X(L({},super.toJSON()),{isConstructed:this.isConstructed})}}uu.NAME="OctetStringValueBlock";var ja;let Se=class pu extends ct{constructor(n={}){var s=n,{idBlock:t={},lenBlock:r={}}=s,i=Y(s,["idBlock","lenBlock"]);var a,l;(a=i.isConstructed)!==null&&a!==void 0||(i.isConstructed=!!(!((l=i.value)===null||l===void 0)&&l.length)),super(L({idBlock:L({isConstructed:i.isConstructed},t),lenBlock:X(L({},r),{isIndefiniteForm:!!i.isIndefiniteForm})},i),uu),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(t,r,i){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,i===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),r;if(!this.valueBlock.isConstructed){const n=(t instanceof ArrayBuffer?new Uint8Array(t):t).subarray(r,r+i);try{if(n.byteLength){const s=nr(n,0,n.byteLength);s.offset!==-1&&s.offset===i&&(this.valueBlock.value=[s.result])}}catch(s){}}return super.fromBER(t,r,i)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?vt.prototype.onAsciiEncoding.call(this):"".concat(this.constructor.NAME," : ").concat(U.ToHex(this.valueBlock.valueHexView))}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const t=[];for(const r of this.valueBlock.value)r instanceof pu&&t.push(r.valueBlock.valueHexView);return E.concat(t)}};ja=Se,P.OctetString=ja,Se.NAME=ru;class hu extends Ft(ae){constructor(n={}){var s=n,{unusedBits:t=0,isConstructed:r=!1}=s,i=Y(s,["unusedBits","isConstructed"]);super(i),this.unusedBits=t,this.isConstructed=r,this.blockLength=this.valueHexView.byteLength}fromBER(t,r,i){if(!i)return r;let n=-1;if(this.isConstructed){if(n=ae.prototype.fromBER.call(this,t,r,i),n===-1)return n;for(const l of this.value){const u=l.constructor.NAME;if(u===Nr){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(u!==iu)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const f=l.valueBlock;if(this.unusedBits>0&&f.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=f.unusedBits}return n}const s=E.toUint8Array(t);if(!re(this,s,r,i))return-1;const a=s.subarray(r,r+i);if(this.unusedBits=a[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const l=a.subarray(1);try{if(l.byteLength){const u=nr(l,0,l.byteLength);u.offset!==-1&&u.offset===i-1&&(this.value=[u.result])}}catch(u){}}return this.valueHexView=a.subarray(1),this.blockLength=a.length,r+i}toBER(t,r){if(this.isConstructed)return ae.prototype.toBER.call(this,t,r);if(t)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return Ut;const i=new Uint8Array(this.valueHexView.length+1);return i[0]=this.unusedBits,i.set(this.valueHexView,1),i.buffer}toJSON(){return X(L({},super.toJSON()),{unusedBits:this.unusedBits,isConstructed:this.isConstructed})}}hu.NAME="BitStringValueBlock";var Ua;let Ae=class extends ct{constructor(i={}){var n=i,{idBlock:e={},lenBlock:t={}}=n,r=Y(n,["idBlock","lenBlock"]);var s,a;(s=r.isConstructed)!==null&&s!==void 0||(r.isConstructed=!!(!((a=r.value)===null||a===void 0)&&a.length)),super(L({idBlock:L({isConstructed:r.isConstructed},e),lenBlock:X(L({},t),{isIndefiniteForm:!!r.isIndefiniteForm})},r),hu),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,t,r){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return vt.prototype.onAsciiEncoding.call(this);{const e=[],t=this.valueBlock.valueHexView;for(const i of t)e.push(i.toString(2).padStart(8,"0"));const r=e.join("");return"".concat(this.constructor.NAME," : ").concat(r.substring(0,r.length-this.valueBlock.unusedBits))}}};Ua=Ae,P.BitString=Ua,Ae.NAME=iu;var Ma;function yh(e,t){const r=new Uint8Array([0]),i=new Uint8Array(e),n=new Uint8Array(t);let s=i.slice(0);const a=s.length-1,l=n.slice(0),u=l.length-1;let f=0;const A=u<a?a:u;let w=0;for(let F=A;F>=0;F--,w++){switch(!0){case w<l.length:f=s[a-w]+l[u-w]+r[0];break;default:f=s[a-w]+r[0]}switch(r[0]=f/10,!0){case w>=s.length:s=ds(new Uint8Array([f%10]),s);break;default:s[a-w]=f%10}}return r[0]>0&&(s=ds(r,s)),s}function Va(e){if(e>=ur.length)for(let t=ur.length;t<=e;t++){const r=new Uint8Array([0]);let i=ur[t-1].slice(0);for(let n=i.length-1;n>=0;n--){const s=new Uint8Array([(i[n]<<1)+r[0]]);r[0]=s[0]/10,i[n]=s[0]%10}r[0]>0&&(i=ds(r,i)),ur.push(i)}return ur[e]}function gh(e,t){let r=0;const i=new Uint8Array(e),n=new Uint8Array(t),s=i.slice(0),a=s.length-1,l=n.slice(0),u=l.length-1;let f,A=0;for(let w=u;w>=0;w--,A++)switch(f=s[a-A]-l[u-A]-r,!0){case f<0:r=1,s[a-A]=f+10;break;default:r=0,s[a-A]=f}if(r>0)for(let w=a-u+1;w>=0;w--,A++)if(f=s[a-A]-r,f<0)r=1,s[a-A]=f+10;else{r=0,s[a-A]=f;break}return s.slice()}class gs extends Ft(ft){constructor(i={}){var n=i,{value:t}=n,r=Y(n,["value"]);super(r),this._valueDec=0,r.valueHex&&this.setValueHex(),t!==void 0&&(this.valueDec=t)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=eu.call(this)))}set valueDec(t){this._valueDec=t,this.isHexOnly=!1,this.valueHexView=new Uint8Array(ih(t))}get valueDec(){return this._valueDec}fromDER(t,r,i,n=0){const s=this.fromBER(t,r,i);if(s===-1)return s;const a=this.valueHexView;return a[0]===0&&a[1]&128?this.valueHexView=a.subarray(1):n!==0&&a.length<n&&(n-a.length>1&&(n=a.length+1),this.valueHexView=a.subarray(n-a.length)),s}toDER(t=!1){const r=this.valueHexView;switch(!0){case(r[0]&128)!==0:{const i=new Uint8Array(this.valueHexView.length+1);i[0]=0,i.set(r,1),this.valueHexView=i}break;case(r[0]===0&&(r[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(t)}fromBER(t,r,i){const n=super.fromBER(t,r,i);return n===-1||this.setValueHex(),n}toBER(t){return t?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return X(L({},super.toJSON()),{valueDec:this.valueDec})}toString(){const t=this.valueHexView.length*8-1;let r=new Uint8Array(this.valueHexView.length*8/3),i=0,n;const s=this.valueHexView;let a="",l=!1;for(let u=s.byteLength-1;u>=0;u--){n=s[u];for(let f=0;f<8;f++){if((n&1)===1)switch(i){case t:r=gh(Va(i),r),a="-";break;default:r=yh(r,Va(i))}i++,n>>=1}}for(let u=0;u<r.length;u++)r[u]&&(l=!0),l&&(a+=Ea.charAt(r[u]));return l===!1&&(a+=Ea.charAt(0)),a}}Ma=gs,gs.NAME="IntegerValueBlock",Object.defineProperty(Ma.prototype,"valueHex",{set:function(e){this.valueHexView=new Uint8Array(e),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var Ra;class $t extends ct{constructor(t={}){super(t,gs),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return xi(),BigInt(this.valueBlock.toString())}static fromBigInt(t){xi();const r=BigInt(t),i=new Cn,n=r.toString(16).replace(/^-/,""),s=new Uint8Array(U.FromHex(n));if(r<0){const a=new Uint8Array(s.length+(s[0]&128?1:0));a[0]|=128;const l=BigInt("0x".concat(U.ToHex(a)))+r,u=E.toUint8Array(U.FromHex(l.toString(16)));u[0]|=128,i.write(u)}else s[0]&128&&i.write(new Uint8Array([0])),i.write(s);return new $t({valueHex:i.final()})}convertToDER(){const t=new $t({valueHex:this.valueBlock.valueHexView});return t.valueBlock.toDER(),t}convertFromDER(){return new $t({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(this.valueBlock.toString())}}Ra=$t,P.Integer=Ra,$t.NAME="INTEGER";var za;class Bi extends $t{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}za=Bi,P.Enumerated=za,Bi.NAME="ENUMERATED";class vs extends Ft(ft){constructor(n={}){var s=n,{valueDec:t=-1,isFirstSid:r=!1}=s,i=Y(s,["valueDec","isFirstSid"]);super(i),this.valueDec=t,this.isFirstSid=r}fromBER(t,r,i){if(!i)return r;const n=E.toUint8Array(t);if(!re(this,n,r,i))return-1;const s=n.subarray(r,r+i);this.valueHexView=new Uint8Array(i);for(let l=0;l<i&&(this.valueHexView[l]=s[l]&127,this.blockLength++,!!(s[l]&128));l++);const a=new Uint8Array(this.blockLength);for(let l=0;l<this.blockLength;l++)a[l]=this.valueHexView[l];return this.valueHexView=a,s[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=Ze(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}set valueBigInt(t){xi();let r=BigInt(t).toString(2);for(;r.length%7;)r="0"+r;const i=new Uint8Array(r.length/7);for(let n=0;n<i.length;n++)i[n]=parseInt(r.slice(n*7,n*7+7),2)+(n+1<i.length?128:0);this.fromBER(i.buffer,0,i.length)}toBER(t){if(this.isHexOnly){if(t)return new ArrayBuffer(this.valueHexView.byteLength);const n=this.valueHexView,s=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength-1;a++)s[a]=n[a]|128;return s[this.blockLength-1]=n[this.blockLength-1],s.buffer}const r=ke(this.valueDec,7);if(r.byteLength===0)return this.error="Error during encoding SID value",Ut;const i=new Uint8Array(r.byteLength);if(!t){const n=new Uint8Array(r),s=r.byteLength-1;for(let a=0;a<s;a++)i[a]=n[a]|128;i[s]=n[s]}return i}toString(){let t="";if(this.isHexOnly)t=U.ToHex(this.valueHexView);else if(this.isFirstSid){let r=this.valueDec;this.valueDec<=39?t="0.":this.valueDec<=79?(t="1.",r-=40):(t="2.",r-=80),t+=r.toString()}else t=this.valueDec.toString();return t}toJSON(){return X(L({},super.toJSON()),{valueDec:this.valueDec,isFirstSid:this.isFirstSid})}}vs.NAME="sidBlock";class fu extends ft{constructor(i={}){var n=i,{value:t=gt}=n,r=Y(n,["value"]);super(r),this.value=[],t&&this.fromString(t)}fromBER(t,r,i){let n=r;for(;i>0;){const s=new vs;if(n=s.fromBER(t,n,i),n===-1)return this.blockLength=0,this.error=s.error,n;this.value.length===0&&(s.isFirstSid=!0),this.blockLength+=s.blockLength,i-=s.blockLength,this.value.push(s)}return n}toBER(t){const r=[];for(let i=0;i<this.value.length;i++){const n=this.value[i].toBER(t);if(n.byteLength===0)return this.error=this.value[i].error,Ut;r.push(n)}return Ho(r)}fromString(t){this.value=[];let r=0,i=0,n="",s=!1;do if(i=t.indexOf(".",r),i===-1?n=t.substring(r):n=t.substring(r,i),r=i+1,s){const a=this.value[0];let l=0;switch(a.valueDec){case 0:break;case 1:l=40;break;case 2:l=80;break;default:this.value=[];return}const u=parseInt(n,10);if(isNaN(u))return;a.valueDec=u+l,s=!1}else{const a=new vs;if(n>Number.MAX_SAFE_INTEGER){xi();const l=BigInt(n);a.valueBigInt=l}else if(a.valueDec=parseInt(n,10),isNaN(a.valueDec))return;this.value.length||(a.isFirstSid=!0,s=!0),this.value.push(a)}while(i!==-1)}toString(){let t="",r=!1;for(let i=0;i<this.value.length;i++){r=this.value[i].isHexOnly;let n=this.value[i].toString();i!==0&&(t="".concat(t,".")),r?(n="{".concat(n,"}"),this.value[i].isFirstSid?t="2.{".concat(n," - 80}"):t+=n):t+=n}return t}toJSON(){const t=X(L({},super.toJSON()),{value:this.toString(),sidArray:[]});for(let r=0;r<this.value.length;r++)t.sidArray.push(this.value[r].toJSON());return t}}fu.NAME="ObjectIdentifierValueBlock";var La;class Ci extends ct{constructor(t={}){super(t,fu),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(t){this.valueBlock.fromString(t)}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(this.valueBlock.toString()||"empty")}toJSON(){return X(L({},super.toJSON()),{value:this.getValue()})}}La=Ci,P.ObjectIdentifier=La,Ci.NAME="OBJECT IDENTIFIER";class ms extends Ft(Te){constructor(i={}){var n=i,{valueDec:t=0}=n,r=Y(n,["valueDec"]);super(r),this.valueDec=t}fromBER(t,r,i){if(i===0)return r;const n=E.toUint8Array(t);if(!re(this,n,r,i))return-1;const s=n.subarray(r,r+i);this.valueHexView=new Uint8Array(i);for(let l=0;l<i&&(this.valueHexView[l]=s[l]&127,this.blockLength++,!!(s[l]&128));l++);const a=new Uint8Array(this.blockLength);for(let l=0;l<this.blockLength;l++)a[l]=this.valueHexView[l];return this.valueHexView=a,s[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=Ze(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}toBER(t){if(this.isHexOnly){if(t)return new ArrayBuffer(this.valueHexView.byteLength);const n=this.valueHexView,s=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength-1;a++)s[a]=n[a]|128;return s[this.blockLength-1]=n[this.blockLength-1],s.buffer}const r=ke(this.valueDec,7);if(r.byteLength===0)return this.error="Error during encoding SID value",Ut;const i=new Uint8Array(r.byteLength);if(!t){const n=new Uint8Array(r),s=r.byteLength-1;for(let a=0;a<s;a++)i[a]=n[a]|128;i[s]=n[s]}return i.buffer}toString(){let t="";return this.isHexOnly?t=U.ToHex(this.valueHexView):t=this.valueDec.toString(),t}toJSON(){return X(L({},super.toJSON()),{valueDec:this.valueDec})}}ms.NAME="relativeSidBlock";class du extends ft{constructor(i={}){var n=i,{value:t=gt}=n,r=Y(n,["value"]);super(r),this.value=[],t&&this.fromString(t)}fromBER(t,r,i){let n=r;for(;i>0;){const s=new ms;if(n=s.fromBER(t,n,i),n===-1)return this.blockLength=0,this.error=s.error,n;this.blockLength+=s.blockLength,i-=s.blockLength,this.value.push(s)}return n}toBER(t,r){const i=[];for(let n=0;n<this.value.length;n++){const s=this.value[n].toBER(t);if(s.byteLength===0)return this.error=this.value[n].error,Ut;i.push(s)}return Ho(i)}fromString(t){this.value=[];let r=0,i=0,n="";do{i=t.indexOf(".",r),i===-1?n=t.substring(r):n=t.substring(r,i),r=i+1;const s=new ms;if(s.valueDec=parseInt(n,10),isNaN(s.valueDec))return!0;this.value.push(s)}while(i!==-1);return!0}toString(){let t="",r=!1;for(let i=0;i<this.value.length;i++){r=this.value[i].isHexOnly;let n=this.value[i].toString();i!==0&&(t="".concat(t,".")),r&&(n="{".concat(n,"}")),t+=n}return t}toJSON(){const t=X(L({},super.toJSON()),{value:this.toString(),sidArray:[]});for(let r=0;r<this.value.length;r++)t.sidArray.push(this.value[r].toJSON());return t}}du.NAME="RelativeObjectIdentifierValueBlock";var $a;class ws extends ct{constructor(t={}){super(t,du),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(t){this.valueBlock.fromString(t)}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(this.valueBlock.toString()||"empty")}toJSON(){return X(L({},super.toJSON()),{value:this.getValue()})}}$a=ws,P.RelativeObjectIdentifier=$a,ws.NAME="RelativeObjectIdentifier";var Ha;class Zt extends vt{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}Ha=Zt,P.Sequence=Ha,Zt.NAME="SEQUENCE";var _a;let Yt=class extends vt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};_a=Yt,P.Set=_a,Yt.NAME="SET";class yu extends Ft(ft){constructor(r={}){var t=Y(r,[]);super(t),this.isHexOnly=!0,this.value=gt}toJSON(){return X(L({},super.toJSON()),{value:this.value})}}yu.NAME="StringValueBlock";class gu extends yu{}gu.NAME="SimpleStringValueBlock";class At extends _o{constructor(r={}){var t=Y(r,[]);super(t,gu)}fromBuffer(t){this.valueBlock.value=String.fromCharCode.apply(null,E.toUint8Array(t))}fromString(t){const r=t.length,i=this.valueBlock.valueHexView=new Uint8Array(r);for(let n=0;n<r;n++)i[n]=t.charCodeAt(n);this.valueBlock.value=t}}At.NAME="SIMPLE STRING";class vu extends At{fromBuffer(t){this.valueBlock.valueHexView=E.toUint8Array(t);try{this.valueBlock.value=U.ToUtf8String(t)}catch(r){this.warnings.push('Error during "decodeURIComponent": '.concat(r,", using raw string")),this.valueBlock.value=U.ToBinary(t)}}fromString(t){this.valueBlock.valueHexView=new Uint8Array(U.FromUtf8String(t)),this.valueBlock.value=t}}vu.NAME="Utf8StringValueBlock";var Fa;class Xt extends vu{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}Fa=Xt,P.Utf8String=Fa,Xt.NAME="UTF8String";class mu extends At{fromBuffer(t){this.valueBlock.value=U.ToUtf16String(t),this.valueBlock.valueHexView=E.toUint8Array(t)}fromString(t){this.valueBlock.value=t,this.valueBlock.valueHexView=new Uint8Array(U.FromUtf16String(t))}}mu.NAME="BmpStringValueBlock";var Ka;class Ei extends mu{constructor(r={}){var t=Y(r,[]);super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}Ka=Ei,P.BmpString=Ka,Ei.NAME="BMPString";class wu extends At{fromBuffer(t){const r=ArrayBuffer.isView(t)?t.slice().buffer:t.slice(0),i=new Uint8Array(r);for(let n=0;n<i.length;n+=4)i[n]=i[n+3],i[n+1]=i[n+2],i[n+2]=0,i[n+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(r))}fromString(t){const r=t.length,i=this.valueBlock.valueHexView=new Uint8Array(r*4);for(let n=0;n<r;n++){const s=ke(t.charCodeAt(n),8),a=new Uint8Array(s);if(a.length>4)continue;const l=4-a.length;for(let u=a.length-1;u>=0;u--)i[n*4+u+l]=a[u]}this.valueBlock.value=t}}wu.NAME="UniversalStringValueBlock";var qa;class Ii extends wu{constructor(r={}){var t=Y(r,[]);super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}qa=Ii,P.UniversalString=qa,Ii.NAME="UniversalString";var Wa;class Oi extends At{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}Wa=Oi,P.NumericString=Wa,Oi.NAME="NumericString";var Ga;class Ni extends At{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}Ga=Ni,P.PrintableString=Ga,Ni.NAME="PrintableString";var Ja;class Ti extends At{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}Ja=Ti,P.TeletexString=Ja,Ti.NAME="TeletexString";var Za;class Pi extends At{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}Za=Pi,P.VideotexString=Za,Pi.NAME="VideotexString";var Ya;class Di extends At{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}Ya=Di,P.IA5String=Ya,Di.NAME="IA5String";var Xa;class ji extends At{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}Xa=ji,P.GraphicString=Xa,ji.NAME="GraphicString";var Qa;class Pr extends At{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}Qa=Pr,P.VisibleString=Qa,Pr.NAME="VisibleString";var tc;class Ui extends At{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}tc=Ui,P.GeneralString=tc,Ui.NAME="GeneralString";var ec;class Mi extends At{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}ec=Mi,P.CharacterString=ec,Mi.NAME="CharacterString";var rc;class Dr extends Pr{constructor(n={}){var s=n,{value:t,valueDate:r}=s,i=Y(s,["value","valueDate"]);if(super(i),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,t){this.fromString(t),this.valueBlock.valueHexView=new Uint8Array(t.length);for(let a=0;a<t.length;a++)this.valueBlock.valueHexView[a]=t.charCodeAt(a)}r&&(this.fromDate(r),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(t){this.fromString(String.fromCharCode.apply(null,E.toUint8Array(t)))}toBuffer(){const t=this.toString(),r=new ArrayBuffer(t.length),i=new Uint8Array(r);for(let n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return r}fromDate(t){this.year=t.getUTCFullYear(),this.month=t.getUTCMonth()+1,this.day=t.getUTCDate(),this.hour=t.getUTCHours(),this.minute=t.getUTCMinutes(),this.second=t.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(t){const r=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(t);if(r===null){this.error="Wrong input string for conversion";return}const i=parseInt(r[1],10);i>=50?this.year=1900+i:this.year=2e3+i,this.month=parseInt(r[2],10),this.day=parseInt(r[3],10),this.hour=parseInt(r[4],10),this.minute=parseInt(r[5],10),this.second=parseInt(r[6],10)}toString(t="iso"){if(t==="iso"){const r=new Array(7);return r[0]=bt(this.year<2e3?this.year-1900:this.year-2e3,2),r[1]=bt(this.month,2),r[2]=bt(this.day,2),r[3]=bt(this.hour,2),r[4]=bt(this.minute,2),r[5]=bt(this.second,2),r[6]="Z",r.join("")}return super.toString(t)}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(this.toDate().toISOString())}toJSON(){return X(L({},super.toJSON()),{year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second})}}rc=Dr,P.UTCTime=rc,Dr.NAME="UTCTime";var ic;class Vi extends Dr{constructor(t={}){var r;super(t),(r=this.millisecond)!==null&&r!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(t){super.fromDate(t),this.millisecond=t.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(t){let r=!1,i="",n="",s=0,a,l=0,u=0;if(t[t.length-1]==="Z")i=t.substring(0,t.length-1),r=!0;else{const w=new Number(t[t.length-1]);if(isNaN(w.valueOf()))throw new Error("Wrong input string for conversion");i=t}if(r){if(i.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(i.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let w=1,F=i.indexOf("+"),N="";if(F===-1&&(F=i.indexOf("-"),w=-1),F!==-1){if(N=i.substring(F+1),i=i.substring(0,F),N.length!==2&&N.length!==4)throw new Error("Wrong input string for conversion");let p=parseInt(N.substring(0,2),10);if(isNaN(p.valueOf()))throw new Error("Wrong input string for conversion");if(l=w*p,N.length===4){if(p=parseInt(N.substring(2,4),10),isNaN(p.valueOf()))throw new Error("Wrong input string for conversion");u=w*p}}}let f=i.indexOf(".");if(f===-1&&(f=i.indexOf(",")),f!==-1){const w=new Number("0".concat(i.substring(f)));if(isNaN(w.valueOf()))throw new Error("Wrong input string for conversion");s=w.valueOf(),n=i.substring(0,f)}else n=i;switch(!0){case n.length===8:if(a=/(\d{4})(\d{2})(\d{2})/ig,f!==-1)throw new Error("Wrong input string for conversion");break;case n.length===10:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,f!==-1){let w=60*s;this.minute=Math.floor(w),w=60*(w-this.minute),this.second=Math.floor(w),w=1e3*(w-this.second),this.millisecond=Math.floor(w)}break;case n.length===12:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,f!==-1){let w=60*s;this.second=Math.floor(w),w=1e3*(w-this.second),this.millisecond=Math.floor(w)}break;case n.length===14:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,f!==-1){const w=1e3*s;this.millisecond=Math.floor(w)}break;default:throw new Error("Wrong input string for conversion")}const A=a.exec(n);if(A===null)throw new Error("Wrong input string for conversion");for(let w=1;w<A.length;w++)switch(w){case 1:this.year=parseInt(A[w],10);break;case 2:this.month=parseInt(A[w],10);break;case 3:this.day=parseInt(A[w],10);break;case 4:this.hour=parseInt(A[w],10)+l;break;case 5:this.minute=parseInt(A[w],10)+u;break;case 6:this.second=parseInt(A[w],10);break;default:throw new Error("Wrong input string for conversion")}if(r===!1){const w=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=w.getUTCFullYear(),this.month=w.getUTCMonth(),this.day=w.getUTCDay(),this.hour=w.getUTCHours(),this.minute=w.getUTCMinutes(),this.second=w.getUTCSeconds(),this.millisecond=w.getUTCMilliseconds()}}toString(t="iso"){if(t==="iso"){const r=[];return r.push(bt(this.year,4)),r.push(bt(this.month,2)),r.push(bt(this.day,2)),r.push(bt(this.hour,2)),r.push(bt(this.minute,2)),r.push(bt(this.second,2)),this.millisecond!==0&&(r.push("."),r.push(bt(this.millisecond,3))),r.push("Z"),r.join("")}return super.toString(t)}toJSON(){return X(L({},super.toJSON()),{millisecond:this.millisecond})}}ic=Vi,P.GeneralizedTime=ic,Vi.NAME="GeneralizedTime";var nc;class bs extends Xt{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}nc=bs,P.DATE=nc,bs.NAME="DATE";var sc;class Ss extends Xt{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}sc=Ss,P.TimeOfDay=sc,Ss.NAME="TimeOfDay";var oc;class As extends Xt{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}oc=As,P.DateTime=oc,As.NAME="DateTime";var ac;class xs extends Xt{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}ac=xs,P.Duration=ac,xs.NAME="Duration";var cc;class ks extends Xt{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}cc=ks,P.TIME=cc,ks.NAME="TIME";class Ce{constructor({name:t=gt,optional:r=!1}={}){this.name=t,this.optional=r}}class Fo extends Ce{constructor(i={}){var n=i,{value:t=[]}=n,r=Y(n,["value"]);super(r),this.value=t}}class Ri extends Ce{constructor(n={}){var s=n,{value:t=new Ce,local:r=!1}=s,i=Y(s,["value","local"]);super(i),this.value=t,this.local=r}}class vh{constructor({data:t=En}={}){this.dataView=E.toUint8Array(t)}get data(){return this.dataView.slice().buffer}set data(t){this.dataView=E.toUint8Array(t)}fromBER(t,r,i){const n=r+i;return this.dataView=E.toUint8Array(t).subarray(r,n),n}toBER(t){return this.dataView.slice().buffer}}function ve(e,t,r){if(r instanceof Fo){for(let n=0;n<r.value.length;n++)if(ve(e,t,r.value[n]).verified)return{verified:!0,result:e};{const n={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty(zn)&&(n.name=r.name),n}}if(r instanceof Ce)return r.hasOwnProperty(zn)&&(e[r.name]=t),{verified:!0,result:e};if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong root object"}};if(!(t instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(!(r instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(oh in r))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(uh in r.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(ph in r.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const i=r.idBlock.toBER(!1);if(i.byteLength===0)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(r.idBlock.fromBER(i,0,i.byteLength)===-1)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(r.idBlock.hasOwnProperty(ah)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(r.idBlock.hasOwnProperty(ch)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(r.idBlock.hasOwnProperty(lh)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if(!(sh in r.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(r.idBlock.isHexOnly){if(!(Ia in r.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const n=r.idBlock.valueHexView,s=t.idBlock.valueHexView;if(n.length!==s.length)return{verified:!1,result:e};for(let a=0;a<n.length;a++)if(n[a]!==s[1])return{verified:!1,result:e}}if(r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,gt),r.name&&(e[r.name]=t)),r instanceof P.Constructed){let n=0,s={verified:!1,result:{error:"Unknown error"}},a=r.valueBlock.value.length;if(a>0&&r.valueBlock.value[0]instanceof Ri&&(a=t.valueBlock.value.length),a===0)return{verified:!0,result:e};if(t.valueBlock.value.length===0&&r.valueBlock.value.length!==0){let l=!0;for(let u=0;u<r.valueBlock.value.length;u++)l=l&&(r.valueBlock.value[u].optional||!1);return l?{verified:!0,result:e}:(r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,gt),r.name&&delete e[r.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(let l=0;l<a;l++)if(l-n>=t.valueBlock.value.length){if(r.valueBlock.value[l].optional===!1){const u={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,gt),r.name&&(delete e[r.name],u.name=r.name)),u}}else if(r.valueBlock.value[0]instanceof Ri){if(s=ve(e,t.valueBlock.value[l],r.valueBlock.value[0].value),s.verified===!1)if(r.valueBlock.value[0].optional)n++;else return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,gt),r.name&&delete e[r.name]),s;if(zn in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){let u={};hh in r.valueBlock.value[0]&&r.valueBlock.value[0].local?u=t:u=e,typeof u[r.valueBlock.value[0].name]>"u"&&(u[r.valueBlock.value[0].name]=[]),u[r.valueBlock.value[0].name].push(t.valueBlock.value[l])}}else if(s=ve(e,t.valueBlock.value[l-n],r.valueBlock.value[l]),s.verified===!1)if(r.valueBlock.value[l].optional)n++;else return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,gt),r.name&&delete e[r.name]),s;if(s.verified===!1){const l={verified:!1,result:e};return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,gt),r.name&&(delete e[r.name],l.name=r.name)),l}return{verified:!0,result:e}}if(r.primitiveSchema&&Ia in t.valueBlock){const n=nr(t.valueBlock.valueHexView);if(n.offset===-1){const s={verified:!1,result:n.result};return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,gt),r.name&&(delete e[r.name],s.name=r.name)),s}return ve(e,n.result,r.primitiveSchema)}return{verified:!0,result:e}}function mh(e,t){if(!(t instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};const r=nr(E.toUint8Array(e));return r.offset===-1?{verified:!1,result:r.result}:ve(r.result,r.result,t)}const bu=Object.freeze(Object.defineProperty({__proto__:null,Any:Ce,BaseBlock:ct,BaseStringBlock:_o,BitString:Ae,BmpString:Ei,Boolean:ki,CharacterString:Mi,Choice:Fo,Constructed:vt,DATE:bs,DateTime:As,Duration:xs,EndOfContent:ys,Enumerated:Bi,GeneralString:Ui,GeneralizedTime:Vi,GraphicString:ji,HexBlock:Ft,IA5String:Di,Integer:$t,Null:Be,NumericString:Oi,ObjectIdentifier:Ci,OctetString:Se,Primitive:Tr,PrintableString:Ni,RawData:vh,RelativeObjectIdentifier:ws,Repeated:Ri,Sequence:Zt,Set:Yt,TIME:ks,TeletexString:Ti,TimeOfDay:Ss,UTCTime:Dr,UniversalString:Ii,Utf8String:Xt,ValueBlock:ft,VideotexString:Pi,ViewWriter:Cn,VisibleString:Pr,compareSchema:ve,fromBER:qe,verifySchema:mh},Symbol.toStringTag,{value:"Module"}));var b;(function(e){e[e.Sequence=0]="Sequence",e[e.Set=1]="Set",e[e.Choice=2]="Choice"})(b||(b={}));var h;(function(e){e[e.Any=1]="Any",e[e.Boolean=2]="Boolean",e[e.OctetString=3]="OctetString",e[e.BitString=4]="BitString",e[e.Integer=5]="Integer",e[e.Enumerated=6]="Enumerated",e[e.ObjectIdentifier=7]="ObjectIdentifier",e[e.Utf8String=8]="Utf8String",e[e.BmpString=9]="BmpString",e[e.UniversalString=10]="UniversalString",e[e.NumericString=11]="NumericString",e[e.PrintableString=12]="PrintableString",e[e.TeletexString=13]="TeletexString",e[e.VideotexString=14]="VideotexString",e[e.IA5String=15]="IA5String",e[e.GraphicString=16]="GraphicString",e[e.VisibleString=17]="VisibleString",e[e.GeneralString=18]="GeneralString",e[e.CharacterString=19]="CharacterString",e[e.UTCTime=20]="UTCTime",e[e.GeneralizedTime=21]="GeneralizedTime",e[e.DATE=22]="DATE",e[e.TimeOfDay=23]="TimeOfDay",e[e.DateTime=24]="DateTime",e[e.Duration=25]="Duration",e[e.TIME=26]="TIME",e[e.Null=27]="Null"})(h||(h={}));class In{constructor(t,r=0){if(this.unusedBits=0,this.value=new ArrayBuffer(0),t)if(typeof t=="number")this.fromNumber(t);else if(E.isBufferSource(t))this.unusedBits=r,this.value=E.toArrayBuffer(t);else throw TypeError("Unsupported type of 'params' argument for BitString")}fromASN(t){if(!(t instanceof Ae))throw new TypeError("Argument 'asn' is not instance of ASN.1 BitString");return this.unusedBits=t.valueBlock.unusedBits,this.value=t.valueBlock.valueHex,this}toASN(){return new Ae({unusedBits:this.unusedBits,valueHex:this.value})}toSchema(t){return new Ae({name:t})}toNumber(){let t="";const r=new Uint8Array(this.value);for(const i of r)t+=i.toString(2).padStart(8,"0");return t=t.split("").reverse().join(""),this.unusedBits&&(t=t.slice(this.unusedBits).padStart(this.unusedBits,"0")),parseInt(t,2)}fromNumber(t){let r=t.toString(2);const i=r.length+7>>3;this.unusedBits=(i<<3)-r.length;const n=new Uint8Array(i);r=r.padStart(i<<3,"0").split("").reverse().join("");let s=0;for(;s<i;)n[s]=parseInt(r.slice(s<<3,(s<<3)+8),2),s++;this.value=n.buffer}}class _{get byteLength(){return this.buffer.byteLength}get byteOffset(){return 0}constructor(t){typeof t=="number"?this.buffer=new ArrayBuffer(t):E.isBufferSource(t)?this.buffer=E.toArrayBuffer(t):Array.isArray(t)?this.buffer=new Uint8Array(t):this.buffer=new ArrayBuffer(0)}fromASN(t){if(!(t instanceof Se))throw new TypeError("Argument 'asn' is not instance of ASN.1 OctetString");return this.buffer=t.valueBlock.valueHex,this}toASN(){return new Se({valueHex:this.buffer})}toSchema(t){return new Se({name:t})}}const wh={fromASN:e=>e instanceof Be?null:e.valueBeforeDecodeView,toASN:e=>{if(e===null)return new Be;const t=qe(e);if(t.result.error)throw new Error(t.result.error);return t.result}},bh={fromASN:e=>e.valueBlock.valueHexView.byteLength>=4?e.valueBlock.toString():e.valueBlock.valueDec,toASN:e=>new $t({value:+e})},Sh={fromASN:e=>e.valueBlock.valueDec,toASN:e=>new Bi({value:e})},J={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new $t({valueHex:e})},Ah={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new Ae({valueHex:e})},xh={fromASN:e=>e.valueBlock.toString(),toASN:e=>new Ci({value:e})},kh={fromASN:e=>e.valueBlock.value,toASN:e=>new ki({value:e})},zi={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new Se({valueHex:e})},Bh={fromASN:e=>new _(e.getValue()),toASN:e=>e.toASN()};function Et(e){return{fromASN:t=>t.valueBlock.value,toASN:t=>new e({value:t})}}const Su=Et(Xt),Ch=Et(Ei),Eh=Et(Ii),Ih=Et(Oi),Oh=Et(Ni),Nh=Et(Ti),Th=Et(Pi),Ph=Et(Di),Dh=Et(ji),jh=Et(Pr),Uh=Et(Ui),Mh=Et(Mi),Vh={fromASN:e=>e.toDate(),toASN:e=>new Dr({valueDate:e})},Rh={fromASN:e=>e.toDate(),toASN:e=>new Vi({valueDate:e})},zh={fromASN:()=>null,toASN:()=>new Be};function Ko(e){switch(e){case h.Any:return wh;case h.BitString:return Ah;case h.BmpString:return Ch;case h.Boolean:return kh;case h.CharacterString:return Mh;case h.Enumerated:return Sh;case h.GeneralString:return Uh;case h.GeneralizedTime:return Rh;case h.GraphicString:return Dh;case h.IA5String:return Ph;case h.Integer:return bh;case h.Null:return zh;case h.NumericString:return Ih;case h.ObjectIdentifier:return xh;case h.OctetString:return zi;case h.PrintableString:return Oh;case h.TeletexString:return Nh;case h.UTCTime:return Vh;case h.UniversalString:return Eh;case h.Utf8String:return Su;case h.VideotexString:return Th;case h.VisibleString:return jh;default:return null}}function Gt(e){return typeof e=="function"&&e.prototype?e.prototype.toASN&&e.prototype.fromASN?!0:Gt(e.prototype):!!(e&&typeof e=="object"&&"toASN"in e&&"fromASN"in e)}function Au(e){var t;if(e){const r=Object.getPrototypeOf(e);return((t=r==null?void 0:r.prototype)===null||t===void 0?void 0:t.constructor)===Array?!0:Au(r)}return!1}function Lh(e,t){if(!(e&&t)||e.byteLength!==t.byteLength)return!1;const r=new Uint8Array(e),i=new Uint8Array(t);for(let n=0;n<e.byteLength;n++)if(r[n]!==i[n])return!1;return!0}class $h{constructor(){this.items=new WeakMap}has(t){return this.items.has(t)}get(t,r=!1){const i=this.items.get(t);if(!i)throw new Error("Cannot get schema for '".concat(t.prototype.constructor.name,"' target"));if(r&&!i.schema)throw new Error("Schema '".concat(t.prototype.constructor.name,"' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'."));return i}cache(t){const r=this.get(t);r.schema||(r.schema=this.create(t,!0))}createDefault(t){const r={type:b.Sequence,items:{}},i=this.findParentSchema(t);return i&&(Object.assign(r,i),r.items=Object.assign({},r.items,i.items)),r}create(t,r){const i=this.items.get(t)||this.createDefault(t),n=[];for(const s in i.items){const a=i.items[s],l=r?s:"";let u;if(typeof a.type=="number"){const A=h[a.type],w=bu[A];if(!w)throw new Error("Cannot get ASN1 class by name '".concat(A,"'"));u=new w({name:l})}else Gt(a.type)?u=new a.type().toSchema(l):a.optional?this.get(a.type).type===b.Choice?u=new Ce({name:l}):(u=this.create(a.type,!1),u.name=l):u=new Ce({name:l});const f=!!a.optional||a.defaultValue!==void 0;if(a.repeated){u.name="";const A=a.repeated==="set"?Yt:Zt;u=new A({name:"",value:[new Ri({name:l,value:u})]})}if(a.context!==null&&a.context!==void 0)if(a.implicit)if(typeof a.type=="number"||Gt(a.type)){const A=a.repeated?vt:Tr;n.push(new A({name:l,optional:f,idBlock:{tagClass:3,tagNumber:a.context}}))}else{this.cache(a.type);const A=!!a.repeated;let w=A?u:this.get(a.type,!0).schema;w="valueBlock"in w?w.valueBlock.value:w.value,n.push(new vt({name:A?"":l,optional:f,idBlock:{tagClass:3,tagNumber:a.context},value:w}))}else n.push(new vt({optional:f,idBlock:{tagClass:3,tagNumber:a.context},value:[u]}));else u.optional=f,n.push(u)}switch(i.type){case b.Sequence:return new Zt({value:n,name:""});case b.Set:return new Yt({value:n,name:""});case b.Choice:return new Fo({value:n,name:""});default:throw new Error("Unsupported ASN1 type in use")}}set(t,r){return this.items.set(t,r),this}findParentSchema(t){const r=Object.getPrototypeOf(t);return r?this.items.get(r)||this.findParentSchema(r):null}}const Ct=new $h,x=e=>t=>{let r;Ct.has(t)?r=Ct.get(t):(r=Ct.createDefault(t),Ct.set(t,r)),Object.assign(r,e)},c=e=>(t,r)=>{let i;Ct.has(t.constructor)?i=Ct.get(t.constructor):(i=Ct.createDefault(t.constructor),Ct.set(t.constructor,i));const n=Object.assign({},e);if(typeof n.type=="number"&&!n.converter){const s=Ko(e.type);if(!s)throw new Error("Cannot get default converter for property '".concat(r,"' of ").concat(t.constructor.name));n.converter=s}i.items[r]=n};class lc extends Error{constructor(){super(...arguments),this.schemas=[]}}class Hh{static parse(t,r){const i=qe(t);if(i.result.error)throw new Error(i.result.error);return this.fromASN(i.result,r)}static fromASN(t,r){var i;try{if(Gt(r))return new r().fromASN(t);const n=Ct.get(r);Ct.cache(r);let s=n.schema;if(t.constructor===vt&&n.type!==b.Choice){s=new vt({idBlock:{tagClass:3,tagNumber:t.idBlock.tagNumber},value:n.schema.valueBlock.value});for(const u in n.items)delete t[u]}const a=ve({},t,s);if(!a.verified)throw new lc("Data does not match to ".concat(r.name," ASN1 schema. ").concat(a.result.error));const l=new r;if(Au(r)){if(!("value"in t.valueBlock&&Array.isArray(t.valueBlock.value)))throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");const u=n.itemType;if(typeof u=="number"){const f=Ko(u);if(!f)throw new Error("Cannot get default converter for array item of ".concat(r.name," ASN1 schema"));return r.from(t.valueBlock.value,A=>f.fromASN(A))}else return r.from(t.valueBlock.value,f=>this.fromASN(f,u))}for(const u in n.items){const f=a.result[u];if(!f)continue;const A=n.items[u],w=A.type;if(typeof w=="number"||Gt(w)){const F=(i=A.converter)!==null&&i!==void 0?i:Gt(w)?new w:null;if(!F)throw new Error("Converter is empty");if(A.repeated)if(A.implicit){const N=A.repeated==="sequence"?Zt:Yt,p=new N;p.valueBlock=f.valueBlock;const y=qe(p.toBER(!1));if(y.offset===-1)throw new Error("Cannot parse the child item. ".concat(y.result.error));if(!("value"in y.result.valueBlock&&Array.isArray(y.result.valueBlock.value)))throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");const S=y.result.valueBlock.value;l[u]=Array.from(S,m=>F.fromASN(m))}else l[u]=Array.from(f,N=>F.fromASN(N));else{let N=f;if(A.implicit){let p;if(Gt(w))p=new w().toSchema("");else{const y=h[w],S=bu[y];if(!S)throw new Error("Cannot get '".concat(y,"' class from asn1js module"));p=new S}p.valueBlock=N.valueBlock,N=qe(p.toBER(!1)).result}l[u]=F.fromASN(N)}}else if(A.repeated){if(!Array.isArray(f))throw new Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.");l[u]=Array.from(f,F=>this.fromASN(F,w))}else l[u]=this.fromASN(f,w)}return l}catch(n){throw n instanceof lc&&n.schemas.push(r.name),n}}}class qo{static serialize(t){return t instanceof ct?t.toBER(!1):this.toASN(t).toBER(!1)}static toASN(t){if(t&&typeof t=="object"&&Gt(t))return t.toASN();if(!(t&&typeof t=="object"))throw new TypeError("Parameter 1 should be type of Object.");const r=t.constructor,i=Ct.get(r);Ct.cache(r);let n=[];if(i.itemType){if(!Array.isArray(t))throw new TypeError("Parameter 1 should be type of Array.");if(typeof i.itemType=="number"){const a=Ko(i.itemType);if(!a)throw new Error("Cannot get default converter for array item of ".concat(r.name," ASN1 schema"));n=t.map(l=>a.toASN(l))}else n=t.map(a=>this.toAsnItem({type:i.itemType},"[]",r,a))}else for(const a in i.items){const l=i.items[a],u=t[a];if(u===void 0||l.defaultValue===u||typeof l.defaultValue=="object"&&typeof u=="object"&&Lh(this.serialize(l.defaultValue),this.serialize(u)))continue;const f=qo.toAsnItem(l,a,r,u);if(typeof l.context=="number")if(l.implicit)if(!l.repeated&&(typeof l.type=="number"||Gt(l.type))){const A={};A.valueHex=f instanceof Be?f.valueBeforeDecodeView:f.valueBlock.toBER(),n.push(new Tr(L({optional:l.optional,idBlock:{tagClass:3,tagNumber:l.context}},A)))}else n.push(new vt({optional:l.optional,idBlock:{tagClass:3,tagNumber:l.context},value:f.valueBlock.value}));else n.push(new vt({optional:l.optional,idBlock:{tagClass:3,tagNumber:l.context},value:[f]}));else l.repeated?n=n.concat(f):n.push(f)}let s;switch(i.type){case b.Sequence:s=new Zt({value:n});break;case b.Set:s=new Yt({value:n});break;case b.Choice:if(!n[0])throw new Error("Schema '".concat(r.name,"' has wrong data. Choice cannot be empty."));s=n[0];break}return s}static toAsnItem(t,r,i,n){let s;if(typeof t.type=="number"){const a=t.converter;if(!a)throw new Error("Property '".concat(r,"' doesn't have converter for type ").concat(h[t.type]," in schema '").concat(i.name,"'"));if(t.repeated){if(!Array.isArray(n))throw new TypeError("Parameter 'objProp' should be type of Array.");const l=Array.from(n,f=>a.toASN(f)),u=t.repeated==="sequence"?Zt:Yt;s=new u({value:l})}else s=a.toASN(n)}else if(t.repeated){if(!Array.isArray(n))throw new TypeError("Parameter 'objProp' should be type of Array.");const a=Array.from(n,u=>this.toASN(u)),l=t.repeated==="sequence"?Zt:Yt;s=new l({value:a})}else s=this.toASN(n);return s}}class q extends Array{constructor(t=[]){if(typeof t=="number")super(t);else{super();for(const r of t)this.push(r)}}}class I{static serialize(t){return qo.serialize(t)}static parse(t,r){return Hh.parse(t,r)}static toString(t){const r=E.isBufferSource(t)?E.toArrayBuffer(t):I.serialize(t),i=qe(r);if(i.offset===-1)throw new Error("Cannot decode ASN.1 data. ".concat(i.result.error));return i.result.toString()}}function o(e,t,r,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(s=(n<3?a(s):n>3?a(t,r,s):a(t,r))||s);return n>3&&s&&Object.defineProperty(t,r,s),s}var xu={exports:{}};(function(e){(function(t){const r="(0?\\d+|0x[a-f0-9]+)",i={fourOctet:new RegExp("^".concat(r,"\\.").concat(r,"\\.").concat(r,"\\.").concat(r,"$"),"i"),threeOctet:new RegExp("^".concat(r,"\\.").concat(r,"\\.").concat(r,"$"),"i"),twoOctet:new RegExp("^".concat(r,"\\.").concat(r,"$"),"i"),longValue:new RegExp("^".concat(r,"$"),"i")},n=new RegExp("^0[0-7]+$","i"),s=new RegExp("^0x[a-f0-9]+$","i"),a="%[0-9a-z]{1,}",l="(?:[0-9a-f]+::?)+",u={zoneIndex:new RegExp(a,"i"),native:new RegExp("^(::)?(".concat(l,")?([0-9a-f]+)?(::)?(").concat(a,")?$"),"i"),deprecatedTransitional:new RegExp("^(?:::)(".concat(r,"\\.").concat(r,"\\.").concat(r,"\\.").concat(r,"(").concat(a,")?)$"),"i"),transitional:new RegExp("^((?:".concat(l,")|(?:::)(?:").concat(l,")?)").concat(r,"\\.").concat(r,"\\.").concat(r,"\\.").concat(r,"(").concat(a,")?$"),"i")};function f(p,y){if(p.indexOf("::")!==p.lastIndexOf("::"))return null;let S=0,m=-1,C=(p.match(u.zoneIndex)||[])[0],B,W;for(C&&(C=C.substring(1),p=p.replace(/%.+$/,""));(m=p.indexOf(":",m+1))>=0;)S++;if(p.substr(0,2)==="::"&&S--,p.substr(-2,2)==="::"&&S--,S>y)return null;for(W=y-S,B=":";W--;)B+="0:";return p=p.replace("::",B),p[0]===":"&&(p=p.slice(1)),p[p.length-1]===":"&&(p=p.slice(0,-1)),y=function(){const _r=p.split(":"),Fr=[];for(let ar=0;ar<_r.length;ar++)Fr.push(parseInt(_r[ar],16));return Fr}(),{parts:y,zoneId:C}}function A(p,y,S,m){if(p.length!==y.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let C=0,B;for(;m>0;){if(B=S-m,B<0&&(B=0),p[C]>>B!==y[C]>>B)return!1;m-=S,C+=1}return!0}function w(p){if(s.test(p))return parseInt(p,16);if(p[0]==="0"&&!isNaN(parseInt(p[1],10))){if(n.test(p))return parseInt(p,8);throw new Error("ipaddr: cannot parse ".concat(p," as octal"))}return parseInt(p,10)}function F(p,y){for(;p.length<y;)p="0".concat(p);return p}const N={};N.IPv4=function(){function p(y){if(y.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let S,m;for(S=0;S<y.length;S++)if(m=y[S],!(0<=m&&m<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=y}return p.prototype.SpecialRanges={unspecified:[[new p([0,0,0,0]),8]],broadcast:[[new p([255,255,255,255]),32]],multicast:[[new p([224,0,0,0]),4]],linkLocal:[[new p([169,254,0,0]),16]],loopback:[[new p([127,0,0,0]),8]],carrierGradeNat:[[new p([100,64,0,0]),10]],private:[[new p([10,0,0,0]),8],[new p([172,16,0,0]),12],[new p([192,168,0,0]),16]],reserved:[[new p([192,0,0,0]),24],[new p([192,0,2,0]),24],[new p([192,88,99,0]),24],[new p([198,18,0,0]),15],[new p([198,51,100,0]),24],[new p([203,0,113,0]),24],[new p([240,0,0,0]),4]],as112:[[new p([192,175,48,0]),24],[new p([192,31,196,0]),24]],amt:[[new p([192,52,193,0]),24]]},p.prototype.kind=function(){return"ipv4"},p.prototype.match=function(y,S){let m;if(S===void 0&&(m=y,y=m[0],S=m[1]),y.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return A(this.octets,y.octets,8,S)},p.prototype.prefixLengthFromSubnetMask=function(){let y=0,S=!1;const m={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let C,B,W;for(C=3;C>=0;C-=1)if(B=this.octets[C],B in m){if(W=m[B],S&&W!==0)return null;W!==8&&(S=!0),y+=W}else return null;return 32-y},p.prototype.range=function(){return N.subnetMatch(this,this.SpecialRanges)},p.prototype.toByteArray=function(){return this.octets.slice(0)},p.prototype.toIPv4MappedAddress=function(){return N.IPv6.parse("::ffff:".concat(this.toString()))},p.prototype.toNormalizedString=function(){return this.toString()},p.prototype.toString=function(){return this.octets.join(".")},p}(),N.IPv4.broadcastAddressFromCIDR=function(p){try{const y=this.parseCIDR(p),S=y[0].toByteArray(),m=this.subnetMaskFromPrefixLength(y[1]).toByteArray(),C=[];let B=0;for(;B<4;)C.push(parseInt(S[B],10)|parseInt(m[B],10)^255),B++;return new this(C)}catch(y){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},N.IPv4.isIPv4=function(p){return this.parser(p)!==null},N.IPv4.isValid=function(p){try{return new this(this.parser(p)),!0}catch(y){return!1}},N.IPv4.isValidCIDR=function(p){try{return this.parseCIDR(p),!0}catch(y){return!1}},N.IPv4.isValidFourPartDecimal=function(p){return!!(N.IPv4.isValid(p)&&p.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},N.IPv4.networkAddressFromCIDR=function(p){let y,S,m,C,B;try{for(y=this.parseCIDR(p),m=y[0].toByteArray(),B=this.subnetMaskFromPrefixLength(y[1]).toByteArray(),C=[],S=0;S<4;)C.push(parseInt(m[S],10)&parseInt(B[S],10)),S++;return new this(C)}catch(W){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},N.IPv4.parse=function(p){const y=this.parser(p);if(y===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(y)},N.IPv4.parseCIDR=function(p){let y;if(y=p.match(/^(.+)\/(\d+)$/)){const S=parseInt(y[2]);if(S>=0&&S<=32){const m=[this.parse(y[1]),S];return Object.defineProperty(m,"toString",{value:function(){return this.join("/")}}),m}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},N.IPv4.parser=function(p){let y,S,m;if(y=p.match(i.fourOctet))return function(){const C=y.slice(1,6),B=[];for(let W=0;W<C.length;W++)S=C[W],B.push(w(S));return B}();if(y=p.match(i.longValue)){if(m=w(y[1]),m>4294967295||m<0)throw new Error("ipaddr: address outside defined range");return function(){const C=[];let B;for(B=0;B<=24;B+=8)C.push(m>>B&255);return C}().reverse()}else return(y=p.match(i.twoOctet))?function(){const C=y.slice(1,4),B=[];if(m=w(C[1]),m>16777215||m<0)throw new Error("ipaddr: address outside defined range");return B.push(w(C[0])),B.push(m>>16&255),B.push(m>>8&255),B.push(m&255),B}():(y=p.match(i.threeOctet))?function(){const C=y.slice(1,5),B=[];if(m=w(C[2]),m>65535||m<0)throw new Error("ipaddr: address outside defined range");return B.push(w(C[0])),B.push(w(C[1])),B.push(m>>8&255),B.push(m&255),B}():null},N.IPv4.subnetMaskFromPrefixLength=function(p){if(p=parseInt(p),p<0||p>32)throw new Error("ipaddr: invalid IPv4 prefix length");const y=[0,0,0,0];let S=0;const m=Math.floor(p/8);for(;S<m;)y[S]=255,S++;return m<4&&(y[m]=Math.pow(2,p%8)-1<<8-p%8),new this(y)},N.IPv6=function(){function p(y,S){let m,C;if(y.length===16)for(this.parts=[],m=0;m<=14;m+=2)this.parts.push(y[m]<<8|y[m+1]);else if(y.length===8)this.parts=y;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(m=0;m<this.parts.length;m++)if(C=this.parts[m],!(0<=C&&C<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");S&&(this.zoneId=S)}return p.prototype.SpecialRanges={unspecified:[new p([0,0,0,0,0,0,0,0]),128],linkLocal:[new p([65152,0,0,0,0,0,0,0]),10],multicast:[new p([65280,0,0,0,0,0,0,0]),8],loopback:[new p([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new p([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new p([0,0,0,0,0,65535,0,0]),96],discard:[new p([256,0,0,0,0,0,0,0]),64],rfc6145:[new p([0,0,0,0,65535,0,0,0]),96],rfc6052:[new p([100,65435,0,0,0,0,0,0]),96],"6to4":[new p([8194,0,0,0,0,0,0,0]),16],teredo:[new p([8193,0,0,0,0,0,0,0]),32],benchmarking:[new p([8193,2,0,0,0,0,0,0]),48],amt:[new p([8193,3,0,0,0,0,0,0]),32],as112v6:[[new p([8193,4,274,0,0,0,0,0]),48],[new p([9760,79,32768,0,0,0,0,0]),48]],deprecated:[new p([8193,16,0,0,0,0,0,0]),28],orchid2:[new p([8193,32,0,0,0,0,0,0]),28],droneRemoteIdProtocolEntityTags:[new p([8193,48,0,0,0,0,0,0]),28],reserved:[[new p([8193,0,0,0,0,0,0,0]),23],[new p([8193,3512,0,0,0,0,0,0]),32]]},p.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},p.prototype.kind=function(){return"ipv6"},p.prototype.match=function(y,S){let m;if(S===void 0&&(m=y,y=m[0],S=m[1]),y.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return A(this.parts,y.parts,16,S)},p.prototype.prefixLengthFromSubnetMask=function(){let y=0,S=!1;const m={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let C,B;for(let W=7;W>=0;W-=1)if(C=this.parts[W],C in m){if(B=m[C],S&&B!==0)return null;B!==16&&(S=!0),y+=B}else return null;return 128-y},p.prototype.range=function(){return N.subnetMatch(this,this.SpecialRanges)},p.prototype.toByteArray=function(){let y;const S=[],m=this.parts;for(let C=0;C<m.length;C++)y=m[C],S.push(y>>8),S.push(y&255);return S},p.prototype.toFixedLengthString=function(){const y=function(){const m=[];for(let C=0;C<this.parts.length;C++)m.push(F(this.parts[C].toString(16),4));return m}.call(this).join(":");let S="";return this.zoneId&&(S="%".concat(this.zoneId)),y+S},p.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const y=this.parts.slice(-2),S=y[0],m=y[1];return new N.IPv4([S>>8,S&255,m>>8,m&255])},p.prototype.toNormalizedString=function(){const y=function(){const m=[];for(let C=0;C<this.parts.length;C++)m.push(this.parts[C].toString(16));return m}.call(this).join(":");let S="";return this.zoneId&&(S="%".concat(this.zoneId)),y+S},p.prototype.toRFC5952String=function(){const y=/((^|:)(0(:|$)){2,})/g,S=this.toNormalizedString();let m=0,C=-1,B;for(;B=y.exec(S);)B[0].length>C&&(m=B.index,C=B[0].length);return C<0?S:"".concat(S.substring(0,m),"::").concat(S.substring(m+C))},p.prototype.toString=function(){return this.toRFC5952String()},p}(),N.IPv6.broadcastAddressFromCIDR=function(p){try{const y=this.parseCIDR(p),S=y[0].toByteArray(),m=this.subnetMaskFromPrefixLength(y[1]).toByteArray(),C=[];let B=0;for(;B<16;)C.push(parseInt(S[B],10)|parseInt(m[B],10)^255),B++;return new this(C)}catch(y){throw new Error("ipaddr: the address does not have IPv6 CIDR format (".concat(y,")"))}},N.IPv6.isIPv6=function(p){return this.parser(p)!==null},N.IPv6.isValid=function(p){if(typeof p=="string"&&p.indexOf(":")===-1)return!1;try{const y=this.parser(p);return new this(y.parts,y.zoneId),!0}catch(y){return!1}},N.IPv6.isValidCIDR=function(p){if(typeof p=="string"&&p.indexOf(":")===-1)return!1;try{return this.parseCIDR(p),!0}catch(y){return!1}},N.IPv6.networkAddressFromCIDR=function(p){let y,S,m,C,B;try{for(y=this.parseCIDR(p),m=y[0].toByteArray(),B=this.subnetMaskFromPrefixLength(y[1]).toByteArray(),C=[],S=0;S<16;)C.push(parseInt(m[S],10)&parseInt(B[S],10)),S++;return new this(C)}catch(W){throw new Error("ipaddr: the address does not have IPv6 CIDR format (".concat(W,")"))}},N.IPv6.parse=function(p){const y=this.parser(p);if(y.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(y.parts,y.zoneId)},N.IPv6.parseCIDR=function(p){let y,S,m;if((S=p.match(/^(.+)\/(\d+)$/))&&(y=parseInt(S[2]),y>=0&&y<=128))return m=[this.parse(S[1]),y],Object.defineProperty(m,"toString",{value:function(){return this.join("/")}}),m;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},N.IPv6.parser=function(p){let y,S,m,C,B,W;if(m=p.match(u.deprecatedTransitional))return this.parser("::ffff:".concat(m[1]));if(u.native.test(p))return f(p,8);if((m=p.match(u.transitional))&&(W=m[6]||"",y=m[1],m[1].endsWith("::")||(y=y.slice(0,-1)),y=f(y+W,6),y.parts)){for(B=[parseInt(m[2]),parseInt(m[3]),parseInt(m[4]),parseInt(m[5])],S=0;S<B.length;S++)if(C=B[S],!(0<=C&&C<=255))return null;return y.parts.push(B[0]<<8|B[1]),y.parts.push(B[2]<<8|B[3]),{parts:y.parts,zoneId:y.zoneId}}return null},N.IPv6.subnetMaskFromPrefixLength=function(p){if(p=parseInt(p),p<0||p>128)throw new Error("ipaddr: invalid IPv6 prefix length");const y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let S=0;const m=Math.floor(p/8);for(;S<m;)y[S]=255,S++;return m<16&&(y[m]=Math.pow(2,p%8)-1<<8-p%8),new this(y)},N.fromByteArray=function(p){const y=p.length;if(y===4)return new N.IPv4(p);if(y===16)return new N.IPv6(p);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},N.isValid=function(p){return N.IPv6.isValid(p)||N.IPv4.isValid(p)},N.isValidCIDR=function(p){return N.IPv6.isValidCIDR(p)||N.IPv4.isValidCIDR(p)},N.parse=function(p){if(N.IPv6.isValid(p))return N.IPv6.parse(p);if(N.IPv4.isValid(p))return N.IPv4.parse(p);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},N.parseCIDR=function(p){try{return N.IPv6.parseCIDR(p)}catch(y){try{return N.IPv4.parseCIDR(p)}catch(S){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},N.process=function(p){const y=this.parse(p);return y.kind()==="ipv6"&&y.isIPv4MappedAddress()?y.toIPv4Address():y},N.subnetMatch=function(p,y,S){let m,C,B,W;S==null&&(S="unicast");for(C in y)if(Object.prototype.hasOwnProperty.call(y,C)){for(B=y[C],B[0]&&!(B[0]instanceof Array)&&(B=[B]),m=0;m<B.length;m++)if(W=B[m],p.kind()===W[0].kind()&&p.match.apply(p,W))return C}return S},e.exports?e.exports=N:t.ipaddr=N})(fs)})(xu);var uc=xu.exports;class pc{static decodeIP(t){if(t.length===64&&parseInt(t,16)===0)return"::/0";if(t.length!==16)return t;const r=parseInt(t.slice(8),16).toString(2).split("").reduce((n,s)=>n+ +s,0);let i=t.slice(0,8).replace(/(.{2})/g,n=>"".concat(parseInt(n,16),"."));return i=i.slice(0,-1),"".concat(i,"/").concat(r)}static toString(t){if(t.byteLength===4||t.byteLength===16){const r=new Uint8Array(t);return uc.fromByteArray(Array.from(r)).toString()}return this.decodeIP(U.ToHex(t))}static fromString(t){const r=uc.parse(t);return new Uint8Array(r.toByteArray()).buffer}}var Bs,Cs,Es;let ot=class{constructor(e={}){Object.assign(this,e)}toString(){return this.bmpString||this.printableString||this.teletexString||this.universalString||this.utf8String||""}};o([c({type:h.TeletexString})],ot.prototype,"teletexString",void 0),o([c({type:h.PrintableString})],ot.prototype,"printableString",void 0),o([c({type:h.UniversalString})],ot.prototype,"universalString",void 0),o([c({type:h.Utf8String})],ot.prototype,"utf8String",void 0),o([c({type:h.BmpString})],ot.prototype,"bmpString",void 0),ot=o([x({type:b.Choice})],ot);let ze=class extends ot{constructor(e={}){super(e),Object.assign(this,e)}toString(){return this.ia5String||(this.anyValue?U.ToHex(this.anyValue):super.toString())}};o([c({type:h.IA5String})],ze.prototype,"ia5String",void 0),o([c({type:h.Any})],ze.prototype,"anyValue",void 0),ze=o([x({type:b.Choice})],ze);class Li{constructor(t={}){this.type="",this.value=new ze,Object.assign(this,t)}}o([c({type:h.ObjectIdentifier})],Li.prototype,"type",void 0),o([c({type:ze})],Li.prototype,"value",void 0);let Ye=Bs=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,Bs.prototype)}};Ye=Bs=o([x({type:b.Set,itemType:Li})],Ye);let Is=Cs=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,Cs.prototype)}};Is=Cs=o([x({type:b.Sequence,itemType:Ye})],Is);let it=Es=class extends Is{constructor(e){super(e),Object.setPrototypeOf(this,Es.prototype)}};it=Es=o([x({type:b.Sequence})],it);const _h={fromASN:e=>pc.toString(zi.fromASN(e)),toASN:e=>zi.toASN(pc.fromString(e))};class jr{constructor(t={}){this.typeId="",this.value=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:h.ObjectIdentifier})],jr.prototype,"typeId",void 0),o([c({type:h.Any,context:0})],jr.prototype,"value",void 0);class Os{constructor(t={}){this.partyName=new ot,Object.assign(this,t)}}o([c({type:ot,optional:!0,context:0,implicit:!0})],Os.prototype,"nameAssigner",void 0),o([c({type:ot,context:1,implicit:!0})],Os.prototype,"partyName",void 0);let z=class{constructor(e={}){Object.assign(this,e)}};o([c({type:jr,context:0,implicit:!0})],z.prototype,"otherName",void 0),o([c({type:h.IA5String,context:1,implicit:!0})],z.prototype,"rfc822Name",void 0),o([c({type:h.IA5String,context:2,implicit:!0})],z.prototype,"dNSName",void 0),o([c({type:h.Any,context:3,implicit:!0})],z.prototype,"x400Address",void 0),o([c({type:it,context:4,implicit:!1})],z.prototype,"directoryName",void 0),o([c({type:Os,context:5})],z.prototype,"ediPartyName",void 0),o([c({type:h.IA5String,context:6,implicit:!0})],z.prototype,"uniformResourceIdentifier",void 0),o([c({type:h.OctetString,context:7,implicit:!0,converter:_h})],z.prototype,"iPAddress",void 0),o([c({type:h.ObjectIdentifier,context:8,implicit:!0})],z.prototype,"registeredID",void 0),z=o([x({type:b.Choice})],z);const Wo="1.3.6.1.5.5.7",Fh="".concat(Wo,".1"),sr="".concat(Wo,".3"),On="".concat(Wo,".48"),hc="".concat(On,".1"),fc="".concat(On,".2"),dc="".concat(On,".3"),yc="".concat(On,".5"),ue="2.5.29";var Ns;const Ts="".concat(Fh,".1");class Ur{constructor(t={}){this.accessMethod="",this.accessLocation=new z,Object.assign(this,t)}}o([c({type:h.ObjectIdentifier})],Ur.prototype,"accessMethod",void 0),o([c({type:z})],Ur.prototype,"accessLocation",void 0);let Le=Ns=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,Ns.prototype)}};Le=Ns=o([x({type:b.Sequence,itemType:Ur})],Le);const Ps="".concat(ue,".35");class Go extends _{}class me{constructor(t={}){t&&Object.assign(this,t)}}o([c({type:Go,context:0,optional:!0,implicit:!0})],me.prototype,"keyIdentifier",void 0),o([c({type:z,context:1,optional:!0,implicit:!0,repeated:"sequence"})],me.prototype,"authorityCertIssuer",void 0),o([c({type:h.Integer,context:2,optional:!0,implicit:!0,converter:J})],me.prototype,"authorityCertSerialNumber",void 0);const ku="".concat(ue,".19");class $i{constructor(t={}){this.cA=!1,Object.assign(this,t)}}o([c({type:h.Boolean,defaultValue:!1})],$i.prototype,"cA",void 0),o([c({type:h.Integer,optional:!0})],$i.prototype,"pathLenConstraint",void 0);var Ds;let pt=Ds=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,Ds.prototype)}};pt=Ds=o([x({type:b.Sequence,itemType:z})],pt);var js;let gc=js=class extends pt{constructor(e){super(e),Object.setPrototypeOf(this,js.prototype)}};gc=js=o([x({type:b.Sequence})],gc);var Us;const Bu="".concat(ue,".32");let Wt=class{constructor(e={}){Object.assign(this,e)}toString(){return this.ia5String||this.visibleString||this.bmpString||this.utf8String||""}};o([c({type:h.IA5String})],Wt.prototype,"ia5String",void 0),o([c({type:h.VisibleString})],Wt.prototype,"visibleString",void 0),o([c({type:h.BmpString})],Wt.prototype,"bmpString",void 0),o([c({type:h.Utf8String})],Wt.prototype,"utf8String",void 0),Wt=o([x({type:b.Choice})],Wt);class Ms{constructor(t={}){this.organization=new Wt,this.noticeNumbers=[],Object.assign(this,t)}}o([c({type:Wt})],Ms.prototype,"organization",void 0),o([c({type:h.Integer,repeated:"sequence"})],Ms.prototype,"noticeNumbers",void 0);class Vs{constructor(t={}){Object.assign(this,t)}}o([c({type:Ms,optional:!0})],Vs.prototype,"noticeRef",void 0),o([c({type:Wt,optional:!0})],Vs.prototype,"explicitText",void 0);let Jr=class{constructor(e={}){Object.assign(this,e)}};o([c({type:h.IA5String})],Jr.prototype,"cPSuri",void 0),o([c({type:Vs})],Jr.prototype,"userNotice",void 0),Jr=o([x({type:b.Choice})],Jr);class Rs{constructor(t={}){this.policyQualifierId="",this.qualifier=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:h.ObjectIdentifier})],Rs.prototype,"policyQualifierId",void 0),o([c({type:h.Any})],Rs.prototype,"qualifier",void 0);class Hi{constructor(t={}){this.policyIdentifier="",Object.assign(this,t)}}o([c({type:h.ObjectIdentifier})],Hi.prototype,"policyIdentifier",void 0),o([c({type:Rs,repeated:"sequence",optional:!0})],Hi.prototype,"policyQualifiers",void 0);let _i=Us=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,Us.prototype)}};_i=Us=o([x({type:b.Sequence,itemType:Hi})],_i);let ii=class{constructor(e=0){this.value=e}};o([c({type:h.Integer})],ii.prototype,"value",void 0),ii=o([x({type:b.Choice})],ii);let vc=class extends ii{};vc=o([x({type:b.Choice})],vc);var zs;const Ls="".concat(ue,".31");var Nt;(function(e){e[e.unused=1]="unused",e[e.keyCompromise=2]="keyCompromise",e[e.cACompromise=4]="cACompromise",e[e.affiliationChanged=8]="affiliationChanged",e[e.superseded=16]="superseded",e[e.cessationOfOperation=32]="cessationOfOperation",e[e.certificateHold=64]="certificateHold",e[e.privilegeWithdrawn=128]="privilegeWithdrawn",e[e.aACompromise=256]="aACompromise"})(Nt||(Nt={}));class Cu extends In{toJSON(){const t=[],r=this.toNumber();return r&Nt.aACompromise&&t.push("aACompromise"),r&Nt.affiliationChanged&&t.push("affiliationChanged"),r&Nt.cACompromise&&t.push("cACompromise"),r&Nt.certificateHold&&t.push("certificateHold"),r&Nt.cessationOfOperation&&t.push("cessationOfOperation"),r&Nt.keyCompromise&&t.push("keyCompromise"),r&Nt.privilegeWithdrawn&&t.push("privilegeWithdrawn"),r&Nt.superseded&&t.push("superseded"),r&Nt.unused&&t.push("unused"),t}toString(){return"[".concat(this.toJSON().join(", "),"]")}}let we=class{constructor(e={}){Object.assign(this,e)}};o([c({type:z,context:0,repeated:"sequence",implicit:!0})],we.prototype,"fullName",void 0),o([c({type:Ye,context:1,implicit:!0})],we.prototype,"nameRelativeToCRLIssuer",void 0),we=o([x({type:b.Choice})],we);class We{constructor(t={}){Object.assign(this,t)}}o([c({type:we,context:0,optional:!0})],We.prototype,"distributionPoint",void 0),o([c({type:Cu,context:1,optional:!0,implicit:!0})],We.prototype,"reasons",void 0),o([c({type:z,context:2,optional:!0,repeated:"sequence",implicit:!0})],We.prototype,"cRLIssuer",void 0);let Ge=zs=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,zs.prototype)}};Ge=zs=o([x({type:b.Sequence,itemType:We})],Ge);var $s;let mc=$s=class extends Ge{constructor(e){super(e),Object.setPrototypeOf(this,$s.prototype)}};mc=$s=o([x({type:b.Sequence,itemType:We})],mc);class lt{constructor(t={}){this.onlyContainsUserCerts=lt.ONLY,this.onlyContainsCACerts=lt.ONLY,this.indirectCRL=lt.ONLY,this.onlyContainsAttributeCerts=lt.ONLY,Object.assign(this,t)}}lt.ONLY=!1,o([c({type:we,context:0,optional:!0})],lt.prototype,"distributionPoint",void 0),o([c({type:h.Boolean,context:1,defaultValue:lt.ONLY,implicit:!0})],lt.prototype,"onlyContainsUserCerts",void 0),o([c({type:h.Boolean,context:2,defaultValue:lt.ONLY,implicit:!0})],lt.prototype,"onlyContainsCACerts",void 0),o([c({type:Cu,context:3,optional:!0,implicit:!0})],lt.prototype,"onlySomeReasons",void 0),o([c({type:h.Boolean,context:4,defaultValue:lt.ONLY,implicit:!0})],lt.prototype,"indirectCRL",void 0),o([c({type:h.Boolean,context:5,defaultValue:lt.ONLY,implicit:!0})],lt.prototype,"onlyContainsAttributeCerts",void 0);var br;(function(e){e[e.unspecified=0]="unspecified",e[e.keyCompromise=1]="keyCompromise",e[e.cACompromise=2]="cACompromise",e[e.affiliationChanged=3]="affiliationChanged",e[e.superseded=4]="superseded",e[e.cessationOfOperation=5]="cessationOfOperation",e[e.certificateHold=6]="certificateHold",e[e.removeFromCRL=8]="removeFromCRL",e[e.privilegeWithdrawn=9]="privilegeWithdrawn",e[e.aACompromise=10]="aACompromise"})(br||(br={}));let Ln=class{constructor(e=br.unspecified){this.reason=br.unspecified,this.reason=e}toJSON(){return br[this.reason]}toString(){return this.toJSON()}};o([c({type:h.Enumerated})],Ln.prototype,"reason",void 0),Ln=o([x({type:b.Choice})],Ln);var Hs;const Eu="".concat(ue,".37");let Fi=Hs=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,Hs.prototype)}};Fi=Hs=o([x({type:b.Sequence,itemType:h.ObjectIdentifier})],Fi);const Kh="".concat(sr,".1"),qh="".concat(sr,".2"),Wh="".concat(sr,".3"),Gh="".concat(sr,".4"),Jh="".concat(sr,".8"),Zh="".concat(sr,".9");let $n=class{constructor(e=new ArrayBuffer(0)){this.value=e}};o([c({type:h.Integer,converter:J})],$n.prototype,"value",void 0),$n=o([x({type:b.Choice})],$n);let Hn=class{constructor(e){this.value=new Date,e&&(this.value=e)}};o([c({type:h.GeneralizedTime})],Hn.prototype,"value",void 0),Hn=o([x({type:b.Choice})],Hn);var _s;let wc=_s=class extends pt{constructor(e){super(e),Object.setPrototypeOf(this,_s.prototype)}};wc=_s=o([x({type:b.Sequence})],wc);const Iu="".concat(ue,".15");var Tt;(function(e){e[e.digitalSignature=1]="digitalSignature",e[e.nonRepudiation=2]="nonRepudiation",e[e.keyEncipherment=4]="keyEncipherment",e[e.dataEncipherment=8]="dataEncipherment",e[e.keyAgreement=16]="keyAgreement",e[e.keyCertSign=32]="keyCertSign",e[e.cRLSign=64]="cRLSign",e[e.encipherOnly=128]="encipherOnly",e[e.decipherOnly=256]="decipherOnly"})(Tt||(Tt={}));class _n extends In{toJSON(){const t=this.toNumber(),r=[];return t&Tt.cRLSign&&r.push("crlSign"),t&Tt.dataEncipherment&&r.push("dataEncipherment"),t&Tt.decipherOnly&&r.push("decipherOnly"),t&Tt.digitalSignature&&r.push("digitalSignature"),t&Tt.encipherOnly&&r.push("encipherOnly"),t&Tt.keyAgreement&&r.push("keyAgreement"),t&Tt.keyCertSign&&r.push("keyCertSign"),t&Tt.keyEncipherment&&r.push("keyEncipherment"),t&Tt.nonRepudiation&&r.push("nonRepudiation"),r}toString(){return"[".concat(this.toJSON().join(", "),"]")}}var Fs;class ni{constructor(t={}){this.base=new z,this.minimum=0,Object.assign(this,t)}}o([c({type:z})],ni.prototype,"base",void 0),o([c({type:h.Integer,context:0,defaultValue:0,implicit:!0})],ni.prototype,"minimum",void 0),o([c({type:h.Integer,context:1,optional:!0,implicit:!0})],ni.prototype,"maximum",void 0);let Ki=Fs=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,Fs.prototype)}};Ki=Fs=o([x({type:b.Sequence,itemType:ni})],Ki);class bc{constructor(t={}){Object.assign(this,t)}}o([c({type:Ki,context:0,optional:!0,implicit:!0})],bc.prototype,"permittedSubtrees",void 0),o([c({type:Ki,context:1,optional:!0,implicit:!0})],bc.prototype,"excludedSubtrees",void 0);class Sc{constructor(t={}){Object.assign(this,t)}}o([c({type:h.Integer,context:0,implicit:!0,optional:!0,converter:J})],Sc.prototype,"requireExplicitPolicy",void 0),o([c({type:h.Integer,context:1,implicit:!0,optional:!0,converter:J})],Sc.prototype,"inhibitPolicyMapping",void 0);var Ks;class qs{constructor(t={}){this.issuerDomainPolicy="",this.subjectDomainPolicy="",Object.assign(this,t)}}o([c({type:h.ObjectIdentifier})],qs.prototype,"issuerDomainPolicy",void 0),o([c({type:h.ObjectIdentifier})],qs.prototype,"subjectDomainPolicy",void 0);let Ac=Ks=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,Ks.prototype)}};Ac=Ks=o([x({type:b.Sequence,itemType:qs})],Ac);var Ws;const Ou="".concat(ue,".17");let Gs=Ws=class extends pt{constructor(e){super(e),Object.setPrototypeOf(this,Ws.prototype)}};Gs=Ws=o([x({type:b.Sequence})],Gs);let Qt=class{constructor(e={}){this.type="",this.values=[],Object.assign(this,e)}};o([c({type:h.ObjectIdentifier})],Qt.prototype,"type",void 0),o([c({type:h.Any,repeated:"set"})],Qt.prototype,"values",void 0);var Js;let xc=Js=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,Js.prototype)}};xc=Js=o([x({type:b.Sequence,itemType:Qt})],xc);const Nu="".concat(ue,".14");class ce extends Go{}class kc{constructor(t={}){Object.assign(this,t)}}o([c({type:h.GeneralizedTime,context:0,implicit:!0,optional:!0})],kc.prototype,"notBefore",void 0),o([c({type:h.GeneralizedTime,context:1,implicit:!0,optional:!0})],kc.prototype,"notAfter",void 0);var Sr;(function(e){e[e.keyUpdateAllowed=1]="keyUpdateAllowed",e[e.newExtensions=2]="newExtensions",e[e.pKIXCertificate=4]="pKIXCertificate"})(Sr||(Sr={}));class Tu extends In{toJSON(){const t=[],r=this.toNumber();return r&Sr.pKIXCertificate&&t.push("pKIXCertificate"),r&Sr.newExtensions&&t.push("newExtensions"),r&Sr.keyUpdateAllowed&&t.push("keyUpdateAllowed"),t}toString(){return"[".concat(this.toJSON().join(", "),"]")}}class Bc{constructor(t={}){this.entrustVers="",this.entrustInfoFlags=new Tu,Object.assign(this,t)}}o([c({type:h.GeneralString})],Bc.prototype,"entrustVers",void 0),o([c({type:Tu})],Bc.prototype,"entrustInfoFlags",void 0);var Zs;let Cc=Zs=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,Zs.prototype)}};Cc=Zs=o([x({type:b.Sequence,itemType:Ur})],Cc);class T{constructor(t={}){this.algorithm="",Object.assign(this,t)}isEqual(t){return t instanceof T&&t.algorithm==this.algorithm&&(t.parameters&&this.parameters&&tu(t.parameters,this.parameters)||t.parameters===this.parameters)}}o([c({type:h.ObjectIdentifier})],T.prototype,"algorithm",void 0),o([c({type:h.Any,optional:!0})],T.prototype,"parameters",void 0);class Lt{constructor(t={}){this.algorithm=new T,this.subjectPublicKey=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:T})],Lt.prototype,"algorithm",void 0),o([c({type:h.BitString})],Lt.prototype,"subjectPublicKey",void 0);let at=class{constructor(e){if(e)if(typeof e=="string"||typeof e=="number"||e instanceof Date){const t=new Date(e);t.getUTCFullYear()>2049?this.generalTime=t:this.utcTime=t}else Object.assign(this,e)}getTime(){const e=this.utcTime||this.generalTime;if(!e)throw new Error("Cannot get time from CHOICE object");return e}};o([c({type:h.UTCTime})],at.prototype,"utcTime",void 0),o([c({type:h.GeneralizedTime})],at.prototype,"generalTime",void 0),at=o([x({type:b.Choice})],at);class qi{constructor(t){this.notBefore=new at(new Date),this.notAfter=new at(new Date),t&&(this.notBefore=new at(t.notBefore),this.notAfter=new at(t.notAfter))}}o([c({type:at})],qi.prototype,"notBefore",void 0),o([c({type:at})],qi.prototype,"notAfter",void 0);var Ys;let jt=class Pu{constructor(t={}){this.extnID="",this.critical=Pu.CRITICAL,this.extnValue=new _,Object.assign(this,t)}};jt.CRITICAL=!1,o([c({type:h.ObjectIdentifier})],jt.prototype,"extnID",void 0),o([c({type:h.Boolean,defaultValue:jt.CRITICAL})],jt.prototype,"critical",void 0),o([c({type:_})],jt.prototype,"extnValue",void 0);let Ee=Ys=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,Ys.prototype)}};Ee=Ys=o([x({type:b.Sequence,itemType:jt})],Ee);var Xe;(function(e){e[e.v1=0]="v1",e[e.v2=1]="v2",e[e.v3=2]="v3"})(Xe||(Xe={}));class xt{constructor(t={}){this.version=Xe.v1,this.serialNumber=new ArrayBuffer(0),this.signature=new T,this.issuer=new it,this.validity=new qi,this.subject=new it,this.subjectPublicKeyInfo=new Lt,Object.assign(this,t)}}o([c({type:h.Integer,context:0,defaultValue:Xe.v1})],xt.prototype,"version",void 0),o([c({type:h.Integer,converter:J})],xt.prototype,"serialNumber",void 0),o([c({type:T})],xt.prototype,"signature",void 0),o([c({type:it})],xt.prototype,"issuer",void 0),o([c({type:qi})],xt.prototype,"validity",void 0),o([c({type:it})],xt.prototype,"subject",void 0),o([c({type:Lt})],xt.prototype,"subjectPublicKeyInfo",void 0),o([c({type:h.BitString,context:1,implicit:!0,optional:!0})],xt.prototype,"issuerUniqueID",void 0),o([c({type:h.BitString,context:2,implicit:!0,optional:!0})],xt.prototype,"subjectUniqueID",void 0),o([c({type:Ee,context:3,optional:!0})],xt.prototype,"extensions",void 0);class Je{constructor(t={}){this.tbsCertificate=new xt,this.signatureAlgorithm=new T,this.signatureValue=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:xt})],Je.prototype,"tbsCertificate",void 0),o([c({type:T})],Je.prototype,"signatureAlgorithm",void 0),o([c({type:h.BitString})],Je.prototype,"signatureValue",void 0);class si{constructor(t={}){this.userCertificate=new ArrayBuffer(0),this.revocationDate=new at,Object.assign(this,t)}}o([c({type:h.Integer,converter:J})],si.prototype,"userCertificate",void 0),o([c({type:at})],si.prototype,"revocationDate",void 0),o([c({type:jt,optional:!0,repeated:"sequence"})],si.prototype,"crlEntryExtensions",void 0);class qt{constructor(t={}){this.signature=new T,this.issuer=new it,this.thisUpdate=new at,Object.assign(this,t)}}o([c({type:h.Integer,optional:!0})],qt.prototype,"version",void 0),o([c({type:T})],qt.prototype,"signature",void 0),o([c({type:it})],qt.prototype,"issuer",void 0),o([c({type:at})],qt.prototype,"thisUpdate",void 0),o([c({type:at,optional:!0})],qt.prototype,"nextUpdate",void 0),o([c({type:si,repeated:"sequence",optional:!0})],qt.prototype,"revokedCertificates",void 0),o([c({type:jt,optional:!0,context:0,repeated:"sequence"})],qt.prototype,"crlExtensions",void 0);class Fn{constructor(t={}){this.tbsCertList=new qt,this.signatureAlgorithm=new T,this.signature=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:qt})],Fn.prototype,"tbsCertList",void 0),o([c({type:T})],Fn.prototype,"signatureAlgorithm",void 0),o([c({type:h.BitString})],Fn.prototype,"signature",void 0);class Qe{constructor(t={}){this.issuer=new it,this.serialNumber=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:it})],Qe.prototype,"issuer",void 0),o([c({type:h.Integer,converter:J})],Qe.prototype,"serialNumber",void 0);let $e=class{constructor(e={}){Object.assign(this,e)}};o([c({type:ce,context:0,implicit:!0})],$e.prototype,"subjectKeyIdentifier",void 0),o([c({type:Qe})],$e.prototype,"issuerAndSerialNumber",void 0),$e=o([x({type:b.Choice})],$e);var te;(function(e){e[e.v0=0]="v0",e[e.v1=1]="v1",e[e.v2=2]="v2",e[e.v3=3]="v3",e[e.v4=4]="v4",e[e.v5=5]="v5"})(te||(te={}));let Mr=class extends T{};Mr=o([x({type:b.Sequence})],Mr);let Wi=class extends T{};Wi=o([x({type:b.Sequence})],Wi);let _t=class extends T{};_t=o([x({type:b.Sequence})],_t);let Gi=class extends T{};Gi=o([x({type:b.Sequence})],Gi);let Ec=class extends T{};Ec=o([x({type:b.Sequence})],Ec);let Xs=class extends T{};Xs=o([x({type:b.Sequence})],Xs);let tr=class{constructor(e={}){this.attrType="",this.attrValues=[],Object.assign(this,e)}};o([c({type:h.ObjectIdentifier})],tr.prototype,"attrType",void 0),o([c({type:h.Any,repeated:"set"})],tr.prototype,"attrValues",void 0);var Qs;class zt{constructor(t={}){this.version=te.v0,this.sid=new $e,this.digestAlgorithm=new Mr,this.signatureAlgorithm=new Wi,this.signature=new _,Object.assign(this,t)}}o([c({type:h.Integer})],zt.prototype,"version",void 0),o([c({type:$e})],zt.prototype,"sid",void 0),o([c({type:Mr})],zt.prototype,"digestAlgorithm",void 0),o([c({type:tr,repeated:"set",context:0,implicit:!0,optional:!0})],zt.prototype,"signedAttrs",void 0),o([c({type:Wi})],zt.prototype,"signatureAlgorithm",void 0),o([c({type:_})],zt.prototype,"signature",void 0),o([c({type:tr,repeated:"set",context:1,implicit:!0,optional:!0})],zt.prototype,"unsignedAttrs",void 0);let Ji=Qs=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,Qs.prototype)}};Ji=Qs=o([x({type:b.Set,itemType:zt})],Ji);let Ic=class extends at{};Ic=o([x({type:b.Choice})],Ic);let Oc=class extends zt{};Oc=o([x({type:b.Sequence})],Oc);class Kn{constructor(t={}){this.acIssuer=new z,this.acSerial=0,this.attrs=[],Object.assign(this,t)}}o([c({type:z})],Kn.prototype,"acIssuer",void 0),o([c({type:h.Integer})],Kn.prototype,"acSerial",void 0),o([c({type:Qt,repeated:"sequence"})],Kn.prototype,"attrs",void 0);var to;let Zi=to=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,to.prototype)}};Zi=to=o([x({type:b.Sequence,itemType:h.ObjectIdentifier})],Zi);class Zr{constructor(t={}){this.permitUnSpecified=!0,Object.assign(this,t)}}o([c({type:h.Integer,optional:!0})],Zr.prototype,"pathLenConstraint",void 0),o([c({type:Zi,implicit:!0,context:0,optional:!0})],Zr.prototype,"permittedAttrs",void 0),o([c({type:Zi,implicit:!0,context:1,optional:!0})],Zr.prototype,"excludedAttrs",void 0),o([c({type:h.Boolean,defaultValue:!0})],Zr.prototype,"permitUnSpecified",void 0);class xe{constructor(t={}){this.issuer=new pt,this.serial=new ArrayBuffer(0),this.issuerUID=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:pt})],xe.prototype,"issuer",void 0),o([c({type:h.Integer,converter:J})],xe.prototype,"serial",void 0),o([c({type:h.BitString,optional:!0})],xe.prototype,"issuerUID",void 0);var eo;(function(e){e[e.publicKey=0]="publicKey",e[e.publicKeyCert=1]="publicKeyCert",e[e.otherObjectTypes=2]="otherObjectTypes"})(eo||(eo={}));class be{constructor(t={}){this.digestedObjectType=eo.publicKey,this.digestAlgorithm=new T,this.objectDigest=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:h.Enumerated})],be.prototype,"digestedObjectType",void 0),o([c({type:h.ObjectIdentifier,optional:!0})],be.prototype,"otherObjectTypeID",void 0),o([c({type:T})],be.prototype,"digestAlgorithm",void 0),o([c({type:h.BitString})],be.prototype,"objectDigest",void 0);class oi{constructor(t={}){Object.assign(this,t)}}o([c({type:pt,optional:!0})],oi.prototype,"issuerName",void 0),o([c({type:xe,context:0,implicit:!0,optional:!0})],oi.prototype,"baseCertificateID",void 0),o([c({type:be,context:1,implicit:!0,optional:!0})],oi.prototype,"objectDigestInfo",void 0);let He=class{constructor(e={}){Object.assign(this,e)}};o([c({type:z,repeated:"sequence"})],He.prototype,"v1Form",void 0),o([c({type:oi,context:0,implicit:!0})],He.prototype,"v2Form",void 0),He=o([x({type:b.Choice})],He);class Yi{constructor(t={}){this.notBeforeTime=new Date,this.notAfterTime=new Date,Object.assign(this,t)}}o([c({type:h.GeneralizedTime})],Yi.prototype,"notBeforeTime",void 0),o([c({type:h.GeneralizedTime})],Yi.prototype,"notAfterTime",void 0);class Ar{constructor(t={}){Object.assign(this,t)}}o([c({type:xe,implicit:!0,context:0,optional:!0})],Ar.prototype,"baseCertificateID",void 0),o([c({type:pt,implicit:!0,context:1,optional:!0})],Ar.prototype,"entityName",void 0),o([c({type:be,implicit:!0,context:2,optional:!0})],Ar.prototype,"objectDigestInfo",void 0);var ro;(function(e){e[e.v2=1]="v2"})(ro||(ro={}));class Pt{constructor(t={}){this.version=ro.v2,this.holder=new Ar,this.issuer=new He,this.signature=new T,this.serialNumber=new ArrayBuffer(0),this.attrCertValidityPeriod=new Yi,this.attributes=[],Object.assign(this,t)}}o([c({type:h.Integer})],Pt.prototype,"version",void 0),o([c({type:Ar})],Pt.prototype,"holder",void 0),o([c({type:He})],Pt.prototype,"issuer",void 0),o([c({type:T})],Pt.prototype,"signature",void 0),o([c({type:h.Integer,converter:J})],Pt.prototype,"serialNumber",void 0),o([c({type:Yi})],Pt.prototype,"attrCertValidityPeriod",void 0),o([c({type:Qt,repeated:"sequence"})],Pt.prototype,"attributes",void 0),o([c({type:h.BitString,optional:!0})],Pt.prototype,"issuerUniqueID",void 0),o([c({type:Ee,optional:!0})],Pt.prototype,"extensions",void 0);class ai{constructor(t={}){this.acinfo=new Pt,this.signatureAlgorithm=new T,this.signatureValue=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:Pt})],ai.prototype,"acinfo",void 0),o([c({type:T})],ai.prototype,"signatureAlgorithm",void 0),o([c({type:h.BitString})],ai.prototype,"signatureValue",void 0);var Xi;(function(e){e[e.unmarked=1]="unmarked",e[e.unclassified=2]="unclassified",e[e.restricted=4]="restricted",e[e.confidential=8]="confidential",e[e.secret=16]="secret",e[e.topSecret=32]="topSecret"})(Xi||(Xi={}));class io extends In{}class no{constructor(t={}){this.type="",this.value=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:h.ObjectIdentifier,implicit:!0,context:0})],no.prototype,"type",void 0),o([c({type:h.Any,implicit:!0,context:1})],no.prototype,"value",void 0);class qn{constructor(t={}){this.policyId="",this.classList=new io(Xi.unclassified),Object.assign(this,t)}}o([c({type:h.ObjectIdentifier})],qn.prototype,"policyId",void 0),o([c({type:io,defaultValue:new io(Xi.unclassified)})],qn.prototype,"classList",void 0),o([c({type:no,repeated:"set"})],qn.prototype,"securityCategories",void 0);class ci{constructor(t={}){Object.assign(this,t)}}o([c({type:_})],ci.prototype,"cotets",void 0),o([c({type:h.ObjectIdentifier})],ci.prototype,"oid",void 0),o([c({type:h.Utf8String})],ci.prototype,"string",void 0);class Nc{constructor(t={}){this.values=[],Object.assign(this,t)}}o([c({type:pt,implicit:!0,context:0,optional:!0})],Nc.prototype,"policyAuthority",void 0),o([c({type:ci,repeated:"sequence"})],Nc.prototype,"values",void 0);var so;class li{constructor(t={}){this.targetCertificate=new xe,Object.assign(this,t)}}o([c({type:xe})],li.prototype,"targetCertificate",void 0),o([c({type:z,optional:!0})],li.prototype,"targetName",void 0),o([c({type:be,optional:!0})],li.prototype,"certDigestInfo",void 0);let Ue=class{constructor(e={}){Object.assign(this,e)}};o([c({type:z,context:0,implicit:!0})],Ue.prototype,"targetName",void 0),o([c({type:z,context:1,implicit:!0})],Ue.prototype,"targetGroup",void 0),o([c({type:li,context:2,implicit:!0})],Ue.prototype,"targetCert",void 0),Ue=o([x({type:b.Choice})],Ue);let oo=so=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,so.prototype)}};oo=so=o([x({type:b.Sequence,itemType:Ue})],oo);var ao;let Tc=ao=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,ao.prototype)}};Tc=ao=o([x({type:b.Sequence,itemType:oo})],Tc);class Pc{constructor(t={}){Object.assign(this,t)}}o([c({type:pt,implicit:!0,context:0,optional:!0})],Pc.prototype,"roleAuthority",void 0),o([c({type:z,implicit:!0,context:1})],Pc.prototype,"roleName",void 0);class Wn{constructor(t={}){this.service=new z,this.ident=new z,Object.assign(this,t)}}o([c({type:z})],Wn.prototype,"service",void 0),o([c({type:z})],Wn.prototype,"ident",void 0),o([c({type:_,optional:!0})],Wn.prototype,"authInfo",void 0);var co;class lo{constructor(t={}){this.otherCertFormat="",this.otherCert=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:h.ObjectIdentifier})],lo.prototype,"otherCertFormat",void 0),o([c({type:h.Any})],lo.prototype,"otherCert",void 0);let Me=class{constructor(e={}){Object.assign(this,e)}};o([c({type:Je})],Me.prototype,"certificate",void 0),o([c({type:ai,context:2,implicit:!0})],Me.prototype,"v2AttrCert",void 0),o([c({type:lo,context:3,implicit:!0})],Me.prototype,"other",void 0),Me=o([x({type:b.Choice})],Me);let Qi=co=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,co.prototype)}};Qi=co=o([x({type:b.Set,itemType:Me})],Qi);class er{constructor(t={}){this.contentType="",this.content=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:h.ObjectIdentifier})],er.prototype,"contentType",void 0),o([c({type:h.Any,context:0})],er.prototype,"content",void 0);let hr=class{constructor(e={}){Object.assign(this,e)}};o([c({type:_})],hr.prototype,"single",void 0),o([c({type:h.Any})],hr.prototype,"any",void 0),hr=o([x({type:b.Choice})],hr);class tn{constructor(t={}){this.eContentType="",Object.assign(this,t)}}o([c({type:h.ObjectIdentifier})],tn.prototype,"eContentType",void 0),o([c({type:hr,context:0,optional:!0})],tn.prototype,"eContent",void 0);let fr=class{constructor(e={}){Object.assign(this,e)}};o([c({type:_,context:0,implicit:!0,optional:!0})],fr.prototype,"value",void 0),o([c({type:_,converter:Bh,context:0,implicit:!0,optional:!0,repeated:"sequence"})],fr.prototype,"constructedValue",void 0),fr=o([x({type:b.Choice})],fr);class xr{constructor(t={}){this.contentType="",this.contentEncryptionAlgorithm=new Gi,Object.assign(this,t)}}o([c({type:h.ObjectIdentifier})],xr.prototype,"contentType",void 0),o([c({type:Gi})],xr.prototype,"contentEncryptionAlgorithm",void 0),o([c({type:fr,optional:!0})],xr.prototype,"encryptedContent",void 0);class en{constructor(t={}){this.keyAttrId="",Object.assign(this,t)}}o([c({type:h.ObjectIdentifier})],en.prototype,"keyAttrId",void 0),o([c({type:h.Any,optional:!0})],en.prototype,"keyAttr",void 0);var uo;class ui{constructor(t={}){this.subjectKeyIdentifier=new ce,Object.assign(this,t)}}o([c({type:ce})],ui.prototype,"subjectKeyIdentifier",void 0),o([c({type:h.GeneralizedTime,optional:!0})],ui.prototype,"date",void 0),o([c({type:en,optional:!0})],ui.prototype,"other",void 0);let _e=class{constructor(e={}){Object.assign(this,e)}};o([c({type:ui,context:0,implicit:!0,optional:!0})],_e.prototype,"rKeyId",void 0),o([c({type:Qe,optional:!0})],_e.prototype,"issuerAndSerialNumber",void 0),_e=o([x({type:b.Choice})],_e);class po{constructor(t={}){this.rid=new _e,this.encryptedKey=new _,Object.assign(this,t)}}o([c({type:_e})],po.prototype,"rid",void 0),o([c({type:_})],po.prototype,"encryptedKey",void 0);let rn=uo=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,uo.prototype)}};rn=uo=o([x({type:b.Sequence,itemType:po})],rn);class ho{constructor(t={}){this.algorithm=new T,this.publicKey=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:T})],ho.prototype,"algorithm",void 0),o([c({type:h.BitString})],ho.prototype,"publicKey",void 0);let de=class{constructor(e={}){Object.assign(this,e)}};o([c({type:ce,context:0,implicit:!0,optional:!0})],de.prototype,"subjectKeyIdentifier",void 0),o([c({type:ho,context:1,implicit:!0,optional:!0})],de.prototype,"originatorKey",void 0),o([c({type:Qe,optional:!0})],de.prototype,"issuerAndSerialNumber",void 0),de=o([x({type:b.Choice})],de);class Ve{constructor(t={}){this.version=te.v3,this.originator=new de,this.keyEncryptionAlgorithm=new _t,this.recipientEncryptedKeys=new rn,Object.assign(this,t)}}o([c({type:h.Integer})],Ve.prototype,"version",void 0),o([c({type:de,context:0})],Ve.prototype,"originator",void 0),o([c({type:_,context:1,optional:!0})],Ve.prototype,"ukm",void 0),o([c({type:_t})],Ve.prototype,"keyEncryptionAlgorithm",void 0),o([c({type:rn})],Ve.prototype,"recipientEncryptedKeys",void 0);let Fe=class{constructor(e={}){Object.assign(this,e)}};o([c({type:ce,context:0,implicit:!0})],Fe.prototype,"subjectKeyIdentifier",void 0),o([c({type:Qe})],Fe.prototype,"issuerAndSerialNumber",void 0),Fe=o([x({type:b.Choice})],Fe);class dr{constructor(t={}){this.version=te.v0,this.rid=new Fe,this.keyEncryptionAlgorithm=new _t,this.encryptedKey=new _,Object.assign(this,t)}}o([c({type:h.Integer})],dr.prototype,"version",void 0),o([c({type:Fe})],dr.prototype,"rid",void 0),o([c({type:_t})],dr.prototype,"keyEncryptionAlgorithm",void 0),o([c({type:_})],dr.prototype,"encryptedKey",void 0);class kr{constructor(t={}){this.keyIdentifier=new _,Object.assign(this,t)}}o([c({type:_})],kr.prototype,"keyIdentifier",void 0),o([c({type:h.GeneralizedTime,optional:!0})],kr.prototype,"date",void 0),o([c({type:en,optional:!0})],kr.prototype,"other",void 0);class yr{constructor(t={}){this.version=te.v4,this.kekid=new kr,this.keyEncryptionAlgorithm=new _t,this.encryptedKey=new _,Object.assign(this,t)}}o([c({type:h.Integer})],yr.prototype,"version",void 0),o([c({type:kr})],yr.prototype,"kekid",void 0),o([c({type:_t})],yr.prototype,"keyEncryptionAlgorithm",void 0),o([c({type:_})],yr.prototype,"encryptedKey",void 0);class gr{constructor(t={}){this.version=te.v0,this.keyEncryptionAlgorithm=new _t,this.encryptedKey=new _,Object.assign(this,t)}}o([c({type:h.Integer})],gr.prototype,"version",void 0),o([c({type:Xs,context:0,optional:!0})],gr.prototype,"keyDerivationAlgorithm",void 0),o([c({type:_t})],gr.prototype,"keyEncryptionAlgorithm",void 0),o([c({type:_})],gr.prototype,"encryptedKey",void 0);class fo{constructor(t={}){this.oriType="",this.oriValue=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:h.ObjectIdentifier})],fo.prototype,"oriType",void 0),o([c({type:h.Any})],fo.prototype,"oriValue",void 0);let ie=class{constructor(e={}){Object.assign(this,e)}};o([c({type:dr,optional:!0})],ie.prototype,"ktri",void 0),o([c({type:Ve,context:1,implicit:!0,optional:!0})],ie.prototype,"kari",void 0),o([c({type:yr,context:2,implicit:!0,optional:!0})],ie.prototype,"kekri",void 0),o([c({type:gr,context:3,implicit:!0,optional:!0})],ie.prototype,"pwri",void 0),o([c({type:fo,context:4,implicit:!0,optional:!0})],ie.prototype,"ori",void 0),ie=o([x({type:b.Choice})],ie);var yo;let nn=yo=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,yo.prototype)}};nn=yo=o([x({type:b.Set,itemType:ie})],nn);var go;class sn{constructor(t={}){this.otherRevInfoFormat="",this.otherRevInfo=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:h.ObjectIdentifier})],sn.prototype,"otherRevInfoFormat",void 0),o([c({type:h.Any})],sn.prototype,"otherRevInfo",void 0);let pi=class{constructor(e={}){this.other=new sn,Object.assign(this,e)}};o([c({type:sn,context:1,implicit:!0})],pi.prototype,"other",void 0),pi=o([x({type:b.Choice})],pi);let on=go=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,go.prototype)}};on=go=o([x({type:b.Set,itemType:pi})],on);class vo{constructor(t={}){Object.assign(this,t)}}o([c({type:Qi,context:0,implicit:!0,optional:!0})],vo.prototype,"certs",void 0),o([c({type:on,context:1,implicit:!0,optional:!0})],vo.prototype,"crls",void 0);var mo;let wo=mo=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,mo.prototype)}};wo=mo=o([x({type:b.Set,itemType:tr})],wo);class pr{constructor(t={}){this.version=te.v0,this.recipientInfos=new nn,this.encryptedContentInfo=new xr,Object.assign(this,t)}}o([c({type:h.Integer})],pr.prototype,"version",void 0),o([c({type:vo,context:0,implicit:!0,optional:!0})],pr.prototype,"originatorInfo",void 0),o([c({type:nn})],pr.prototype,"recipientInfos",void 0),o([c({type:xr})],pr.prototype,"encryptedContentInfo",void 0),o([c({type:wo,context:1,implicit:!0,optional:!0})],pr.prototype,"unprotectedAttrs",void 0);const Yh="1.2.840.113549.1.7.2";var bo;let an=bo=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,bo.prototype)}};an=bo=o([x({type:b.Set,itemType:Mr})],an);class De{constructor(t={}){this.version=te.v0,this.digestAlgorithms=new an,this.encapContentInfo=new tn,this.signerInfos=new Ji,Object.assign(this,t)}}o([c({type:h.Integer})],De.prototype,"version",void 0),o([c({type:an})],De.prototype,"digestAlgorithms",void 0),o([c({type:tn})],De.prototype,"encapContentInfo",void 0),o([c({type:Qi,context:0,implicit:!0,optional:!0})],De.prototype,"certificates",void 0),o([c({type:on,context:1,implicit:!0,optional:!0})],De.prototype,"crls",void 0),o([c({type:Ji})],De.prototype,"signerInfos",void 0);const Vr="1.2.840.10045.2.1",Jo="1.2.840.10045.4.1",Du="1.2.840.10045.4.3.1",Zo="1.2.840.10045.4.3.2",Yo="1.2.840.10045.4.3.3",Xo="1.2.840.10045.4.3.4",Dc="1.2.840.10045.3.1.7",jc="1.3.132.0.34",Uc="1.3.132.0.35";function $r(e){return new T({algorithm:e})}const Xh=$r(Jo);$r(Du);const Qh=$r(Zo),tf=$r(Yo),ef=$r(Xo);let vr=class{constructor(e={}){Object.assign(this,e)}};o([c({type:h.ObjectIdentifier})],vr.prototype,"fieldType",void 0),o([c({type:h.Any})],vr.prototype,"parameters",void 0),vr=o([x({type:b.Sequence})],vr);class rf extends _{}let Re=class{constructor(e={}){Object.assign(this,e)}};o([c({type:h.OctetString})],Re.prototype,"a",void 0),o([c({type:h.OctetString})],Re.prototype,"b",void 0),o([c({type:h.BitString,optional:!0})],Re.prototype,"seed",void 0),Re=o([x({type:b.Sequence})],Re);var So;(function(e){e[e.ecpVer1=1]="ecpVer1"})(So||(So={}));let Kt=class{constructor(e={}){this.version=So.ecpVer1,Object.assign(this,e)}};o([c({type:h.Integer})],Kt.prototype,"version",void 0),o([c({type:vr})],Kt.prototype,"fieldID",void 0),o([c({type:Re})],Kt.prototype,"curve",void 0),o([c({type:rf})],Kt.prototype,"base",void 0),o([c({type:h.Integer,converter:J})],Kt.prototype,"order",void 0),o([c({type:h.Integer,optional:!0})],Kt.prototype,"cofactor",void 0),Kt=o([x({type:b.Sequence})],Kt);let ne=class{constructor(e={}){Object.assign(this,e)}};o([c({type:h.ObjectIdentifier})],ne.prototype,"namedCurve",void 0),o([c({type:h.Null})],ne.prototype,"implicitCurve",void 0),o([c({type:Kt})],ne.prototype,"specifiedCurve",void 0),ne=o([x({type:b.Choice})],ne);class Yr{constructor(t={}){this.version=1,this.privateKey=new _,Object.assign(this,t)}}o([c({type:h.Integer})],Yr.prototype,"version",void 0),o([c({type:_})],Yr.prototype,"privateKey",void 0),o([c({type:ne,context:0,optional:!0})],Yr.prototype,"parameters",void 0),o([c({type:h.BitString,context:1,optional:!0})],Yr.prototype,"publicKey",void 0);class cn{constructor(t={}){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:h.Integer,converter:J})],cn.prototype,"r",void 0),o([c({type:h.Integer,converter:J})],cn.prototype,"s",void 0);const mt="1.2.840.113549.1.1",Ie="".concat(mt,".1"),nf="".concat(mt,".7"),sf="".concat(mt,".9"),Br="".concat(mt,".10"),of="".concat(mt,".2"),af="".concat(mt,".4"),ln="".concat(mt,".5"),cf="".concat(mt,".14"),Ao="".concat(mt,".11"),un="".concat(mt,".12"),pn="".concat(mt,".13"),Mc="".concat(mt,".15"),Vc="".concat(mt,".16"),hn="1.3.14.3.2.26",ju="2.16.840.1.101.3.4.2.4",fn="2.16.840.1.101.3.4.2.1",dn="2.16.840.1.101.3.4.2.2",yn="2.16.840.1.101.3.4.2.3",lf="2.16.840.1.101.3.4.2.5",uf="2.16.840.1.101.3.4.2.6",pf="1.2.840.113549.2.2",hf="1.2.840.113549.2.5",Nn="".concat(mt,".8");function rt(e){return new T({algorithm:e,parameters:null})}rt(pf),rt(hf);const Oe=rt(hn);rt(ju),rt(fn),rt(dn),rt(yn),rt(lf),rt(uf);const Uu=new T({algorithm:Nn,parameters:I.serialize(Oe)}),Mu=new T({algorithm:sf,parameters:I.serialize(zi.toASN(new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer))});rt(Ie),rt(of),rt(af),rt(ln),rt(Mc),rt(Vc),rt(un),rt(pn),rt(Mc),rt(Vc);class Xr{constructor(t={}){this.hashAlgorithm=new T(Oe),this.maskGenAlgorithm=new T({algorithm:Nn,parameters:I.serialize(Oe)}),this.pSourceAlgorithm=new T(Mu),Object.assign(this,t)}}o([c({type:T,context:0,defaultValue:Oe})],Xr.prototype,"hashAlgorithm",void 0),o([c({type:T,context:1,defaultValue:Uu})],Xr.prototype,"maskGenAlgorithm",void 0),o([c({type:T,context:2,defaultValue:Mu})],Xr.prototype,"pSourceAlgorithm",void 0),new T({algorithm:nf,parameters:I.serialize(new Xr)});class ye{constructor(t={}){this.hashAlgorithm=new T(Oe),this.maskGenAlgorithm=new T({algorithm:Nn,parameters:I.serialize(Oe)}),this.saltLength=20,this.trailerField=1,Object.assign(this,t)}}o([c({type:T,context:0,defaultValue:Oe})],ye.prototype,"hashAlgorithm",void 0),o([c({type:T,context:1,defaultValue:Uu})],ye.prototype,"maskGenAlgorithm",void 0),o([c({type:h.Integer,context:2,defaultValue:20})],ye.prototype,"saltLength",void 0),o([c({type:h.Integer,context:3,defaultValue:1})],ye.prototype,"trailerField",void 0),new T({algorithm:Br,parameters:I.serialize(new ye)});class gn{constructor(t={}){this.digestAlgorithm=new T,this.digest=new _,Object.assign(this,t)}}o([c({type:T})],gn.prototype,"digestAlgorithm",void 0),o([c({type:_})],gn.prototype,"digest",void 0);var xo;class hi{constructor(t={}){this.prime=new ArrayBuffer(0),this.exponent=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:h.Integer,converter:J})],hi.prototype,"prime",void 0),o([c({type:h.Integer,converter:J})],hi.prototype,"exponent",void 0),o([c({type:h.Integer,converter:J})],hi.prototype,"coefficient",void 0);let ko=xo=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,xo.prototype)}};ko=xo=o([x({type:b.Sequence,itemType:hi})],ko);class Rt{constructor(t={}){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:h.Integer})],Rt.prototype,"version",void 0),o([c({type:h.Integer,converter:J})],Rt.prototype,"modulus",void 0),o([c({type:h.Integer,converter:J})],Rt.prototype,"publicExponent",void 0),o([c({type:h.Integer,converter:J})],Rt.prototype,"privateExponent",void 0),o([c({type:h.Integer,converter:J})],Rt.prototype,"prime1",void 0),o([c({type:h.Integer,converter:J})],Rt.prototype,"prime2",void 0),o([c({type:h.Integer,converter:J})],Rt.prototype,"exponent1",void 0),o([c({type:h.Integer,converter:J})],Rt.prototype,"exponent2",void 0),o([c({type:h.Integer,converter:J})],Rt.prototype,"coefficient",void 0),o([c({type:ko,optional:!0})],Rt.prototype,"otherPrimeInfos",void 0);class Bo{constructor(t={}){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:h.Integer,converter:J})],Bo.prototype,"modulus",void 0),o([c({type:h.Integer,converter:J})],Bo.prototype,"publicExponent",void 0);var Co;(function(e){e[e.Transient=0]="Transient",e[e.Singleton=1]="Singleton",e[e.ResolutionScoped=2]="ResolutionScoped",e[e.ContainerScoped=3]="ContainerScoped"})(Co||(Co={}));const dt=Co;var Eo=function(e,t){return Eo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Eo(e,t)};function Qo(e,t){Eo(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function ff(e,t,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function l(A){try{f(i.next(A))}catch(w){a(w)}}function u(A){try{f(i.throw(A))}catch(w){a(w)}}function f(A){A.done?s(A.value):n(A.value).then(l,u)}f((i=i.apply(e,[])).next())})}function df(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(f){return function(A){return u([f,A])}}function u(f){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=f[0]&2?n.return:f[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,f[1])).done)return s;switch(n=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,n=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){r.label=f[1];break}if(f[0]===6&&r.label<s[1]){r.label=s[1],s=f;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(f);break}s[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(A){f=[6,A],n=0}finally{i=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function Qr(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function vn(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),n,s=[],a;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){a={error:l}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return s}function ge(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(vn(arguments[t]));return e}var yf="injectionTokens";function gf(e){var t=Reflect.getMetadata("design:paramtypes",e)||[],r=Reflect.getOwnMetadata(yf,e)||{};return Object.keys(r).forEach(function(i){t[+i]=r[i]}),t}function Vu(e){return!!e.useClass}function Io(e){return!!e.useFactory}var Ru=function(){function e(t){this.wrap=t,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return e.prototype.createProxy=function(t){var r=this,i={},n=!1,s,a=function(){return n||(s=t(r.wrap()),n=!0),s};return new Proxy(i,this.createHandler(a))},e.prototype.createHandler=function(t){var r={},i=function(n){r[n]=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];s[0]=t();var l=Reflect[n];return l.apply(void 0,ge(s))}};return this.reflectMethods.forEach(i),r},e}();function je(e){return typeof e=="string"||typeof e=="symbol"}function vf(e){return typeof e=="object"&&"token"in e&&"multiple"in e}function Rc(e){return typeof e=="object"&&"token"in e&&"transform"in e}function mf(e){return typeof e=="function"||e instanceof Ru}function fi(e){return!!e.useToken}function di(e){return e.useValue!=null}function wf(e){return Vu(e)||di(e)||fi(e)||Io(e)}var ta=function(){function e(){this._registryMap=new Map}return e.prototype.entries=function(){return this._registryMap.entries()},e.prototype.getAll=function(t){return this.ensure(t),this._registryMap.get(t)},e.prototype.get=function(t){this.ensure(t);var r=this._registryMap.get(t);return r[r.length-1]||null},e.prototype.set=function(t,r){this.ensure(t),this._registryMap.get(t).push(r)},e.prototype.setAll=function(t,r){this._registryMap.set(t,r)},e.prototype.has=function(t){return this.ensure(t),this._registryMap.get(t).length>0},e.prototype.clear=function(){this._registryMap.clear()},e.prototype.ensure=function(t){this._registryMap.has(t)||this._registryMap.set(t,[])},e}(),bf=function(e){Qo(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(ta),zc=function(){function e(){this.scopedResolutions=new Map}return e}();function Sf(e,t){if(e===null)return"at position #"+t;var r=e.split(",")[t].trim();return'"'+r+'" at position #'+t}function Af(e,t,r){return r===void 0&&(r="    "),ge([e],t.message.split("\n").map(function(i){return r+i})).join("\n")}function xf(e,t,r){var i=vn(e.toString().match(/constructor\(([\w, ]+)\)/)||[],2),n=i[1],s=n===void 0?null:n,a=Sf(s,t);return Af("Cannot inject the dependency "+a+' of "'+e.name+'" constructor. Reason:',r)}function kf(e){if(typeof e.dispose!="function")return!1;var t=e.dispose;return!(t.length>0)}var Bf=function(e){Qo(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(ta),Cf=function(e){Qo(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(ta),Ef=function(){function e(){this.preResolution=new Bf,this.postResolution=new Cf}return e}(),zu=new Map,If=function(){function e(t){this.parent=t,this._registry=new bf,this.interceptors=new Ef,this.disposed=!1,this.disposables=new Set}return e.prototype.register=function(t,r,i){i===void 0&&(i={lifecycle:dt.Transient}),this.ensureNotDisposed();var n;if(wf(r)?n=r:n={useClass:r},fi(n))for(var s=[t],a=n;a!=null;){var l=a.useToken;if(s.includes(l))throw new Error("Token registration cycle detected! "+ge(s,[l]).join(" -> "));s.push(l);var u=this._registry.get(l);u&&fi(u.provider)?a=u.provider:a=null}if((i.lifecycle===dt.Singleton||i.lifecycle==dt.ContainerScoped||i.lifecycle==dt.ResolutionScoped)&&(di(n)||Io(n)))throw new Error('Cannot use lifecycle "'+dt[i.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(t,{provider:n,options:i}),this},e.prototype.registerType=function(t,r){return this.ensureNotDisposed(),je(r)?this.register(t,{useToken:r}):this.register(t,{useClass:r})},e.prototype.registerInstance=function(t,r){return this.ensureNotDisposed(),this.register(t,{useValue:r})},e.prototype.registerSingleton=function(t,r){if(this.ensureNotDisposed(),je(t)){if(je(r))return this.register(t,{useToken:r},{lifecycle:dt.Singleton});if(r)return this.register(t,{useClass:r},{lifecycle:dt.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var i=t;return r&&!je(r)&&(i=r),this.register(t,{useClass:i},{lifecycle:dt.Singleton})},e.prototype.resolve=function(t,r){r===void 0&&(r=new zc),this.ensureNotDisposed();var i=this.getRegistration(t);if(!i&&je(t))throw new Error('Attempted to resolve unregistered dependency token: "'+t.toString()+'"');if(this.executePreResolutionInterceptor(t,"Single"),i){var n=this.resolveRegistration(i,r);return this.executePostResolutionInterceptor(t,n,"Single"),n}if(mf(t)){var n=this.construct(t,r);return this.executePostResolutionInterceptor(t,n,"Single"),n}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},e.prototype.executePreResolutionInterceptor=function(t,r){var i,n;if(this.interceptors.preResolution.has(t)){var s=[];try{for(var a=Qr(this.interceptors.preResolution.getAll(t)),l=a.next();!l.done;l=a.next()){var u=l.value;u.options.frequency!="Once"&&s.push(u),u.callback(t,r)}}catch(f){i={error:f}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}this.interceptors.preResolution.setAll(t,s)}},e.prototype.executePostResolutionInterceptor=function(t,r,i){var n,s;if(this.interceptors.postResolution.has(t)){var a=[];try{for(var l=Qr(this.interceptors.postResolution.getAll(t)),u=l.next();!u.done;u=l.next()){var f=u.value;f.options.frequency!="Once"&&a.push(f),f.callback(t,r,i)}}catch(A){n={error:A}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}this.interceptors.postResolution.setAll(t,a)}},e.prototype.resolveRegistration=function(t,r){if(this.ensureNotDisposed(),t.options.lifecycle===dt.ResolutionScoped&&r.scopedResolutions.has(t))return r.scopedResolutions.get(t);var i=t.options.lifecycle===dt.Singleton,n=t.options.lifecycle===dt.ContainerScoped,s=i||n,a;return di(t.provider)?a=t.provider.useValue:fi(t.provider)?a=s?t.instance||(t.instance=this.resolve(t.provider.useToken,r)):this.resolve(t.provider.useToken,r):Vu(t.provider)?a=s?t.instance||(t.instance=this.construct(t.provider.useClass,r)):this.construct(t.provider.useClass,r):Io(t.provider)?a=t.provider.useFactory(this):a=this.construct(t.provider,r),t.options.lifecycle===dt.ResolutionScoped&&r.scopedResolutions.set(t,a),a},e.prototype.resolveAll=function(t,r){var i=this;r===void 0&&(r=new zc),this.ensureNotDisposed();var n=this.getAllRegistrations(t);if(!n&&je(t))throw new Error('Attempted to resolve unregistered dependency token: "'+t.toString()+'"');if(this.executePreResolutionInterceptor(t,"All"),n){var s=n.map(function(l){return i.resolveRegistration(l,r)});return this.executePostResolutionInterceptor(t,s,"All"),s}var a=[this.construct(t,r)];return this.executePostResolutionInterceptor(t,a,"All"),a},e.prototype.isRegistered=function(t,r){return r===void 0&&(r=!1),this.ensureNotDisposed(),this._registry.has(t)||r&&(this.parent||!1)&&this.parent.isRegistered(t,!0)},e.prototype.reset=function(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},e.prototype.clearInstances=function(){var t,r;this.ensureNotDisposed();try{for(var i=Qr(this._registry.entries()),n=i.next();!n.done;n=i.next()){var s=vn(n.value,2),a=s[0],l=s[1];this._registry.setAll(a,l.filter(function(u){return!di(u.provider)}).map(function(u){return u.instance=void 0,u}))}}catch(u){t={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.createChildContainer=function(){var t,r;this.ensureNotDisposed();var i=new e(this);try{for(var n=Qr(this._registry.entries()),s=n.next();!s.done;s=n.next()){var a=vn(s.value,2),l=a[0],u=a[1];u.some(function(f){var A=f.options;return A.lifecycle===dt.ContainerScoped})&&i._registry.setAll(l,u.map(function(f){return f.options.lifecycle===dt.ContainerScoped?{provider:f.provider,options:f.options}:f}))}}catch(f){t={error:f}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return i},e.prototype.beforeResolution=function(t,r,i){i===void 0&&(i={frequency:"Always"}),this.interceptors.preResolution.set(t,{callback:r,options:i})},e.prototype.afterResolution=function(t,r,i){i===void 0&&(i={frequency:"Always"}),this.interceptors.postResolution.set(t,{callback:r,options:i})},e.prototype.dispose=function(){return ff(this,void 0,void 0,function(){var t;return df(this,function(r){switch(r.label){case 0:return this.disposed=!0,t=[],this.disposables.forEach(function(i){var n=i.dispose();n&&t.push(n)}),[4,Promise.all(t)];case 1:return r.sent(),[2]}})})},e.prototype.getRegistration=function(t){return this.isRegistered(t)?this._registry.get(t):this.parent?this.parent.getRegistration(t):null},e.prototype.getAllRegistrations=function(t){return this.isRegistered(t)?this._registry.getAll(t):this.parent?this.parent.getAllRegistrations(t):null},e.prototype.construct=function(t,r){var i=this;if(t instanceof Ru)return t.createProxy(function(s){return i.resolve(s,r)});var n=function(){var s=zu.get(t);if(!s||s.length===0){if(t.length===0)return new t;throw new Error('TypeInfo not known for "'+t.name+'"')}var a=s.map(i.resolveParams(r,t));return new(t.bind.apply(t,ge([void 0],a)))}();return kf(n)&&this.disposables.add(n),n},e.prototype.resolveParams=function(t,r){var i=this;return function(n,s){var a,l,u;try{return vf(n)?Rc(n)?n.multiple?(a=i.resolve(n.transform)).transform.apply(a,ge([i.resolveAll(n.token)],n.transformArgs)):(l=i.resolve(n.transform)).transform.apply(l,ge([i.resolve(n.token,t)],n.transformArgs)):n.multiple?i.resolveAll(n.token):i.resolve(n.token,t):Rc(n)?(u=i.resolve(n.transform,t)).transform.apply(u,ge([i.resolve(n.token,t)],n.transformArgs)):i.resolve(n,t)}catch(f){throw new Error(xf(r,s,f))}}},e.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},e}(),ht=new If;function Tn(){return function(e){zu.set(e,gf(e))}}if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error("tsyringe requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point.");var Oo;class mn{constructor(t={}){this.attrId="",this.attrValues=[],Object.assign(t)}}o([c({type:h.ObjectIdentifier})],mn.prototype,"attrId",void 0),o([c({type:h.Any,repeated:"set"})],mn.prototype,"attrValues",void 0);let Lc=Oo=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,Oo.prototype)}};Lc=Oo=o([x({type:b.Sequence,itemType:mn})],Lc);var No;let $c=No=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,No.prototype)}};$c=No=o([x({type:b.Sequence,itemType:er})],$c);class Hc{constructor(t={}){this.certId="",this.certValue=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:h.ObjectIdentifier})],Hc.prototype,"certId",void 0),o([c({type:h.Any,context:0})],Hc.prototype,"certValue",void 0);class _c{constructor(t={}){this.crlId="",this.crltValue=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:h.ObjectIdentifier})],_c.prototype,"crlId",void 0),o([c({type:h.Any,context:0})],_c.prototype,"crltValue",void 0);class Lu extends _{}let wn=class{constructor(e={}){this.encryptionAlgorithm=new T,this.encryptedData=new Lu,Object.assign(this,e)}};o([c({type:T})],wn.prototype,"encryptionAlgorithm",void 0),o([c({type:Lu})],wn.prototype,"encryptedData",void 0);var To,Po;(function(e){e[e.v1=0]="v1"})(Po||(Po={}));class $u extends _{}let Do=To=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,To.prototype)}};Do=To=o([x({type:b.Sequence,itemType:Qt})],Do);class mr{constructor(t={}){this.version=Po.v1,this.privateKeyAlgorithm=new T,this.privateKey=new $u,Object.assign(this,t)}}o([c({type:h.Integer})],mr.prototype,"version",void 0),o([c({type:T})],mr.prototype,"privateKeyAlgorithm",void 0),o([c({type:$u})],mr.prototype,"privateKey",void 0),o([c({type:Do,implicit:!0,context:0,optional:!0})],mr.prototype,"attributes",void 0);let Fc=class extends mr{};Fc=o([x({type:b.Sequence})],Fc);let Kc=class extends wn{};Kc=o([x({type:b.Sequence})],Kc);class qc{constructor(t={}){this.secretTypeId="",this.secretValue=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:h.ObjectIdentifier})],qc.prototype,"secretTypeId",void 0),o([c({type:h.Any,context:0})],qc.prototype,"secretValue",void 0);class Cr{constructor(t={}){this.mac=new gn,this.macSalt=new _,this.iterations=1,Object.assign(this,t)}}o([c({type:gn})],Cr.prototype,"mac",void 0),o([c({type:_})],Cr.prototype,"macSalt",void 0),o([c({type:h.Integer,defaultValue:1})],Cr.prototype,"iterations",void 0);class yi{constructor(t={}){this.version=3,this.authSafe=new er,this.macData=new Cr,Object.assign(this,t)}}o([c({type:h.Integer})],yi.prototype,"version",void 0),o([c({type:er})],yi.prototype,"authSafe",void 0),o([c({type:Cr,optional:!0})],yi.prototype,"macData",void 0);var jo;class gi{constructor(t={}){this.bagId="",this.bagValue=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:h.ObjectIdentifier})],gi.prototype,"bagId",void 0),o([c({type:h.Any,context:0})],gi.prototype,"bagValue",void 0),o([c({type:mn,repeated:"set",optional:!0})],gi.prototype,"bagAttributes",void 0);let Wc=jo=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,jo.prototype)}};Wc=jo=o([x({type:b.Sequence,itemType:gi})],Wc);var Uo,Mo,Vo;const Hu="1.2.840.113549.1.9",_u="".concat(Hu,".7"),ea="".concat(Hu,".14");let vi=class extends ot{constructor(e={}){super(e)}toString(){return this.ia5String||super.toString()}};o([c({type:h.IA5String})],vi.prototype,"ia5String",void 0),vi=o([x({type:b.Choice})],vi);let Gc=class extends er{};Gc=o([x({type:b.Sequence})],Gc);let Jc=class extends yi{};Jc=o([x({type:b.Sequence})],Jc);let Zc=class extends wn{};Zc=o([x({type:b.Sequence})],Zc);let Gn=class{constructor(e=""){this.value=e}toString(){return this.value}};o([c({type:h.IA5String})],Gn.prototype,"value",void 0),Gn=o([x({type:b.Choice})],Gn);let Yc=class extends vi{};Yc=o([x({type:b.Choice})],Yc);let Xc=class extends ot{};Xc=o([x({type:b.Choice})],Xc);let Jn=class{constructor(e=new Date){this.value=e}};o([c({type:h.GeneralizedTime})],Jn.prototype,"value",void 0),Jn=o([x({type:b.Choice})],Jn);let Qc=class extends ot{};Qc=o([x({type:b.Choice})],Qc);let Zn=class{constructor(e="M"){this.value=e}toString(){return this.value}};o([c({type:h.PrintableString})],Zn.prototype,"value",void 0),Zn=o([x({type:b.Choice})],Zn);let mi=class{constructor(e=""){this.value=e}toString(){return this.value}};o([c({type:h.PrintableString})],mi.prototype,"value",void 0),mi=o([x({type:b.Choice})],mi);let tl=class extends mi{};tl=o([x({type:b.Choice})],tl);let el=class extends ot{};el=o([x({type:b.Choice})],el);let Yn=class{constructor(e=""){this.value=e}toString(){return this.value}};o([c({type:h.ObjectIdentifier})],Yn.prototype,"value",void 0),Yn=o([x({type:b.Choice})],Yn);let rl=class extends at{};rl=o([x({type:b.Choice})],rl);let Xn=class{constructor(e=0){this.value=e}toString(){return this.value.toString()}};o([c({type:h.Integer})],Xn.prototype,"value",void 0),Xn=o([x({type:b.Choice})],Xn);let il=class extends zt{};il=o([x({type:b.Sequence})],il);let bn=class extends ot{};bn=o([x({type:b.Choice})],bn);let nl=Uo=class extends Ee{constructor(e){super(e),Object.setPrototypeOf(this,Uo.prototype)}};nl=Uo=o([x({type:b.Sequence})],nl);let sl=Mo=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,Mo.prototype)}};sl=Mo=o([x({type:b.Set,itemType:tr})],sl);let Qn=class{constructor(e=""){this.value=e}toString(){return this.value}};o([c({type:h.BmpString})],Qn.prototype,"value",void 0),Qn=o([x({type:b.Choice})],Qn);let Ro=class extends T{};Ro=o([x({type:b.Sequence})],Ro);let ol=Vo=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,Vo.prototype)}};ol=Vo=o([x({type:b.Sequence,itemType:Ro})],ol);var zo;let Sn=zo=class extends q{constructor(e){super(e),Object.setPrototypeOf(this,zo.prototype)}};Sn=zo=o([x({type:b.Sequence,itemType:Qt})],Sn);class Ke{constructor(t={}){this.version=0,this.subject=new it,this.subjectPKInfo=new Lt,this.attributes=new Sn,Object.assign(this,t)}}o([c({type:h.Integer})],Ke.prototype,"version",void 0),o([c({type:it})],Ke.prototype,"subject",void 0),o([c({type:Lt})],Ke.prototype,"subjectPKInfo",void 0),o([c({type:Sn,implicit:!0,context:0})],Ke.prototype,"attributes",void 0);class Er{constructor(t={}){this.certificationRequestInfo=new Ke,this.signatureAlgorithm=new T,this.signature=new ArrayBuffer(0),Object.assign(this,t)}}o([c({type:Ke})],Er.prototype,"certificationRequestInfo",void 0),o([c({type:T})],Er.prototype,"signatureAlgorithm",void 0),o([c({type:h.BitString})],Er.prototype,"signature",void 0);const Hr="crypto.algorithm";class Of{getAlgorithms(){return ht.resolveAll(Hr)}toAsnAlgorithm(t){L({},t);for(const r of this.getAlgorithms()){const i=r.toAsnAlgorithm(t);if(i)return i}if(/^[0-9.]+$/.test(t.name)){const r=new T({algorithm:t.name});if("parameters"in t){const i=t;r.parameters=i.parameters}return r}throw new Error("Cannot convert WebCrypto algorithm to ASN.1 algorithm")}toWebAlgorithm(t){for(const r of this.getAlgorithms()){const i=r.toWebAlgorithm(t);if(i)return i}return{name:t.algorithm,parameters:t.parameters}}}const rr="crypto.algorithmProvider";ht.registerSingleton(rr,Of);var wi;const wt="1.3.36.3.3.2.8.1.1",al="".concat(wt,".1"),cl="".concat(wt,".2"),ll="".concat(wt,".3"),ul="".concat(wt,".4"),pl="".concat(wt,".5"),hl="".concat(wt,".6"),fl="".concat(wt,".7"),dl="".concat(wt,".8"),yl="".concat(wt,".9"),gl="".concat(wt,".10"),vl="".concat(wt,".11"),ml="".concat(wt,".12"),wl="".concat(wt,".13"),bl="".concat(wt,".14"),Sl="brainpoolP160r1",Al="brainpoolP160t1",xl="brainpoolP192r1",kl="brainpoolP192t1",Bl="brainpoolP224r1",Cl="brainpoolP224t1",El="brainpoolP256r1",Il="brainpoolP256t1",Ol="brainpoolP320r1",Nl="brainpoolP320t1",Tl="brainpoolP384r1",Pl="brainpoolP384t1",Dl="brainpoolP512r1",jl="brainpoolP512t1",Z="ECDSA";let wr=wi=class{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case Z.toLowerCase():if("hash"in e)switch((typeof e.hash=="string"?e.hash:e.hash.name).toLowerCase()){case"sha-1":return Xh;case"sha-256":return Qh;case"sha-384":return tf;case"sha-512":return ef}else if("namedCurve"in e){let t="";switch(e.namedCurve){case"P-256":t=Dc;break;case"K-256":t=wi.SECP256K1;break;case"P-384":t=jc;break;case"P-521":t=Uc;break;case Sl:t=al;break;case Al:t=cl;break;case xl:t=ll;break;case kl:t=ul;break;case Bl:t=pl;break;case Cl:t=hl;break;case El:t=fl;break;case Il:t=dl;break;case Ol:t=yl;break;case Nl:t=gl;break;case Tl:t=vl;break;case Pl:t=ml;break;case Dl:t=wl;break;case jl:t=bl;break}if(t)return new T({algorithm:Vr,parameters:I.serialize(new ne({namedCurve:t}))})}}return null}toWebAlgorithm(e){switch(e.algorithm){case Jo:return{name:Z,hash:{name:"SHA-1"}};case Zo:return{name:Z,hash:{name:"SHA-256"}};case Yo:return{name:Z,hash:{name:"SHA-384"}};case Xo:return{name:Z,hash:{name:"SHA-512"}};case Vr:{if(!e.parameters)throw new TypeError("Cannot get required parameters from EC algorithm");switch(I.parse(e.parameters,ne).namedCurve){case Dc:return{name:Z,namedCurve:"P-256"};case wi.SECP256K1:return{name:Z,namedCurve:"K-256"};case jc:return{name:Z,namedCurve:"P-384"};case Uc:return{name:Z,namedCurve:"P-521"};case al:return{name:Z,namedCurve:Sl};case cl:return{name:Z,namedCurve:Al};case ll:return{name:Z,namedCurve:xl};case ul:return{name:Z,namedCurve:kl};case pl:return{name:Z,namedCurve:Bl};case hl:return{name:Z,namedCurve:Cl};case fl:return{name:Z,namedCurve:El};case dl:return{name:Z,namedCurve:Il};case yl:return{name:Z,namedCurve:Ol};case gl:return{name:Z,namedCurve:Nl};case vl:return{name:Z,namedCurve:Tl};case ml:return{name:Z,namedCurve:Pl};case wl:return{name:Z,namedCurve:Dl};case bl:return{name:Z,namedCurve:jl}}}}return null}};wr.SECP256K1="1.3.132.0.10",wr=wi=o([Tn()],wr),ht.registerSingleton(Hr,wr);const Fu=Symbol("name"),Ku=Symbol("value");class K{constructor(t,r={},i=""){this[Fu]=t,this[Ku]=i;for(const n in r)this[n]=r[n]}}K.NAME=Fu,K.VALUE=Ku;class Nf{static toTextObject(t){const r=new K("Algorithm Identifier",{},pe.toString(t.algorithm));if(t.parameters)switch(t.algorithm){case Vr:{const i=new wr().toWebAlgorithm(t);i&&"namedCurve"in i?r["Named Curve"]=i.namedCurve:r.Parameters=t.parameters;break}default:r.Parameters=t.parameters}return r}}class pe{static toString(t){return this.items[t]||t}}pe.items={[hn]:"sha1",[ju]:"sha224",[fn]:"sha256",[dn]:"sha384",[yn]:"sha512",[Ie]:"rsaEncryption",[ln]:"sha1WithRSAEncryption",[cf]:"sha224WithRSAEncryption",[Ao]:"sha256WithRSAEncryption",[un]:"sha384WithRSAEncryption",[pn]:"sha512WithRSAEncryption",[Vr]:"ecPublicKey",[Jo]:"ecdsaWithSHA1",[Du]:"ecdsaWithSHA224",[Zo]:"ecdsaWithSHA256",[Yo]:"ecdsaWithSHA384",[Xo]:"ecdsaWithSHA512",[Kh]:"TLS WWW server authentication",[qh]:"TLS WWW client authentication",[Wh]:"Code Signing",[Gh]:"E-mail Protection",[Jh]:"Time Stamping",[Zh]:"OCSP Signing",[Yh]:"Signed Data"};class Ne{static serialize(t){return this.serializeObj(t).join("\n")}static pad(t=0){return"".padStart(2*t," ")}static serializeObj(t,r=0){const i=[];let n=this.pad(r++),s="";const a=t[K.VALUE];a&&(s=" ".concat(a)),i.push("".concat(n).concat(t[K.NAME],":").concat(s)),n=this.pad(r);for(const l in t){if(typeof l=="symbol")continue;const u=t[l],f=l?"".concat(l,": "):"";if(typeof u=="string"||typeof u=="number"||typeof u=="boolean")i.push("".concat(n).concat(f).concat(u));else if(u instanceof Date)i.push("".concat(n).concat(f).concat(u.toUTCString()));else if(Array.isArray(u))for(const A of u)A[K.NAME]=l,i.push(...this.serializeObj(A,r));else if(u instanceof K)u[K.NAME]=l,i.push(...this.serializeObj(u,r));else if(E.isBufferSource(u))l?(i.push("".concat(n).concat(f)),i.push(...this.serializeBufferSource(u,r+1))):i.push(...this.serializeBufferSource(u,r));else if("toTextObject"in u){const A=u.toTextObject();A[K.NAME]=l,i.push(...this.serializeObj(A,r))}else throw new TypeError("Cannot serialize data in text format. Unsupported type.")}return i}static serializeBufferSource(t,r=0){const i=this.pad(r),n=E.toUint8Array(t),s=[];for(let a=0;a<n.length;){const l=[];for(let u=0;u<16&&a<n.length;u++){u===8&&l.push("");const f=n[a++].toString(16).padStart(2,"0");l.push(f)}s.push("".concat(i).concat(l.join(" ")))}return s}static serializeAlgorithm(t){return this.algorithmSerializer.toTextObject(t)}}Ne.oidSerializer=pe,Ne.algorithmSerializer=Nf;class he{constructor(...t){if(t.length===1){const r=t[0];this.rawData=I.serialize(r),this.onInit(r)}else{const r=I.parse(t[0],t[1]);this.rawData=E.toArrayBuffer(t[0]),this.onInit(r)}}equal(t){return t instanceof he?tu(t.rawData,this.rawData):!1}toString(t="text"){switch(t){case"asn":return I.toString(this.rawData);case"text":return Ne.serialize(this.toTextObject());case"hex":return U.ToHex(this.rawData);case"base64":return U.ToBase64(this.rawData);case"base64url":return U.ToBase64Url(this.rawData);default:throw TypeError("Argument 'format' is unsupported value")}}getTextName(){return this.constructor.NAME}toTextObject(){const t=this.toTextObjectEmpty();return t[""]=this.rawData,t}toTextObjectEmpty(t){return new K(this.getTextName(),{},t)}}he.NAME="ASN";class It extends he{constructor(...t){let r;E.isBufferSource(t[0])?r=E.toArrayBuffer(t[0]):r=I.serialize(new jt({extnID:t[0],critical:t[1],extnValue:new _(E.toArrayBuffer(t[2]))})),super(r,jt)}onInit(t){this.type=t.extnID,this.critical=t.critical,this.value=t.extnValue.buffer}toTextObject(){const t=this.toTextObjectWithoutValue();return t[""]=this.value,t}toTextObjectWithoutValue(){const t=this.toTextObjectEmpty(this.critical?"critical":void 0);return t[K.NAME]===It.NAME&&(t[K.NAME]=pe.toString(this.type)),t}}var qu;class se{static isCryptoKeyPair(t){return t&&t.privateKey&&t.publicKey}static isCryptoKey(t){return t&&t.usages&&t.type&&t.algorithm&&t.extractable!==void 0}constructor(){this.items=new Map,this[qu]="CryptoProvider",typeof self<"u"&&typeof crypto<"u"?this.set(se.DEFAULT,crypto):typeof Wr<"u"&&Wr.crypto&&Wr.crypto.subtle&&this.set(se.DEFAULT,Wr.crypto)}clear(){this.items.clear()}delete(t){return this.items.delete(t)}forEach(t,r){return this.items.forEach(t,r)}has(t){return this.items.has(t)}get size(){return this.items.size}entries(){return this.items.entries()}keys(){return this.items.keys()}values(){return this.items.values()}[Symbol.iterator](){return this.items[Symbol.iterator]()}get(t=se.DEFAULT){const r=this.items.get(t.toLowerCase());if(!r)throw new Error("Cannot get Crypto by name '".concat(t,"'"));return r}set(t,r){if(typeof t=="string"){if(!r)throw new TypeError("Argument 'value' is required");this.items.set(t.toLowerCase(),r)}else this.items.set(se.DEFAULT,t);return this}}qu=Symbol.toStringTag,se.DEFAULT="default";const ut=new se,Tf=/^[0-2](?:\.[1-9][0-9]*)+$/;function Pf(e){return new RegExp(Tf).test(e)}class Wu{constructor(t={}){this.items={};for(const r in t)this.register(r,t[r])}get(t){return this.items[t]||null}findId(t){return Pf(t)?t:this.get(t)}register(t,r){this.items[t]=r,this.items[r]=t}}const yt=new Wu;yt.register("CN","2.5.4.3"),yt.register("L","2.5.4.7"),yt.register("ST","2.5.4.8"),yt.register("O","2.5.4.10"),yt.register("OU","2.5.4.11"),yt.register("C","2.5.4.6"),yt.register("DC","0.9.2342.19200300.100.1.25"),yt.register("E","1.2.840.113549.1.9.1"),yt.register("G","2.5.4.42"),yt.register("I","2.5.4.43"),yt.register("SN","2.5.4.4"),yt.register("T","2.5.4.12");function Df(e,t){return"\\".concat(U.ToHex(U.FromUtf8String(t)).toUpperCase())}function jf(e){return e.replace(/([,+"\\<>;])/g,"\\$1").replace(/^([ #])/,"\\$1").replace(/([ ]$)/,"\\$1").replace(/([\r\n\t])/,Df)}class le{static isASCII(t){for(let r=0;r<t.length;r++)if(t.charCodeAt(r)>255)return!1;return!0}static isPrintableString(t){return/^[A-Za-z0-9 '()+,-./:=?]*$/g.test(t)}constructor(t,r={}){this.extraNames=new Wu,this.asn=new it;for(const i in r)if(Object.prototype.hasOwnProperty.call(r,i)){const n=r[i];this.extraNames.register(i,n)}typeof t=="string"?this.asn=this.fromString(t):t instanceof it?this.asn=t:E.isBufferSource(t)?this.asn=I.parse(t,it):this.asn=this.fromJSON(t)}getField(t){const r=this.extraNames.findId(t)||yt.findId(t),i=[];for(const n of this.asn)for(const s of n)s.type===r&&i.push(s.value.toString());return i}getName(t){return this.extraNames.get(t)||yt.get(t)}toString(){return this.asn.map(t=>t.map(r=>{const i=this.getName(r.type)||r.type,n=r.value.anyValue?"#".concat(U.ToHex(r.value.anyValue)):jf(r.value.toString());return"".concat(i,"=").concat(n)}).join("+")).join(", ")}toJSON(){var t;const r=[];for(const i of this.asn){const n={};for(const s of i){const a=this.getName(s.type)||s.type;(t=n[a])!==null&&t!==void 0||(n[a]=[]),n[a].push(s.value.anyValue?"#".concat(U.ToHex(s.value.anyValue)):s.value.toString())}r.push(n)}return r}fromString(t){const r=new it,i=/(\d\.[\d.]*\d|[A-Za-z]+)=((?:"")|(?:".*?[^\\]")|(?:[^,+].*?(?:[^\\][,+]))|(?:))([,+])?/g;let n=null,s=",";for(;n=i.exec("".concat(t,","));){let[,a,l]=n;const u=l[l.length-1];(u===","||u==="+")&&(l=l.slice(0,l.length-1),n[3]=u);const f=n[3];a=this.getTypeOid(a);const A=this.createAttribute(a,l);s==="+"?r[r.length-1].push(A):r.push(new Ye([A])),s=f}return r}fromJSON(t){const r=new it;for(const i of t){const n=new Ye;for(const s in i){const a=this.getTypeOid(s),l=i[s];for(const u of l){const f=this.createAttribute(a,u);n.push(f)}}r.push(n)}return r}getTypeOid(t){if(/[\d.]+/.test(t)||(t=this.getName(t)||""),!t)throw new Error("Cannot get OID for name type '".concat(t,"'"));return t}createAttribute(t,r){const i=new Li({type:t});if(typeof r=="object")for(const n in r)switch(n){case"ia5String":i.value.ia5String=r[n];break;case"utf8String":i.value.utf8String=r[n];break;case"universalString":i.value.universalString=r[n];break;case"bmpString":i.value.bmpString=r[n];break;case"printableString":i.value.printableString=r[n];break}else if(r[0]==="#")i.value.anyValue=U.FromHex(r.slice(1));else{const n=this.processStringValue(r);t===this.getName("E")||t===this.getName("DC")?i.value.ia5String=n:le.isPrintableString(n)?i.value.printableString=n:i.value.utf8String=n}return i}processStringValue(t){const r=/"(.*?[^\\])?"/.exec(t);return r&&(t=r[1]),t.replace(/\\0a/ig,"\n").replace(/\\0d/ig,"\r").replace(/\\0g/ig,"	").replace(/\\(.)/g,"$1")}toArrayBuffer(){return I.serialize(this.asn)}async getThumbprint(...t){var r;let i,n="SHA-1";return t.length>=1&&!(!((r=t[0])===null||r===void 0)&&r.subtle)?(n=t[0]||n,i=t[1]||ut.get()):i=t[0]||ut.get(),await i.subtle.digest(n,this.toArrayBuffer())}}const Gu="Cannot initialize GeneralName from ASN.1 data.",Ul="".concat(Gu," Unsupported string format in use."),Uf="".concat(Gu," Value doesn't match to GUID regular expression."),Ml=/^([0-9a-f]{8})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{12})$/i,Vl="1.3.6.1.4.1.311.25.1",Rl="1.3.6.1.4.1.311.20.2.3",ts="dns",es="dn",rs="email",is="ip",ns="url",ss="guid",os="upn",ti="id";class oe extends he{constructor(...t){let r;if(t.length===2)switch(t[0]){case es:{const i=new le(t[1]).toArrayBuffer(),n=I.parse(i,it);r=new z({directoryName:n});break}case ts:r=new z({dNSName:t[1]});break;case rs:r=new z({rfc822Name:t[1]});break;case ss:{const i=new RegExp(Ml,"i").exec(t[1]);if(!i)throw new Error("Cannot parse GUID value. Value doesn't match to regular expression");const n=i.slice(1).map((s,a)=>a<3?U.ToHex(new Uint8Array(U.FromHex(s)).reverse()):s).join("");r=new z({otherName:new jr({typeId:Vl,value:I.serialize(new _(U.FromHex(n)))})});break}case is:r=new z({iPAddress:t[1]});break;case ti:r=new z({registeredID:t[1]});break;case os:{r=new z({otherName:new jr({typeId:Rl,value:I.serialize(Su.toASN(t[1]))})});break}case ns:r=new z({uniformResourceIdentifier:t[1]});break;default:throw new Error("Cannot create GeneralName. Unsupported type of the name")}else E.isBufferSource(t[0])?r=I.parse(t[0],z):r=t[0];super(r)}onInit(t){if(t.dNSName!=null)this.type=ts,this.value=t.dNSName;else if(t.rfc822Name!=null)this.type=rs,this.value=t.rfc822Name;else if(t.iPAddress!=null)this.type=is,this.value=t.iPAddress;else if(t.uniformResourceIdentifier!=null)this.type=ns,this.value=t.uniformResourceIdentifier;else if(t.registeredID!=null)this.type=ti,this.value=t.registeredID;else if(t.directoryName!=null)this.type=es,this.value=new le(t.directoryName).toString();else if(t.otherName!=null)if(t.otherName.typeId===Vl){this.type=ss;const r=I.parse(t.otherName.value,_),i=new RegExp(Ml,"i").exec(U.ToHex(r));if(!i)throw new Error(Uf);this.value=i.slice(1).map((n,s)=>s<3?U.ToHex(new Uint8Array(U.FromHex(n)).reverse()):n).join("-")}else if(t.otherName.typeId===Rl)this.type=os,this.value=I.parse(t.otherName.value,ot).toString();else throw new Error(Ul);else throw new Error(Ul)}toJSON(){return{type:this.type,value:this.value}}toTextObject(){let t;switch(this.type){case es:case ts:case ss:case is:case ti:case os:case ns:t=this.type.toUpperCase();break;case rs:t="Email";break;default:throw new Error("Unsupported GeneralName type")}let r=this.value;return this.type===ti&&(r=pe.toString(r)),new K(t,void 0,r)}}class Rr extends he{constructor(t){let r;if(t instanceof pt)r=t;else if(Array.isArray(t)){const i=[];for(const n of t)if(n instanceof z)i.push(n);else{const s=I.parse(new oe(n.type,n.value).rawData,z);i.push(s)}r=new pt(i)}else if(E.isBufferSource(t))r=I.parse(t,pt);else throw new Error("Cannot initialize GeneralNames. Incorrect incoming arguments");super(r)}onInit(t){const r=[];for(const i of t){let n=null;try{n=new oe(i)}catch(s){continue}r.push(n)}this.items=r}toJSON(){return this.items.map(t=>t.toJSON())}toTextObject(){const t=super.toTextObjectEmpty();for(const r of this.items){const i=r.toTextObject();let n=t[i[K.NAME]];Array.isArray(n)||(n=[],t[i[K.NAME]]=n),n.push(i)}return t}}Rr.NAME="GeneralNames";const Ir="-{5}",zr="\\n",Mf="[^".concat(zr,"]+"),Vf="".concat(Ir,"BEGIN (").concat(Mf,"(?=").concat(Ir,"))").concat(Ir),Rf="".concat(Ir,"END \\1").concat(Ir),ir="\\n",zf="[^:".concat(zr,"]+"),Lf="(?:[^".concat(zr,"]+").concat(ir,"(?: +[^").concat(zr,"]+").concat(ir,")*)"),$f="[a-zA-Z0-9=+/]+",Hf="(?:".concat($f).concat(ir,")+"),zl="".concat(Vf).concat(ir,"(?:((?:").concat(zf,": ").concat(Lf,")+))?").concat(ir,"?(").concat(Hf,")").concat(Rf);class St{static isPem(t){return typeof t=="string"&&new RegExp(zl,"g").test(t)}static decodeWithHeaders(t){t=t.replace(/\r/g,"");const r=new RegExp(zl,"g"),i=[];let n=null;for(;n=r.exec(t);){const s=n[3].replace(new RegExp("[".concat(zr,"]+"),"g"),""),a={type:n[1],headers:[],rawData:U.FromBase64(s)},l=n[2];if(l){const u=l.split(new RegExp(ir,"g"));let f=null;for(const A of u){const[w,F]=A.split(/:(.*)/);if(F===void 0){if(!f)throw new Error("Cannot parse PEM string. Incorrect header value");f.value+=w.trim()}else f&&a.headers.push(f),f={key:w,value:F.trim()}}f&&a.headers.push(f)}i.push(a)}return i}static decode(t){return this.decodeWithHeaders(t).map(r=>r.rawData)}static decodeFirst(t){const r=this.decode(t);if(!r.length)throw new RangeError("PEM string doesn't contain any objects");return r[0]}static encode(t,r){if(Array.isArray(t)){const i=new Array;return r?t.forEach(n=>{if(!E.isBufferSource(n))throw new TypeError("Cannot encode array of BufferSource in PEM format. Not all items of the array are BufferSource");i.push(this.encodeStruct({type:r,rawData:E.toArrayBuffer(n)}))}):t.forEach(n=>{if(!("type"in n))throw new TypeError("Cannot encode array of PemStruct in PEM format. Not all items of the array are PemStrut");i.push(this.encodeStruct(n))}),i.join("\n")}else{if(!r)throw new Error("Required argument 'tag' is missed");return this.encodeStruct({type:r,rawData:E.toArrayBuffer(t)})}}static encodeStruct(t){var r;const i=t.type.toLocaleUpperCase(),n=[];if(n.push("-----BEGIN ".concat(i,"-----")),!((r=t.headers)===null||r===void 0)&&r.length){for(const f of t.headers)n.push("".concat(f.key,": ").concat(f.value));n.push("")}const s=U.ToBase64(t.rawData);let a,l=0;const u=Array();for(;l<s.length&&(s.length-l<64?a=s.substring(l):(a=s.substring(l,l+64),l+=64),a.length!==0)&&(u.push(a),!(a.length<64)););return n.push(...u),n.push("-----END ".concat(i,"-----")),n.join("\n")}}St.CertificateTag="CERTIFICATE",St.CrlTag="CRL",St.CertificateRequestTag="CERTIFICATE REQUEST",St.PublicKeyTag="PUBLIC KEY",St.PrivateKeyTag="PRIVATE KEY";class ee extends he{static isAsnEncoded(t){return E.isBufferSource(t)||typeof t=="string"}static toArrayBuffer(t){if(typeof t=="string"){if(St.isPem(t))return St.decode(t)[0];if(U.isHex(t))return U.FromHex(t);if(U.isBase64(t))return U.FromBase64(t);if(U.isBase64Url(t))return U.FromBase64Url(t);throw new TypeError("Unsupported format of 'raw' argument. Must be one of DER, PEM, HEX, Base64, or Base4Url")}else{const r=U.ToBinary(t);return St.isPem(r)?St.decode(r)[0]:U.isHex(r)?U.FromHex(r):U.isBase64(r)?U.FromBase64(r):U.isBase64Url(r)?U.FromBase64Url(r):E.toArrayBuffer(t)}}constructor(...t){ee.isAsnEncoded(t[0])?super(ee.toArrayBuffer(t[0]),t[1]):super(t[0])}toString(t="pem"){switch(t){case"pem":return St.encode(this.rawData,this.tag);default:return super.toString(t)}}}class Ht extends ee{static async create(t,r=ut.get()){if(t instanceof Ht)return t;if(se.isCryptoKey(t)){if(t.type!=="public")throw new TypeError("Public key is required");const i=await r.subtle.exportKey("spki",t);return new Ht(i)}else{if(t.publicKey)return t.publicKey;if(E.isBufferSource(t))return new Ht(t);throw new TypeError("Unsupported PublicKeyType")}}constructor(t){ee.isAsnEncoded(t)?super(t,Lt):super(t),this.tag=St.PublicKeyTag}async export(...t){let r,i=["verify"],n=L({hash:"SHA-256"},this.algorithm);t.length>1?(n=t[0]||n,i=t[1]||i,r=t[2]||ut.get()):r=t[0]||ut.get();let s=this.rawData;const a=I.parse(this.rawData,Lt);return a.algorithm.algorithm===Br&&(s=_f(a,s)),r.subtle.importKey("spki",s,n,!0,i)}onInit(t){const r=ht.resolve(rr),i=this.algorithm=r.toWebAlgorithm(t.algorithm);switch(t.algorithm.algorithm){case Ie:{const n=I.parse(t.subjectPublicKey,Bo),s=E.toUint8Array(n.modulus);i.publicExponent=E.toUint8Array(n.publicExponent),i.modulusLength=(s[0]?s:s.slice(1)).byteLength<<3;break}}}async getThumbprint(...t){var r;let i,n="SHA-1";return t.length>=1&&!(!((r=t[0])===null||r===void 0)&&r.subtle)?(n=t[0]||n,i=t[1]||ut.get()):i=t[0]||ut.get(),await i.subtle.digest(n,this.rawData)}async getKeyIdentifier(...t){let r,i="SHA-1";t.length===1?typeof t[0]=="string"?(i=t[0],r=ut.get()):r=t[0]:t.length===2?(i=t[0],r=t[1]):r=ut.get();const n=I.parse(this.rawData,Lt);return await r.subtle.digest(i,n.subjectPublicKey)}toTextObject(){const t=this.toTextObjectEmpty(),r=I.parse(this.rawData,Lt);switch(t.Algorithm=Ne.serializeAlgorithm(r.algorithm),r.algorithm.algorithm){case Vr:t["EC Point"]=r.subjectPublicKey;break;case Ie:default:t["Raw Data"]=r.subjectPublicKey}return t}}function _f(e,t){return e.algorithm=new T({algorithm:Ie,parameters:null}),t=I.serialize(e),t}class Lr extends It{static async create(t,r=!1,i=ut.get()){if("name"in t&&"serialNumber"in t)return new Lr(t,r);const n=await(await Ht.create(t,i)).getKeyIdentifier(i);return new Lr(U.ToHex(n),r)}constructor(...t){if(E.isBufferSource(t[0]))super(t[0]);else if(typeof t[0]=="string"){const r=new me({keyIdentifier:new Go(U.FromHex(t[0]))});super(Ps,t[1],I.serialize(r))}else{const r=t[0],i=r.name instanceof Rr?I.parse(r.name.rawData,pt):r.name,n=new me({authorityCertIssuer:i,authorityCertSerialNumber:U.FromHex(r.serialNumber)});super(Ps,t[1],I.serialize(n))}}onInit(t){super.onInit(t);const r=I.parse(t.extnValue,me);r.keyIdentifier&&(this.keyId=U.ToHex(r.keyIdentifier)),(r.authorityCertIssuer||r.authorityCertSerialNumber)&&(this.certId={name:r.authorityCertIssuer||[],serialNumber:r.authorityCertSerialNumber?U.ToHex(r.authorityCertSerialNumber):""})}toTextObject(){const t=this.toTextObjectWithoutValue(),r=I.parse(this.value,me);return r.authorityCertIssuer&&(t["Authority Issuer"]=new Rr(r.authorityCertIssuer).toTextObject()),r.authorityCertSerialNumber&&(t["Authority Serial Number"]=r.authorityCertSerialNumber),r.keyIdentifier&&(t[""]=r.keyIdentifier),t}}Lr.NAME="Authority Key Identifier";class Ju extends It{constructor(...t){if(E.isBufferSource(t[0])){super(t[0]);const r=I.parse(this.value,$i);this.ca=r.cA,this.pathLength=r.pathLenConstraint}else{const r=new $i({cA:t[0],pathLenConstraint:t[1]});super(ku,t[2],I.serialize(r)),this.ca=t[0],this.pathLength=t[1]}}toTextObject(){const t=this.toTextObjectWithoutValue();return this.ca&&(t.CA=this.ca),this.pathLength!==void 0&&(t["Path Length"]=this.pathLength),t}}Ju.NAME="Basic Constraints";var Ll;(function(e){e.serverAuth="1.3.6.1.5.5.7.3.1",e.clientAuth="1.3.6.1.5.5.7.3.2",e.codeSigning="1.3.6.1.5.5.7.3.3",e.emailProtection="1.3.6.1.5.5.7.3.4",e.timeStamping="1.3.6.1.5.5.7.3.8",e.ocspSigning="1.3.6.1.5.5.7.3.9"})(Ll||(Ll={}));class Zu extends It{constructor(...t){if(E.isBufferSource(t[0])){super(t[0]);const r=I.parse(this.value,Fi);this.usages=r.map(i=>i)}else{const r=new Fi(t[0]);super(Eu,t[1],I.serialize(r)),this.usages=t[0]}}toTextObject(){const t=this.toTextObjectWithoutValue();return t[""]=this.usages.map(r=>pe.toString(r)).join(", "),t}}Zu.NAME="Extended Key Usages";var $l;(function(e){e[e.digitalSignature=1]="digitalSignature",e[e.nonRepudiation=2]="nonRepudiation",e[e.keyEncipherment=4]="keyEncipherment",e[e.dataEncipherment=8]="dataEncipherment",e[e.keyAgreement=16]="keyAgreement",e[e.keyCertSign=32]="keyCertSign",e[e.cRLSign=64]="cRLSign",e[e.encipherOnly=128]="encipherOnly",e[e.decipherOnly=256]="decipherOnly"})($l||($l={}));class Yu extends It{constructor(...t){if(E.isBufferSource(t[0])){super(t[0]);const r=I.parse(this.value,_n);this.usages=r.toNumber()}else{const r=new _n(t[0]);super(Iu,t[1],I.serialize(r)),this.usages=t[0]}}toTextObject(){const t=this.toTextObjectWithoutValue(),r=I.parse(this.value,_n);return t[""]=r.toJSON().join(", "),t}}Yu.NAME="Key Usages";class Pn extends It{static async create(t,r=!1,i=ut.get()){const n=await(await Ht.create(t,i)).getKeyIdentifier(i);return new Pn(U.ToHex(n),r)}constructor(...t){if(E.isBufferSource(t[0])){super(t[0]);const r=I.parse(this.value,ce);this.keyId=U.ToHex(r)}else{const r=typeof t[0]=="string"?U.FromHex(t[0]):t[0],i=new ce(r);super(Nu,t[1],I.serialize(i)),this.keyId=U.ToHex(r)}}toTextObject(){const t=this.toTextObjectWithoutValue(),r=I.parse(this.value,ce);return t[""]=r,t}}Pn.NAME="Subject Key Identifier";class Xu extends It{constructor(...t){E.isBufferSource(t[0])?super(t[0]):super(Ou,t[1],new Rr(t[0]||[]).rawData)}onInit(t){super.onInit(t);const r=I.parse(t.extnValue,Gs);this.names=new Rr(r)}toTextObject(){const t=this.toTextObjectWithoutValue(),r=this.names.toTextObject();for(const i in r)t[i]=r[i];return t}}Xu.NAME="Subject Alternative Name";class kt{static register(t,r){this.items.set(t,r)}static create(t){const r=new It(t),i=this.items.get(r.type);return i?new i(t):r}}kt.items=new Map;class Hl extends It{constructor(...t){var r;if(E.isBufferSource(t[0])){super(t[0]);const i=I.parse(this.value,_i);this.policies=i.map(n=>n.policyIdentifier)}else{const i=t[0],n=(r=t[1])!==null&&r!==void 0?r:!1,s=new _i(i.map(a=>new Hi({policyIdentifier:a})));super(Bu,n,I.serialize(s)),this.policies=i}}toTextObject(){const t=this.toTextObjectWithoutValue();return t.Policy=this.policies.map(r=>new K("",{},pe.toString(r))),t}}Hl.NAME="Certificate Policies",kt.register(Bu,Hl);class Qu extends It{constructor(...t){var r;if(E.isBufferSource(t[0]))super(t[0]);else if(Array.isArray(t[0])&&typeof t[0][0]=="string"){const i=t[0].map(s=>new We({distributionPoint:new we({fullName:[new z({uniformResourceIdentifier:s})]})})),n=new Ge(i);super(Ls,t[1],I.serialize(n))}else{const i=new Ge(t[0]);super(Ls,t[1],I.serialize(i))}(r=this.distributionPoints)!==null&&r!==void 0||(this.distributionPoints=[])}onInit(t){super.onInit(t);const r=I.parse(t.extnValue,Ge);this.distributionPoints=r}toTextObject(){const t=this.toTextObjectWithoutValue();return t["Distribution Point"]=this.distributionPoints.map(r=>{var i;const n={};return r.distributionPoint&&(n[""]=(i=r.distributionPoint.fullName)===null||i===void 0?void 0:i.map(s=>new oe(s).toString()).join(", ")),r.reasons&&(n.Reasons=r.reasons.toString()),r.cRLIssuer&&(n["CRL Issuer"]=r.cRLIssuer.map(s=>s.toString()).join(", ")),n}),t}}Qu.NAME="CRL Distribution Points";class tp extends It{constructor(...t){var r,i,n,s;if(E.isBufferSource(t[0]))super(t[0]);else if(t[0]instanceof Le){const a=new Le(t[0]);super(Ts,t[1],I.serialize(a))}else{const a=t[0],l=new Le;ri(l,a,hc,"ocsp"),ri(l,a,fc,"caIssuers"),ri(l,a,dc,"timeStamping"),ri(l,a,yc,"caRepository"),super(Ts,t[1],I.serialize(l))}(r=this.ocsp)!==null&&r!==void 0||(this.ocsp=[]),(i=this.caIssuers)!==null&&i!==void 0||(this.caIssuers=[]),(n=this.timeStamping)!==null&&n!==void 0||(this.timeStamping=[]),(s=this.caRepository)!==null&&s!==void 0||(this.caRepository=[])}onInit(t){super.onInit(t),this.ocsp=[],this.caIssuers=[],this.timeStamping=[],this.caRepository=[],I.parse(t.extnValue,Le).forEach(r=>{switch(r.accessMethod){case hc:this.ocsp.push(new oe(r.accessLocation));break;case fc:this.caIssuers.push(new oe(r.accessLocation));break;case dc:this.timeStamping.push(new oe(r.accessLocation));break;case yc:this.caRepository.push(new oe(r.accessLocation));break}})}toTextObject(){const t=this.toTextObjectWithoutValue();return this.ocsp.length&&ei(t,"OCSP",this.ocsp),this.caIssuers.length&&ei(t,"CA Issuers",this.caIssuers),this.timeStamping.length&&ei(t,"Time Stamping",this.timeStamping),this.caRepository.length&&ei(t,"CA Repository",this.caRepository),t}}tp.NAME="Authority Info Access";function ei(e,t,r){if(r.length===1)e[t]=r[0].toTextObject();else{const i=new K("");r.forEach((n,s)=>{const a=n.toTextObject(),l="".concat(a[K.NAME]," ").concat(s+1);let u=i[l];Array.isArray(u)||(u=[],i[l]=u),u.push(a)}),e[t]=i}}function ri(e,t,r,i){const n=t[i];n&&(Array.isArray(n)?n:[n]).forEach(s=>{typeof s=="string"&&(s=new oe("url",s)),e.push(new Ur({accessMethod:r,accessLocation:I.parse(s.rawData,z)}))})}class or extends he{constructor(...t){let r;if(E.isBufferSource(t[0]))r=E.toArrayBuffer(t[0]);else{const i=t[0],n=Array.isArray(t[1])?t[1].map(s=>E.toArrayBuffer(s)):[];r=I.serialize(new Qt({type:i,values:n}))}super(r,Qt)}onInit(t){this.type=t.type,this.values=t.values}toTextObject(){const t=this.toTextObjectWithoutValue();return t.Value=this.values.map(r=>new K("",{"":r})),t}toTextObjectWithoutValue(){const t=this.toTextObjectEmpty();return t[K.NAME]===or.NAME&&(t[K.NAME]=pe.toString(this.type)),t}}or.NAME="Attribute";class ep extends or{constructor(...t){var r;if(E.isBufferSource(t[0]))super(t[0]);else{const i=new bn({printableString:t[0]});super(_u,[I.serialize(i)])}(r=this.password)!==null&&r!==void 0||(this.password="")}onInit(t){if(super.onInit(t),this.values[0]){const r=I.parse(this.values[0],bn);this.password=r.toString()}}toTextObject(){const t=this.toTextObjectWithoutValue();return t[K.VALUE]=this.password,t}}ep.NAME="Challenge Password";class ra extends or{constructor(...t){var r;if(E.isBufferSource(t[0]))super(t[0]);else{const i=t[0],n=new Ee;for(const s of i)n.push(I.parse(s.rawData,jt));super(ea,[I.serialize(n)])}(r=this.items)!==null&&r!==void 0||(this.items=[])}onInit(t){if(super.onInit(t),this.values[0]){const r=I.parse(this.values[0],Ee);this.items=r.map(i=>kt.create(I.serialize(i)))}}toTextObject(){const t=this.toTextObjectWithoutValue(),r=this.items.map(i=>i.toTextObject());for(const i of r)t[i[K.NAME]]=i;return t}}ra.NAME="Extensions";class An{static register(t,r){this.items.set(t,r)}static create(t){const r=new or(t),i=this.items.get(r.type);return i?new i(t):r}}An.items=new Map;const xn="crypto.signatureFormatter";class Ff{toAsnSignature(t,r){return E.toArrayBuffer(r)}toWebSignature(t,r){return E.toArrayBuffer(r)}}var bi;let as=bi=class{static createPssParams(e,t){const r=bi.getHashAlgorithm(e);return r?new ye({hashAlgorithm:r,maskGenAlgorithm:new T({algorithm:Nn,parameters:I.serialize(r)}),saltLength:t}):null}static getHashAlgorithm(e){const t=ht.resolve(rr);return typeof e=="string"?t.toAsnAlgorithm({name:e}):typeof e=="object"&&e&&"name"in e?t.toAsnAlgorithm(e):null}toAsnAlgorithm(e){switch(e.name.toLowerCase()){case"rsassa-pkcs1-v1_5":if("hash"in e){let t;if(typeof e.hash=="string")t=e.hash;else if(e.hash&&typeof e.hash=="object"&&"name"in e.hash&&typeof e.hash.name=="string")t=e.hash.name.toUpperCase();else throw new Error("Cannot get hash algorithm name");switch(t.toLowerCase()){case"sha-1":return new T({algorithm:ln,parameters:null});case"sha-256":return new T({algorithm:Ao,parameters:null});case"sha-384":return new T({algorithm:un,parameters:null});case"sha-512":return new T({algorithm:pn,parameters:null})}}else return new T({algorithm:Ie,parameters:null});break;case"rsa-pss":if("hash"in e){if(!("saltLength"in e&&typeof e.saltLength=="number"))throw new Error("Cannot get 'saltLength' from 'alg' argument");const t=bi.createPssParams(e.hash,e.saltLength);if(!t)throw new Error("Cannot create PSS parameters");return new T({algorithm:Br,parameters:I.serialize(t)})}else return new T({algorithm:Br,parameters:null})}return null}toWebAlgorithm(e){switch(e.algorithm){case Ie:return{name:"RSASSA-PKCS1-v1_5"};case ln:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case Ao:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case un:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case pn:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case Br:if(e.parameters){const t=I.parse(e.parameters,ye);return{name:"RSA-PSS",hash:ht.resolve(rr).toWebAlgorithm(t.hashAlgorithm),saltLength:t.saltLength}}else return{name:"RSA-PSS"}}return null}};as=bi=o([Tn()],as),ht.registerSingleton(Hr,as);let cs=class{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case"sha-1":return new T({algorithm:hn});case"sha-256":return new T({algorithm:fn});case"sha-384":return new T({algorithm:dn});case"sha-512":return new T({algorithm:yn})}return null}toWebAlgorithm(e){switch(e.algorithm){case hn:return{name:"SHA-1"};case fn:return{name:"SHA-256"};case dn:return{name:"SHA-384"};case yn:return{name:"SHA-512"}}return null}};cs=o([Tn()],cs),ht.registerSingleton(Hr,cs);class Bt{addPadding(t,r){const i=E.toUint8Array(r),n=new Uint8Array(t);return n.set(i,t-i.length),n}removePadding(t,r=!1){let i=E.toUint8Array(t);for(let n=0;n<i.length;n++)if(i[n]){i=i.slice(n);break}if(r&&i[0]>127){const n=new Uint8Array(i.length+1);return n.set(i,1),n.buffer}return i.buffer}toAsnSignature(t,r){if(t.name==="ECDSA"){const i=t.namedCurve,n=Bt.namedCurveSize.get(i)||Bt.defaultNamedCurveSize,s=new cn,a=E.toUint8Array(r);return s.r=this.removePadding(a.slice(0,n),!0),s.s=this.removePadding(a.slice(n,n+n),!0),I.serialize(s)}return null}toWebSignature(t,r){if(t.name==="ECDSA"){const i=I.parse(r,cn),n=t.namedCurve,s=Bt.namedCurveSize.get(n)||Bt.defaultNamedCurveSize,a=this.addPadding(s,this.removePadding(i.r)),l=this.addPadding(s,this.removePadding(i.s));return rh(a,l)}return null}}Bt.namedCurveSize=new Map,Bt.defaultNamedCurveSize=32;const ls="1.3.101.110",_l="1.3.101.111",us="1.3.101.112",Fl="1.3.101.113";let ps=class{toAsnAlgorithm(e){let t=null;switch(e.name.toLowerCase()){case"ed25519":t=us;break;case"x25519":t=ls;break;case"eddsa":switch(e.namedCurve.toLowerCase()){case"ed25519":t=us;break;case"ed448":t=Fl;break}break;case"ecdh-es":switch(e.namedCurve.toLowerCase()){case"x25519":t=ls;break;case"x448":t=_l;break}}return t?new T({algorithm:t}):null}toWebAlgorithm(e){switch(e.algorithm){case us:return{name:"Ed25519"};case Fl:return{name:"EdDSA",namedCurve:"Ed448"};case ls:return{name:"X25519"};case _l:return{name:"ECDH-ES",namedCurve:"X448"}}return null}};ps=o([Tn()],ps),ht.registerSingleton(Hr,ps);class Kf extends ee{constructor(t){ee.isAsnEncoded(t)?super(t,Er):super(t),this.tag=St.CertificateRequestTag}onInit(t){this.tbs=I.serialize(t.certificationRequestInfo),this.publicKey=new Ht(t.certificationRequestInfo.subjectPKInfo);const r=ht.resolve(rr);this.signatureAlgorithm=r.toWebAlgorithm(t.signatureAlgorithm),this.signature=t.signature,this.attributes=t.certificationRequestInfo.attributes.map(n=>An.create(I.serialize(n)));const i=this.getAttribute(ea);this.extensions=[],i instanceof ra&&(this.extensions=i.items),this.subjectName=new le(t.certificationRequestInfo.subject),this.subject=this.subjectName.toString()}getAttribute(t){for(const r of this.attributes)if(r.type===t)return r;return null}getAttributes(t){return this.attributes.filter(r=>r.type===t)}getExtension(t){for(const r of this.extensions)if(r.type===t)return r;return null}getExtensions(t){return this.extensions.filter(r=>r.type===t)}async verify(t=ut.get()){const r=L(L({},this.publicKey.algorithm),this.signatureAlgorithm),i=await this.publicKey.export(r,["verify"],t),n=ht.resolveAll(xn).reverse();let s=null;for(const a of n)if(s=a.toWebSignature(r,this.signature),s)break;if(!s)throw Error("Cannot convert WebCrypto signature value to ASN.1 format");return await t.subtle.verify(this.signatureAlgorithm,i,s,this.tbs)}toTextObject(){const t=this.toTextObjectEmpty(),r=I.parse(this.rawData,Er),i=r.certificationRequestInfo,n=new K("",{Version:"".concat(Xe[i.version]," (").concat(i.version,")"),Subject:this.subject,"Subject Public Key Info":this.publicKey});if(this.attributes.length){const s=new K("");for(const a of this.attributes){const l=a.toTextObject();s[l[K.NAME]]=l}n.Attributes=s}return t.Data=n,t.Signature=new K("",{Algorithm:Ne.serializeAlgorithm(r.signatureAlgorithm),"":r.signature}),t}}Kf.NAME="PKCS#10 Certificate Request";class rp extends ee{constructor(t){ee.isAsnEncoded(t)?super(t,Je):super(t),this.tag=St.CertificateTag}onInit(t){const r=t.tbsCertificate;this.tbs=I.serialize(r),this.serialNumber=U.ToHex(r.serialNumber),this.subjectName=new le(r.subject),this.subject=new le(r.subject).toString(),this.issuerName=new le(r.issuer),this.issuer=this.issuerName.toString();const i=ht.resolve(rr);this.signatureAlgorithm=i.toWebAlgorithm(t.signatureAlgorithm),this.signature=t.signatureValue;const n=r.validity.notBefore.utcTime||r.validity.notBefore.generalTime;if(!n)throw new Error("Cannot get 'notBefore' value");this.notBefore=n;const s=r.validity.notAfter.utcTime||r.validity.notAfter.generalTime;if(!s)throw new Error("Cannot get 'notAfter' value");this.notAfter=s,this.extensions=[],r.extensions&&(this.extensions=r.extensions.map(a=>kt.create(I.serialize(a)))),this.publicKey=new Ht(r.subjectPublicKeyInfo)}getExtension(t){for(const r of this.extensions)if(typeof t=="string"){if(r.type===t)return r}else if(r instanceof t)return r;return null}getExtensions(t){return this.extensions.filter(r=>typeof t=="string"?r.type===t:r instanceof t)}async verify(t={},r=ut.get()){let i,n;const s=t.publicKey;try{if(!s)i=L(L({},this.publicKey.algorithm),this.signatureAlgorithm),n=await this.publicKey.export(i,["verify"],r);else if("publicKey"in s)i=L(L({},s.publicKey.algorithm),this.signatureAlgorithm),n=await s.publicKey.export(i,["verify"],r);else if(s instanceof Ht)i=L(L({},s.algorithm),this.signatureAlgorithm),n=await s.export(i,["verify"],r);else if(E.isBufferSource(s)){const f=new Ht(s);i=L(L({},f.algorithm),this.signatureAlgorithm),n=await f.export(i,["verify"],r)}else i=L(L({},s.algorithm),this.signatureAlgorithm),n=s}catch(f){return!1}const a=ht.resolveAll(xn).reverse();let l=null;for(const f of a)if(l=f.toWebSignature(i,this.signature),l)break;if(!l)throw Error("Cannot convert ASN.1 signature value to WebCrypto format");const u=await r.subtle.verify(this.signatureAlgorithm,n,l,this.tbs);if(t.signatureOnly)return u;{const f=(t.date||new Date).getTime();return u&&this.notBefore.getTime()<f&&f<this.notAfter.getTime()}}async getThumbprint(...t){let r,i="SHA-1";return t[0]&&(t[0].subtle?r=t[0]:(i=t[0]||i,r=t[1])),r!=null||(r=ut.get()),await r.subtle.digest(i,this.rawData)}async isSelfSigned(t=ut.get()){return this.subject===this.issuer&&await this.verify({signatureOnly:!0},t)}toTextObject(){const t=this.toTextObjectEmpty(),r=I.parse(this.rawData,Je),i=r.tbsCertificate,n=new K("",{Version:"".concat(Xe[i.version]," (").concat(i.version,")"),"Serial Number":i.serialNumber,"Signature Algorithm":Ne.serializeAlgorithm(i.signature),Issuer:this.issuer,Validity:new K("",{"Not Before":i.validity.notBefore.getTime(),"Not After":i.validity.notAfter.getTime()}),Subject:this.subject,"Subject Public Key Info":this.publicKey});if(i.issuerUniqueID&&(n["Issuer Unique ID"]=i.issuerUniqueID),i.subjectUniqueID&&(n["Subject Unique ID"]=i.subjectUniqueID),this.extensions.length){const s=new K("");for(const a of this.extensions){const l=a.toTextObject();s[l[K.NAME]]=l}n.Extensions=s}return t.Data=n,t.Signature=new K("",{Algorithm:Ne.serializeAlgorithm(r.signatureAlgorithm),"":r.signatureValue}),t}}rp.NAME="Certificate";var Kl;(function(e){e[e.unspecified=0]="unspecified",e[e.keyCompromise=1]="keyCompromise",e[e.cACompromise=2]="cACompromise",e[e.affiliationChanged=3]="affiliationChanged",e[e.superseded=4]="superseded",e[e.cessationOfOperation=5]="cessationOfOperation",e[e.certificateHold=6]="certificateHold",e[e.removeFromCRL=8]="removeFromCRL",e[e.privilegeWithdrawn=9]="privilegeWithdrawn",e[e.aACompromise=10]="aACompromise"})(Kl||(Kl={})),kt.register(ku,Ju),kt.register(Eu,Zu),kt.register(Iu,Yu),kt.register(Nu,Pn),kt.register(Ps,Lr),kt.register(Ou,Xu),kt.register(Ls,Qu),kt.register(Ts,tp),An.register(_u,ep),An.register(ea,ra),ht.registerSingleton(xn,Ff),ht.registerSingleton(xn,Bt),Bt.namedCurveSize.set("P-256",32),Bt.namedCurveSize.set("K-256",32),Bt.namedCurveSize.set("P-384",48),Bt.namedCurveSize.set("P-521",66);function Jt(e){return btoa(String.fromCharCode(...new Uint8Array(e)))}async function qf(e,t){const r=await Gf(JSON.stringify(e));Dt.debug("[FileDrop] Encryption info compressed (".concat(e.filename,")"),{encryptionInfo:e,compressedEncryptionInfo:r});const i=await ip(),{content:n,tag:s}=await np(i,new Uint8Array(r));return Dt.debug("[FileDrop] Encryption info encrypted (".concat(e.filename,")"),{content:n,tag:s,encryptionParams:i}),Dt.debug("[FileDrop] Encryption info base64ed (".concat(e.filename,")"),{ciphertext:Jt(n)}),{ciphertext:Jt(n),nonce:Jt(i.initializationVector),authenticationTag:Jt(s),users:await Jf(t,i)}}async function Wf(e,t,r,i){const n=jp("apps/end_to_end_encryption/api/v{encryptionVersion}/meta-data/{folderId}",{encryptionVersion:e,folderId:t}),{data:{ocs:{meta:s}}}=await Zl.put("".concat(n,"/filedrop"),{filedrop:JSON.stringify(r)},{headers:{"x-e2ee-supported":!0},params:{shareToken:i}});if(s.statuscode!==200)throw new Error("Failed to upload metadata: ".concat(s.message))}async function Gf(e){const t=new Blob([e]).stream().pipeThrough(new CompressionStream("gzip")),r=[],i=t.getReader();for(;;){const{value:n}=await i.read();if(n===void 0)break;r.push(n)}return new Uint8Array(await new Blob(r).arrayBuffer())}async function Jf(e,t){return Promise.all(Object.entries(e).map(async([r,i])=>{const n=await window.crypto.subtle.exportKey("raw",t.key),s=await td(i,n);return{userId:r,encryptedFiledropKey:Jt(s)}}))}function Zf(e){return e.slice(e.byteLength-16)}async function Yf(){return await window.crypto.subtle.generateKey({name:"AES-GCM",length:128},!0,["encrypt","decrypt"])}async function ip(){return{key:await Yf(),initializationVector:window.crypto.getRandomValues(new Uint8Array(16))}}async function np({key:e,initializationVector:t},r){const i=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:t},e,r);return{content:i,tag:Zf(i)}}async function Xf(e){const t=await e.arrayBuffer(),r=await ip(),{content:i,tag:n}=await np(r,new Uint8Array(t));return Dt.debug("[FileDrop] File encrypted: ".concat(e.name),{file:e,content:i,tag:n,encryptionParams:r,rawKey:Jt(await window.crypto.subtle.exportKey("raw",r.key))}),{encryptedFileContent:i,encryptionInfo:{filename:e.name,mimetype:e.type||"application/octet-stream",nonce:Jt(r.initializationVector),key:Jt(await window.crypto.subtle.exportKey("raw",r.key)),authenticationTag:Jt(n)}}}async function Qf(e){const t=new rp(e);return await window.crypto.subtle.importKey("spki",t.publicKey.rawData,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"])}async function td(e,t){return await window.crypto.subtle.encrypt({name:"RSA-OAEP"},await Qf(e),t)}async function ed(e,t,r,i){await Zl.put(Up.join(Mp(),e,t),r,{headers:{Authorization:"Basic ".concat(btoa("".concat(i,":")))}})}const rd={name:"CheckIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var id=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon check-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(r){return e.$emit("click",r)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},nd=[],sd=Lo(rd,id,nd,!1,null,null);const od=sd.exports,ad={name:"AlertCircleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var cd=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon alert-circle-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(r){return e.$emit("click",r)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},ld=[],ud=Lo(ad,cd,ld,!1,null,null);const pd=ud.exports,hd={name:"ArrowLeftIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var fd=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon arrow-left-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(r){return e.$emit("click",r)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},dd=[],yd=Bn(hd,fd,dd,!1,null,null);const gd=yd.exports;var vd=Object.defineProperty,md=Object.defineProperties,wd=Object.getOwnPropertyDescriptors,kn=Object.getOwnPropertySymbols,sp=Object.prototype.hasOwnProperty,op=Object.prototype.propertyIsEnumerable,ql=(e,t,r)=>t in e?vd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bd=(e,t)=>{for(var r in t||(t={}))sp.call(t,r)&&ql(e,r,t[r]);if(kn)for(var r of kn(t))op.call(t,r)&&ql(e,r,t[r]);return e},Sd=(e,t)=>md(e,wd(t)),Ad=(e,t)=>{var r={};for(var i in e)sp.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&kn)for(var i of kn(e))t.indexOf(i)<0&&op.call(e,i)&&(r[i]=e[i]);return r};function ap(e,t,r,i,n,s,a,l){var u=typeof e=="function"?e.options:e;t&&(u.render=t,u.staticRenderFns=r,u._compiled=!0);var f;if(n&&(f=n),f)if(u.functional){u._injectStyles=f;var A=u.render;u.render=function(F,N){return f.call(N),A(F,N)}}else{var w=u.beforeCreate;u.beforeCreate=w?[].concat(w,f):[f]}return{exports:e,options:u}}const xd={name:"splitpanes",props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},provide(){return{requestUpdate:this.requestUpdate,onPaneAdd:this.onPaneAdd,onPaneRemove:this.onPaneRemove,onPaneClick:this.onPaneClick}},data:()=>({container:null,ready:!1,panes:[],touch:{mouseDown:!1,dragging:!1,activeSplitter:null},splitterTaps:{splitter:null,timeoutId:null}}),computed:{panesCount(){return this.panes.length},indexedPanes(){return this.panes.reduce((e,t)=>(e[t.id]=t)&&e,{})}},methods:{updatePaneComponents(){this.panes.forEach(e=>{e.update&&e.update({[this.horizontal?"height":"width"]:"".concat(this.indexedPanes[e.id].size,"%")})})},bindEvents(){document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),document.addEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.addEventListener("touchmove",this.onMouseMove,{passive:!1}),document.addEventListener("touchend",this.onMouseUp))},unbindEvents(){document.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),document.removeEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.removeEventListener("touchmove",this.onMouseMove,{passive:!1}),document.removeEventListener("touchend",this.onMouseUp))},onMouseDown(e,t){this.bindEvents(),this.touch.mouseDown=!0,this.touch.activeSplitter=t},onMouseMove(e){this.touch.mouseDown&&(e.preventDefault(),this.touch.dragging=!0,this.calculatePanesSize(this.getCurrentMouseDrag(e)),this.$emit("resize",this.panes.map(t=>({min:t.min,max:t.max,size:t.size}))))},onMouseUp(){this.touch.dragging&&this.$emit("resized",this.panes.map(e=>({min:e.min,max:e.max,size:e.size}))),this.touch.mouseDown=!1,setTimeout(()=>{this.touch.dragging=!1,this.unbindEvents()},100)},onSplitterClick(e,t){"ontouchstart"in window&&(e.preventDefault(),this.dblClickSplitter&&(this.splitterTaps.splitter===t?(clearTimeout(this.splitterTaps.timeoutId),this.splitterTaps.timeoutId=null,this.onSplitterDblClick(e,t),this.splitterTaps.splitter=null):(this.splitterTaps.splitter=t,this.splitterTaps.timeoutId=setTimeout(()=>{this.splitterTaps.splitter=null},500)))),this.touch.dragging||this.$emit("splitter-click",this.panes[t])},onSplitterDblClick(e,t){let r=0;this.panes=this.panes.map((i,n)=>(i.size=n===t?i.max:i.min,n!==t&&(r+=i.min),i)),this.panes[t].size-=r,this.$emit("pane-maximize",this.panes[t])},onPaneClick(e,t){this.$emit("pane-click",this.indexedPanes[t])},getCurrentMouseDrag(e){const t=this.container.getBoundingClientRect(),{clientX:r,clientY:i}="ontouchstart"in window&&e.touches?e.touches[0]:e;return{x:r-t.left,y:i-t.top}},getCurrentDragPercentage(e){e=e[this.horizontal?"y":"x"];const t=this.container[this.horizontal?"clientHeight":"clientWidth"];return this.rtl&&!this.horizontal&&(e=t-e),e*100/t},calculatePanesSize(e){const t=this.touch.activeSplitter;let r={prevPanesSize:this.sumPrevPanesSize(t),nextPanesSize:this.sumNextPanesSize(t),prevReachedMinPanes:0,nextReachedMinPanes:0};const i=0+(this.pushOtherPanes?0:r.prevPanesSize),n=100-(this.pushOtherPanes?0:r.nextPanesSize),s=Math.max(Math.min(this.getCurrentDragPercentage(e),n),i);let a=[t,t+1],l=this.panes[a[0]]||null,u=this.panes[a[1]]||null;const f=l.max<100&&s>=l.max+r.prevPanesSize,A=u.max<100&&s<=100-(u.max+this.sumNextPanesSize(t+1));if(f||A){f?(l.size=l.max,u.size=Math.max(100-l.max-r.prevPanesSize-r.nextPanesSize,0)):(l.size=Math.max(100-u.max-r.prevPanesSize-this.sumNextPanesSize(t+1),0),u.size=u.max);return}if(this.pushOtherPanes){const w=this.doPushOtherPanes(r,s);if(!w)return;({sums:r,panesToResize:a}=w),l=this.panes[a[0]]||null,u=this.panes[a[1]]||null}l!==null&&(l.size=Math.min(Math.max(s-r.prevPanesSize-r.prevReachedMinPanes,l.min),l.max)),u!==null&&(u.size=Math.min(Math.max(100-s-r.nextPanesSize-r.nextReachedMinPanes,u.min),u.max))},doPushOtherPanes(e,t){const r=this.touch.activeSplitter,i=[r,r+1];return t<e.prevPanesSize+this.panes[i[0]].min&&(i[0]=this.findPrevExpandedPane(r).index,e.prevReachedMinPanes=0,i[0]<r&&this.panes.forEach((n,s)=>{s>i[0]&&s<=r&&(n.size=n.min,e.prevReachedMinPanes+=n.min)}),e.prevPanesSize=this.sumPrevPanesSize(i[0]),i[0]===void 0)?(e.prevReachedMinPanes=0,this.panes[0].size=this.panes[0].min,this.panes.forEach((n,s)=>{s>0&&s<=r&&(n.size=n.min,e.prevReachedMinPanes+=n.min)}),this.panes[i[1]].size=100-e.prevReachedMinPanes-this.panes[0].min-e.prevPanesSize-e.nextPanesSize,null):t>100-e.nextPanesSize-this.panes[i[1]].min&&(i[1]=this.findNextExpandedPane(r).index,e.nextReachedMinPanes=0,i[1]>r+1&&this.panes.forEach((n,s)=>{s>r&&s<i[1]&&(n.size=n.min,e.nextReachedMinPanes+=n.min)}),e.nextPanesSize=this.sumNextPanesSize(i[1]-1),i[1]===void 0)?(e.nextReachedMinPanes=0,this.panes[this.panesCount-1].size=this.panes[this.panesCount-1].min,this.panes.forEach((n,s)=>{s<this.panesCount-1&&s>=r+1&&(n.size=n.min,e.nextReachedMinPanes+=n.min)}),this.panes[i[0]].size=100-e.prevPanesSize-e.nextReachedMinPanes-this.panes[this.panesCount-1].min-e.nextPanesSize,null):{sums:e,panesToResize:i}},sumPrevPanesSize(e){return this.panes.reduce((t,r,i)=>t+(i<e?r.size:0),0)},sumNextPanesSize(e){return this.panes.reduce((t,r,i)=>t+(i>e+1?r.size:0),0)},findPrevExpandedPane(e){return[...this.panes].reverse().find(t=>t.index<e&&t.size>t.min)||{}},findNextExpandedPane(e){return this.panes.find(t=>t.index>e+1&&t.size>t.min)||{}},checkSplitpanesNodes(){Array.from(this.container.children).forEach(e=>{const t=e.classList.contains("splitpanes__pane"),r=e.classList.contains("splitpanes__splitter");if(!t&&!r){e.parentNode.removeChild(e),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed.");return}})},addSplitter(e,t,r=!1){const i=e-1,n=document.createElement("div");n.classList.add("splitpanes__splitter"),r||(n.onmousedown=s=>this.onMouseDown(s,i),typeof window<"u"&&"ontouchstart"in window&&(n.ontouchstart=s=>this.onMouseDown(s,i)),n.onclick=s=>this.onSplitterClick(s,i+1)),this.dblClickSplitter&&(n.ondblclick=s=>this.onSplitterDblClick(s,i+1)),t.parentNode.insertBefore(n,t)},removeSplitter(e){e.onmousedown=void 0,e.onclick=void 0,e.ondblclick=void 0,e.parentNode.removeChild(e)},redoSplitters(){const e=Array.from(this.container.children);e.forEach(r=>{r.className.includes("splitpanes__splitter")&&this.removeSplitter(r)});let t=0;e.forEach(r=>{r.className.includes("splitpanes__pane")&&(!t&&this.firstSplitter?this.addSplitter(t,r,!0):t&&this.addSplitter(t,r),t++)})},requestUpdate(e){var t=e,{target:r}=t,i=Ad(t,["target"]);const n=this.indexedPanes[r._uid];Object.entries(i).forEach(([s,a])=>n[s]=a)},onPaneAdd(e){let t=-1;Array.from(e.$el.parentNode.children).some(n=>(n.className.includes("splitpanes__pane")&&t++,n===e.$el));const r=parseFloat(e.minSize),i=parseFloat(e.maxSize);this.panes.splice(t,0,{id:e._uid,index:t,min:isNaN(r)?0:r,max:isNaN(i)?100:i,size:e.size===null?null:parseFloat(e.size),givenSize:e.size,update:e.update}),this.panes.forEach((n,s)=>n.index=s),this.ready&&this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({addedPane:this.panes[t]}),this.$emit("pane-add",{index:t,panes:this.panes.map(n=>({min:n.min,max:n.max,size:n.size}))})})},onPaneRemove(e){const t=this.panes.findIndex(i=>i.id===e._uid),r=this.panes.splice(t,1)[0];this.panes.forEach((i,n)=>i.index=n),this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({removedPane:Sd(bd({},r),{index:t})}),this.$emit("pane-remove",{removed:r,panes:this.panes.map(i=>({min:i.min,max:i.max,size:i.size}))})})},resetPaneSizes(e={}){!e.addedPane&&!e.removedPane?this.initialPanesSizing():this.panes.some(t=>t.givenSize!==null||t.min||t.max<100)?this.equalizeAfterAddOrRemove(e):this.equalize(),this.ready&&this.$emit("resized",this.panes.map(t=>({min:t.min,max:t.max,size:t.size})))},equalize(){const e=100/this.panesCount;let t=0,r=[],i=[];this.panes.forEach(n=>{n.size=Math.max(Math.min(e,n.max),n.min),t-=n.size,n.size>=n.max&&r.push(n.id),n.size<=n.min&&i.push(n.id)}),t>.1&&this.readjustSizes(t,r,i)},initialPanesSizing(){100/this.panesCount;let e=100,t=[],r=[],i=0;this.panes.forEach(s=>{e-=s.size,s.size!==null&&i++,s.size>=s.max&&t.push(s.id),s.size<=s.min&&r.push(s.id)});let n=100;e>.1&&(this.panes.forEach(s=>{s.size===null&&(s.size=Math.max(Math.min(e/(this.panesCount-i),s.max),s.min)),n-=s.size}),n>.1&&this.readjustSizes(e,t,r))},equalizeAfterAddOrRemove({addedPane:e,removedPane:t}={}){let r=100/this.panesCount,i=0,n=[],s=[];e&&e.givenSize!==null&&(r=(100-e.givenSize)/(this.panesCount-1)),this.panes.forEach(a=>{i-=a.size,a.size>=a.max&&n.push(a.id),a.size<=a.min&&s.push(a.id)}),!(Math.abs(i)<.1)&&(this.panes.forEach(a=>{e&&e.givenSize!==null&&e.id===a.id||(a.size=Math.max(Math.min(r,a.max),a.min)),i-=a.size,a.size>=a.max&&n.push(a.id),a.size<=a.min&&s.push(a.id)}),i>.1&&this.readjustSizes(i,n,s))},readjustSizes(e,t,r){let i;e>0?i=e/(this.panesCount-t.length):i=e/(this.panesCount-r.length),this.panes.forEach((n,s)=>{if(e>0&&!t.includes(n.id)){const a=Math.max(Math.min(n.size+i,n.max),n.min),l=a-n.size;e-=l,n.size=a}else if(!r.includes(n.id)){const a=Math.max(Math.min(n.size+i,n.max),n.min),l=a-n.size;e-=l,n.size=a}n.update({[this.horizontal?"height":"width"]:"".concat(this.indexedPanes[n.id].size,"%")})}),Math.abs(e)>.1&&this.$nextTick(()=>{this.ready&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})}},watch:{panes:{deep:!0,immediate:!1,handler(){this.updatePaneComponents()}},horizontal(){this.updatePaneComponents()},firstSplitter(){this.redoSplitters()},dblClickSplitter(e){[...this.container.querySelectorAll(".splitpanes__splitter")].forEach((t,r)=>{t.ondblclick=e?i=>this.onSplitterDblClick(i,r):void 0})}},beforeDestroy(){this.ready=!1},mounted(){this.container=this.$refs.container,this.checkSplitpanesNodes(),this.redoSplitters(),this.resetPaneSizes(),this.$emit("ready"),this.ready=!0},render(e){return e("div",{ref:"container",class:["splitpanes","splitpanes--".concat(this.horizontal?"horizontal":"vertical"),{"splitpanes--dragging":this.touch.dragging}]},this.$slots.default)}};let kd,Bd;const Wl={};var Cd=ap(xd,kd,Bd,!1,Ed);function Ed(e){for(let t in Wl)this[t]=Wl[t]}var Id=function(){return Cd.exports}(),Od=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"splitpanes__pane",style:e.style,on:{click:function(i){return e.onPaneClick(i,e._uid)}}},[e._t("default")],2)},Nd=[];const Td={name:"pane",inject:["requestUpdate","onPaneAdd","onPaneRemove","onPaneClick"],props:{size:{type:[Number,String],default:null},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},data:()=>({style:{}}),mounted(){this.onPaneAdd(this)},beforeDestroy(){this.onPaneRemove(this)},methods:{update(e){this.style=e}},computed:{sizeNumber(){return this.size||this.size===0?parseFloat(this.size):null},minSizeNumber(){return parseFloat(this.minSize)},maxSizeNumber(){return parseFloat(this.maxSize)}},watch:{sizeNumber(e){this.requestUpdate({target:this,size:e})},minSizeNumber(e){this.requestUpdate({target:this,min:e})},maxSizeNumber(e){this.requestUpdate({target:this,max:e})}}},Gl={};var Pd=ap(Td,Od,Nd,!1,Dd);function Dd(e){for(let t in Gl)this[t]=Gl[t]}var jd=function(){return Pd.exports}();Yl(Rp);const Ud={name:"NcAppDetailsToggle",directives:{tooltip:Lp},components:{NcButton:Xl,ArrowRight:qp,ArrowLeft:gd},setup(){return{isRTL:$p(),isMobile:$o()}},computed:{title(){return Ql("Go back to the list")}},watch:{isMobile:{immediate:!0,handler(){this.toggleAppNavigationButton(this.isMobile)}}},beforeDestroy(){this.isMobile&&this.toggleAppNavigationButton(!1)},methods:{toggleAppNavigationButton(e=!0){const t=document.querySelector(".app-navigation .app-navigation-toggle");t&&(t.style.display=e?"none":null,e===!0&&Ai("toggle-navigation",{open:!1}))}}};var Md=function(){var e=this,t=e._self._c;return t("NcButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.title,expression:"title"}],staticClass:"app-details-toggle",class:{"app-details-toggle--mobile":e.isMobile},attrs:{type:"tertiary","aria-label":e.title},scopedSlots:e._u([{key:"icon",fn:function(){return[e.isRTL?t("ArrowLeft",{attrs:{size:20}}):t("ArrowRight",{attrs:{size:20}})]},proxy:!0}])})},Vd=[],Rd=Bn(Ud,Md,Vd,!1,null,"089eb524");const zd=Rd.exports,Jl=Vp("nextcloud").persist().build(),Ld={name:"NcAppContent",components:{NcAppDetailsToggle:zd,Pane:jd,Splitpanes:Id},props:{allowSwipeNavigation:{type:Boolean,default:!0},listSize:{type:Number,default:20},listMinWidth:{type:Number,default:15},listMaxWidth:{type:Number,default:40},paneConfigKey:{type:String,default:""},showDetails:{type:Boolean,default:!0},pageHeading:{type:String,default:null},layout:{type:String,default:"vertical-split",validator(e){return["no-split","vertical-split","horizontal-split"].includes(e)}}},emits:["update:showDetails","resize:list"],setup(){return{isMobile:$o()}},data(){return{contentHeight:0,hasList:!1,hasContent:!1,swiping:{},listPaneSize:this.restorePaneConfig()}},computed:{paneConfigID(){if(this.paneConfigKey!=="")return"pane-list-size-".concat(this.paneConfigKey);try{return"pane-list-size-".concat(Dp)}catch(e){return console.info("[INFO] AppContent:","falling back to global nextcloud pane config"),"pane-list-size-nextcloud"}},detailsPaneSize(){return this.listPaneSize?100-this.listPaneSize:this.paneDefaults.details.size},paneDefaults(){return{list:{size:this.listSize,min:this.listMinWidth,max:this.listMaxWidth},details:{size:100-this.listSize,min:100-this.listMaxWidth,max:100-this.listMinWidth}}}},updated(){this.checkSlots()},mounted(){this.allowSwipeNavigation&&(this.swiping=zp(this.$el,{onSwipeEnd:this.handleSwipe})),this.checkSlots(),this.restorePaneConfig()},methods:{handleSwipe(e,t){Math.abs(this.swiping.lengthX)>70&&(this.swiping.coordsStart.x<300/2&&t==="right"?Ai("toggle-navigation",{open:!0}):this.swiping.coordsStart.x<300*1.5&&t==="left"&&Ai("toggle-navigation",{open:!1}))},handlePaneResize(e){const t=parseInt(e[0].size,10);Jl.setItem(this.paneConfigID,JSON.stringify(t)),this.listPaneSize=t,this.$emit("resize:list",{size:t}),console.debug("AppContent pane config",t)},checkSlots(){this.hasList=!!this.$scopedSlots.list,this.hasContent=!!this.$scopedSlots.default},restorePaneConfig(){const e=parseInt(Jl.getItem(this.paneConfigID),10);if(!isNaN(e)&&e!==this.listPaneSize)return console.debug("AppContent pane config",e),this.listPaneSize=e,e},hideDetails(){this.$emit("update:showDetails",!1)}}};var $d=function(){var e=this,t=e._self._c;return t("main",{staticClass:"app-content no-snapper",class:{"app-content--has-list":e.hasList},attrs:{id:"app-content-vue"}},[e.pageHeading?t("h1",{staticClass:"hidden-visually"},[e._v(" "+e._s(e.pageHeading)+" ")]):e._e(),e.hasList?[e.isMobile||e.layout==="no-split"?t("div",{staticClass:"app-content-wrapper app-content-wrapper--no-split",class:{"app-content-wrapper--show-details":e.showDetails,"app-content-wrapper--show-list":!e.showDetails,"app-content-wrapper--mobile":e.isMobile}},[e.showDetails?t("NcAppDetailsToggle",{nativeOn:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.hideDetails.apply(null,arguments)}}}):e._e(),e.showDetails?e._t("default"):e._t("list")],2):e.layout==="vertical-split"||e.layout==="horizontal-split"?t("div",{staticClass:"app-content-wrapper"},[t("Splitpanes",{staticClass:"default-theme",class:{"splitpanes--horizontal":e.layout==="horizontal-split","splitpanes--vertical":e.layout==="vertical-split"},attrs:{horizontal:e.layout==="horizontal-split"},on:{resized:e.handlePaneResize}},[t("Pane",{staticClass:"splitpanes__pane-list",attrs:{size:e.listPaneSize||e.paneDefaults.list.size,"min-size":e.paneDefaults.list.min,"max-size":e.paneDefaults.list.max}},[e._t("list")],2),t("Pane",{staticClass:"splitpanes__pane-details",attrs:{size:e.detailsPaneSize,"min-size":e.paneDefaults.details.min,"max-size":e.paneDefaults.details.max}},[e._t("default")],2)],1)],1):e._e()]:e._e(),e.hasList?e._e():e._t("default")],2)},Hd=[],_d=Bn(Ld,$d,Hd,!1,null,"7b4bc577");const Fd=_d.exports;let Kd="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",qd=(e=21)=>{let t="",r=e|0;for(;r--;)t+=Kd[Math.random()*64|0];return t};function Si(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Si=function(t){return typeof t}:Si=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Si(e)}var cp={selector:"vue-portal-target-".concat(qd())},Wd=function(e){return cp.selector=e},hs=typeof window<"u"&&(typeof document>"u"?"undefined":Si(document))!==void 0,Gd=Or.extend({abstract:!0,name:"PortalOutlet",props:["nodes","tag"],data:function(e){return{updatedNodes:e.nodes}},render:function(e){var t=this.updatedNodes&&this.updatedNodes();return t?t.length===1&&!t[0].text?t:e(this.tag||"DIV",t):e()},destroyed:function(){var e=this.$el;e&&e.parentNode.removeChild(e)}}),lp=Or.extend({name:"VueSimplePortal",props:{disabled:{type:Boolean},prepend:{type:Boolean},selector:{type:String,default:function(){return"#".concat(cp.selector)}},tag:{type:String,default:"DIV"}},render:function(e){if(this.disabled){var t=this.$scopedSlots&&this.$scopedSlots.default();return t?t.length<2&&!t[0].text?t:e(this.tag,t):e()}return e()},created:function(){this.getTargetEl()||this.insertTargetEl()},updated:function(){var e=this;this.$nextTick(function(){!e.disabled&&e.slotFn!==e.$scopedSlots.default&&(e.container.updatedNodes=e.$scopedSlots.default),e.slotFn=e.$scopedSlots.default})},beforeDestroy:function(){this.unmount()},watch:{disabled:{immediate:!0,handler:function(e){e?this.unmount():this.$nextTick(this.mount)}}},methods:{getTargetEl:function(){if(hs)return document.querySelector(this.selector)},insertTargetEl:function(){if(hs){var e=document.querySelector("body"),t=document.createElement(this.tag);t.id=this.selector.substring(1),e.appendChild(t)}},mount:function(){if(hs){var e=this.getTargetEl(),t=document.createElement("DIV");this.prepend&&e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),this.container=new Gd({el:t,parent:this,propsData:{tag:this.tag,nodes:this.$scopedSlots.default}})}},unmount:function(){this.container&&(this.container.$destroy(),delete this.container)}}});function Jd(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.component(t.name||"portal",lp),t.defaultSelector&&Wd(t.defaultSelector)}typeof window<"u"&&window.Vue&&window.Vue===Or&&Or.use(Jd),Yl(Hp);const Zd='<!--\n  - SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<svg width="395" height="314" viewBox="0 0 395 314" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="395" height="314" rx="11" fill="#439DCD"/>\n<rect x="13" y="51" width="366" height="248" rx="8" fill="white"/>\n<rect x="22" y="111" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="127" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="63" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="191" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="143" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="79" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="159" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="95" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="175" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<path d="M288 145C277.56 147.8 265.32 149 254 149C242.68 149 230.44 147.8 220 145L218 153C225.44 155 234 156.32 242 157V209H250V185H258V209H266V157C274 156.32 282.56 155 290 153L288 145ZM254 145C258.4 145 262 141.4 262 137C262 132.6 258.4 129 254 129C249.6 129 246 132.6 246 137C246 141.4 249.6 145 254 145Z" fill="#DEDEDE"/>\n<path d="M43.5358 13C38.6641 13 34.535 16.2415 33.2552 20.6333C32.143 18.3038 29.7327 16.6718 26.9564 16.6718C23.1385 16.6718 20 19.7521 20 23.4993C20 27.2465 23.1385 30.3282 26.9564 30.3282C29.7327 30.3282 32.1429 28.6952 33.2552 26.3653C34.535 30.7575 38.6641 34 43.5358 34C48.3715 34 52.4796 30.8064 53.7921 26.4637C54.9249 28.7407 57.3053 30.3282 60.0421 30.3282C63.8601 30.3282 67 27.2465 67 23.4993C67 19.7521 63.8601 16.6718 60.0421 16.6718C57.3053 16.6718 54.9249 18.2583 53.7921 20.5349C52.4796 16.1926 48.3715 13 43.5358 13ZM43.5358 17.0079C47.2134 17.0079 50.1512 19.8899 50.1512 23.4993C50.1512 27.1087 47.2134 29.9921 43.5358 29.9921C39.8583 29.9921 36.9218 27.1087 36.9218 23.4993C36.9218 19.8899 39.8583 17.0079 43.5358 17.0079ZM26.9564 20.6797C28.5677 20.6797 29.8307 21.9179 29.8307 23.4993C29.8307 25.0807 28.5677 26.3203 26.9564 26.3203C25.3452 26.3203 24.0836 25.0807 24.0836 23.4993C24.0836 21.9179 25.3452 20.6797 26.9564 20.6797ZM60.0421 20.6797C61.6534 20.6797 62.9164 21.9179 62.9164 23.4993C62.9164 25.0807 61.6534 26.3203 60.0421 26.3203C58.4309 26.3203 57.1693 25.0807 57.1693 23.4993C57.1693 21.9179 58.4309 20.6797 60.0421 20.6797Z" fill="white"/>\n<rect x="79" y="20" width="8" height="8" rx="4" fill="white"/>\n<rect x="99" y="20" width="8" height="8" rx="4" fill="white"/>\n<rect x="119" y="20" width="8" height="8" rx="4" fill="white"/>\n<rect x="139" y="20" width="8" height="8" rx="4" fill="white"/>\n<rect x="159" y="20" width="8" height="8" rx="4" fill="white"/>\n<rect x="179" y="20" width="8" height="8" rx="4" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 0C5.37258 0 0 5.37259 0 12V302C0 308.627 5.37259 314 12 314H383C389.627 314 395 308.627 395 302V12C395 5.37258 389.627 0 383 0H12ZM140 44C132.268 44 126 50.268 126 58V292C126 299.732 132.268 306 140 306H372C379.732 306 386 299.732 386 292V58C386 50.268 379.732 44 372 44H140Z" fill="black" fill-opacity="0.35"/>\n</svg>\n',Yd='<!--\n  - SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<svg width="395" height="314" viewBox="0 0 395 314" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="395" height="314" rx="11" fill="#439DCD"/>\n<rect x="13" y="51" width="366" height="248" rx="8" fill="white"/>\n<rect x="22" y="111" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="127" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="63" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="191" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="143" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="79" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="159" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="95" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<rect x="22" y="175" width="92" height="12" rx="6" fill="#DEDEDE"/>\n<path d="M288 145C277.56 147.8 265.32 149 254 149C242.68 149 230.44 147.8 220 145L218 153C225.44 155 234 156.32 242 157V209H250V185H258V209H266V157C274 156.32 282.56 155 290 153L288 145ZM254 145C258.4 145 262 141.4 262 137C262 132.6 258.4 129 254 129C249.6 129 246 132.6 246 137C246 141.4 249.6 145 254 145Z" fill="#DEDEDE"/>\n<path d="M43.5358 13C38.6641 13 34.535 16.2415 33.2552 20.6333C32.143 18.3038 29.7327 16.6718 26.9564 16.6718C23.1385 16.6718 20 19.7521 20 23.4993C20 27.2465 23.1385 30.3282 26.9564 30.3282C29.7327 30.3282 32.1429 28.6952 33.2552 26.3653C34.535 30.7575 38.6641 34 43.5358 34C48.3715 34 52.4796 30.8064 53.7921 26.4637C54.9249 28.7407 57.3053 30.3282 60.0421 30.3282C63.8601 30.3282 67 27.2465 67 23.4993C67 19.7521 63.8601 16.6718 60.0421 16.6718C57.3053 16.6718 54.9249 18.2583 53.7921 20.5349C52.4796 16.1926 48.3715 13 43.5358 13ZM43.5358 17.0079C47.2134 17.0079 50.1512 19.8899 50.1512 23.4993C50.1512 27.1087 47.2134 29.9921 43.5358 29.9921C39.8583 29.9921 36.9218 27.1087 36.9218 23.4993C36.9218 19.8899 39.8583 17.0079 43.5358 17.0079ZM26.9564 20.6797C28.5677 20.6797 29.8307 21.9179 29.8307 23.4993C29.8307 25.0807 28.5677 26.3203 26.9564 26.3203C25.3452 26.3203 24.0836 25.0807 24.0836 23.4993C24.0836 21.9179 25.3452 20.6797 26.9564 20.6797ZM60.0421 20.6797C61.6534 20.6797 62.9164 21.9179 62.9164 23.4993C62.9164 25.0807 61.6534 26.3203 60.0421 26.3203C58.4309 26.3203 57.1693 25.0807 57.1693 23.4993C57.1693 21.9179 58.4309 20.6797 60.0421 20.6797Z" fill="white"/>\n<rect x="79" y="20" width="8" height="8" rx="4" fill="white"/>\n<rect x="99" y="20" width="8" height="8" rx="4" fill="white"/>\n<rect x="119" y="20" width="8" height="8" rx="4" fill="white"/>\n<rect x="139" y="20" width="8" height="8" rx="4" fill="white"/>\n<rect x="159" y="20" width="8" height="8" rx="4" fill="white"/>\n<rect x="179" y="20" width="8" height="8" rx="4" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 0C5.37258 0 0 5.37259 0 12V302C0 308.627 5.37259 314 12 314H383C389.627 314 395 308.627 395 302V12C395 5.37258 389.627 0 383 0H12ZM112 44C119.732 44 126 50.268 126 58V292C126 299.732 119.732 306 112 306H20C12.268 306 6 299.732 6 292V58C6 50.268 12.268 44 20 44H112Z" fill="black" fill-opacity="0.35"/>\n</svg>\n',Xd={name:"NcContent",components:{NcButton:Xl,NcIconSvgWrapper:_p,Teleport:lp},provide(){return{"NcContent:setHasAppNavigation":this.setAppNavigation,"NcContent:selector":"#content-vue"}},props:{appName:{type:String,required:!0}},setup(){return{isMobile:$o()}},data(){return{hasAppNavigation:!1,currentFocus:""}},computed:{currentImage(){return this.currentFocus==="navigation"?Yd:Zd}},beforeMount(){const e=document.getElementById("skip-actions");e&&(e.innerHTML="",e.classList.add("vue-skip-actions"))},methods:{t:Ql,openAppNavigation(){Ai("toggle-navigation",{open:!0}),this.$nextTick(()=>{window.location.hash="app-navigation-vue",document.getElementById("app-navigation-vue").focus()})},setAppNavigation(e){this.hasAppNavigation=e,this.currentFocus===""&&(this.currentFocus="navigation")}}};var Qd=function(){var e=this,t=e._self._c;return t("div",{class:["content","app-".concat(e.appName.toLowerCase())],attrs:{id:"content-vue"}},[t("Teleport",{attrs:{selector:"#skip-actions"}},[t("div",{staticClass:"vue-skip-actions__container"},[t("div",{staticClass:"vue-skip-actions__headline"},[e._v(" "+e._s(e.t("Keyboard navigation help"))+" ")]),t("div",{staticClass:"vue-skip-actions__buttons"},[t("NcButton",{directives:[{name:"show",rawName:"v-show",value:e.hasAppNavigation,expression:"hasAppNavigation"}],attrs:{type:"tertiary",href:"#app-navigation-vue"},on:{click:function(r){return r.preventDefault(),e.openAppNavigation.apply(null,arguments)},focusin:function(r){e.currentFocus="navigation"},mouseover:function(r){e.currentFocus="navigation"}}},[e._v(" "+e._s(e.t("Skip to app navigation"))+" ")]),t("NcButton",{attrs:{type:"tertiary",href:"#app-content-vue"},on:{focusin:function(r){e.currentFocus="content"},mouseover:function(r){e.currentFocus="content"}}},[e._v(" "+e._s(e.t("Skip to main content"))+" ")])],1),t("NcIconSvgWrapper",{directives:[{name:"show",rawName:"v-show",value:!e.isMobile,expression:"!isMobile"}],staticClass:"vue-skip-actions__image",attrs:{svg:e.currentImage,size:"auto"}})],1),e._v(" ")]),e._t("default")],2)},ty=[],ey=Bn(Xd,Qd,ty,!1,null,"d8f0539f");const ry=ey.exports,fe={NONE:"none",ENCRYPTING:"encrypting",UPLOADING:"uploading",UPLOADED:"uploaded",UPLOADING_METADATA:"uploading_metadata",DONE:"done"},iy={name:"FileDrop",components:{NcContent:ry,NcAppContent:Fd,NcLoadingIcon:Fp,IconCheck:od,IconAlertCircle:pd},data(){return{shareToken:lr("end_to_end_encryption","token"),folderId:lr("end_to_end_encryption","fileId"),publicKeys:lr("end_to_end_encryption","publicKeys"),fileName:lr("end_to_end_encryption","fileName"),encryptionVersion:Number.parseInt(lr("end_to_end_encryption","encryptionVersion")),uploadedFiles:[],loading:!1,UploadStep:fe,highlightDropZone:!1}},methods:{handleDragOver(e){var t;(t=e.dataTransfer)!=null&&t.types.includes("Files")&&(e.dataTransfer.dropEffect="copy",this.highlightDropZone=!0)},handleDrop(e){var t;(t=e.dataTransfer)!=null&&t.types.includes("Files")&&(this.filesChange(e.dataTransfer.files),this.highlightDropZone=!1)},async filesChange(e){if(!(e!=null&&e.length)||this.loading)return;this.loading=!0;let t=[];try{t=await Promise.all(Array.from(e).map(r=>this.uploadFile(r))),Dt.debug("[FileDrop] Files uploaded",{progresses:t})}catch(r){Dt.error("[FileDrop] Error while uploading files",{exception:r}),xa(this.t("end_to_end_encryption","Error while uploading files")),t.forEach(i=>{i.error=!0})}try{t.filter(({error:i})=>!i).forEach(i=>{i.step=fe.UPLOADING_METADATA});const r=t.filter(({error:i})=>!i).reduce((i,{fileDrop:n})=>L(L({},i),n),{});Dt.debug("[FileDrop] FileDrop entries computed",{fileDrops:r}),await Wf(this.encryptionVersion,this.folderId,r,this.shareToken)}catch(r){Dt.error("[FileDrop] Error while uploading metadata",{exception:r}),xa(this.t("end_to_end_encryption","Error while uploading metadata")),t.forEach(i=>{i.error=!0})}t.filter(({error:r})=>!r).forEach(r=>{r.step=fe.DONE}),this.loading=!1},async uploadFile(e){const t={file:e,step:fe.NONE,error:!1,fileDrop:{}};this.uploadedFiles.push(t);try{t.step=fe.ENCRYPTING;const{encryptedFileContent:r,encryptionInfo:i}=await Xf(e),n=Yp().replaceAll("-","");t.fileDrop[n]=await qf(i,this.publicKeys),Dt.debug("[FileDrop] Filedrop entry computed: ".concat(e.name),{fileDropEntry:t.fileDrop[n]}),t.step=fe.UPLOADING,await ed("/public.php/dav/files/".concat(this.shareToken),n,r,this.shareToken),t.step=fe.UPLOADED,Dt.debug("[FileDrop] File uploaded: ".concat(e.name),{encryptedFileContent:r,encryptionInfo:i,encryptedFileName:n,shareToken:this.shareToken})}catch(r){t.error=!0,Dt.error("[FileDrop] Fail to upload the file (".concat(t.step,")"),{exception:r})}return t},t:Kp}};var ny=function(){var e=this,t=e._self._c;return t("NcContent",{attrs:{"app-name":"end_to_end_encryption"}},[t("NcAppContent",{nativeOn:{drop:function(r){return r.preventDefault(),e.handleDrop.apply(null,arguments)},dragover:function(r){return r.preventDefault(),e.handleDragOver.apply(null,arguments)},dragleave:function(r){e.highlightDropZone=!1}}},[t("div",{staticClass:"uploader-form",class:{highlight:e.highlightDropZone}},[t("div",{staticClass:"uploader-form__label"},[t("div",{staticClass:"uploader-form__icon icon-folder"}),e._v(" "+e._s(e.t("end_to_end_encryption","Upload encrypted files to {fileName}",{fileName:e.fileName}))+" "),t("label",{staticClass:"uploader-form__input button primary",class:{loading:e.loading}},[e._v(" "+e._s(e.t("end_to_end_encryption","Select or drop files"))+" "),t("input",{attrs:{type:"file",multiple:"",disabled:e.loading},on:{change:function(r){var i;return e.filesChange((i=r.target)==null?void 0:i.files)}}})])]),t("ul",{staticClass:"uploader-form__file-list"},e._l(e.uploadedFiles,function({file:r,step:i,error:n},s){return t("li",{key:s,staticClass:"uploader-form__file-list__item"},[n?t("IconAlertCircle",{attrs:{size:20}}):i===e.UploadStep.DONE?t("IconCheck",{attrs:{size:20}}):t("NcLoadingIcon"),t("b",[e._v(e._s(r.name))])],1)}),0)])])],1)},sy=[],oy=Lo(iy,ny,sy,!1,null,"8a5d9b72");const ay=oy.exports,cy=Or.extend(ay);new cy({}).$mount("#content");
